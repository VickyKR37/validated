(()=>{var exports={};exports.id=931,exports.ids=[931],exports.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2237:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u});var n=r(3003),i=r(4293),s=r(6550),a=r.n(s),o=r(6979),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3455)),"/home/user/studio/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,7973)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2075,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/user/studio/src/app/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},954:(e,t,r)=>{let n={"47692f7aecfe96bfd22fffaee0058261159f9fce":()=>Promise.resolve().then(r.bind(r,5852)).then(e=>e.submitIdeaAction),"94cf6efeb22de6a742509fb9347d9468b1ff89cf":()=>Promise.resolve().then(r.bind(r,5852)).then(e=>e.addFeedbackAction),a40a0e9a17a5cdb6c8065dd156d779a13262beae:()=>Promise.resolve().then(r.bind(r,5852)).then(e=>e.getIdeasAction)};async function i(e,...t){return(await n[e]()).apply(null,t)}e.exports={"47692f7aecfe96bfd22fffaee0058261159f9fce":i.bind(null,"47692f7aecfe96bfd22fffaee0058261159f9fce"),"94cf6efeb22de6a742509fb9347d9468b1ff89cf":i.bind(null,"94cf6efeb22de6a742509fb9347d9468b1ff89cf"),a40a0e9a17a5cdb6c8065dd156d779a13262beae:i.bind(null,"a40a0e9a17a5cdb6c8065dd156d779a13262beae")}},6078:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,2639,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23)),Promise.resolve().then(r.t.bind(r,2816,23))},9015:(e,t,r)=>{Promise.resolve().then(r.bind(r,422))},4289:(e,t,r)=>{Promise.resolve().then(r.bind(r,3042)),Promise.resolve().then(r.bind(r,5662)),Promise.resolve().then(r.bind(r,2698)),Promise.resolve().then(r.bind(r,1606)),Promise.resolve().then(r.bind(r,2427))},434:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(9404),i=r.n(n)},6242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return s},findSourceMapURL:function(){return i.findSourceMapURL}});let n=r(5424),i=r(5361),s=r(6562).createServerReference},3486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return a}});let n=r(8974),i=r(3658),s="";function a(e,t){return(0,i.normalizePathTrailingSlash)((0,n.addPathPrefix)(e,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return n}}),r(3658);let n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9683:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(3658),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return s}});let n=r(4655),i="";function s(e){return(0,n.pathHasPrefix)(e,i)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return S}});let n=r(1174),i=r(8819),s=n._(r(7266)),a=r(5619),o=r(944),l=r(3071),u=r(1348),c=r(3416),d=r(4520),h=r(6250),f=r(9408),p=r(9683),m=r(3486),g=r(7767),y=r(2540);function v(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}function b(e,t,r,n,i,a,l,u,c){let{nodeName:d}=e.currentTarget;if("A"===d.toUpperCase()&&(v(e)||!c&&!(0,o.isLocalURL)(r)))return;e.preventDefault();let h=()=>{let e=null==l||l;"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:a,locale:u,scroll:e}):t[i?"replace":"push"](n||r,{scroll:e})};c?s.default.startTransition(h):h()}function _(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let S=s.default.forwardRef(function(e,t){let r,n;let{href:o,as:l,children:v,prefetch:S=null,passHref:w,replace:T,shallow:E,scroll:C,locale:x,onClick:I,onMouseEnter:k,onTouchStart:R,legacyBehavior:A=!1,...N}=e;r=v,A&&("string"==typeof r||"number"==typeof r)&&(r=(0,i.jsx)("a",{children:r}));let O=s.default.useContext(d.RouterContext),D=s.default.useContext(h.AppRouterContext),P=null!=O?O:D,M=!O,L=!1!==S,j=null===S?g.PrefetchKind.AUTO:g.PrefetchKind.FULL,{href:F,as:B}=s.default.useMemo(()=>{if(!O){let e=_(o);return{href:e,as:l?_(l):e}}let[e,t]=(0,a.resolveHref)(O,o,!0);return{href:e,as:l?(0,a.resolveHref)(O,l):t||e}},[O,o,l]),U=s.default.useRef(F),V=s.default.useRef(B);A&&(n=s.default.Children.only(r));let z=A?n&&"object"==typeof n&&n.ref:t,[q,$,W]=(0,f.useIntersection)({rootMargin:"200px"}),K=s.default.useCallback(e=>{(V.current!==B||U.current!==F)&&(W(),V.current=B,U.current=F),q(e)},[B,F,W,q]),H=(0,y.useMergedRef)(K,z);s.default.useEffect(()=>{},[B,F,$,x,L,null==O?void 0:O.locale,P,M,j]);let G={ref:H,onClick(e){A||"function"!=typeof I||I(e),A&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),P&&!e.defaultPrevented&&b(e,P,F,B,T,E,C,x,M)},onMouseEnter(e){A||"function"!=typeof k||k(e),A&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e)},onTouchStart:function(e){A||"function"!=typeof R||R(e),A&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e)}};if((0,u.isAbsoluteUrl)(B))G.href=B;else if(!A||w||"a"===n.type&&!("href"in n.props)){let e=void 0!==x?x:null==O?void 0:O.locale,t=(null==O?void 0:O.isLocaleDomain)&&(0,p.getDomainLocale)(B,e,null==O?void 0:O.locales,null==O?void 0:O.domainLocales);G.href=t||(0,m.addBasePath)((0,c.addLocale)(B,e,null==O?void 0:O.defaultLocale))}return A?s.default.cloneElement(n,G):(0,i.jsx)("a",{...N,...G,children:r})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return s}});let n=r(3236),i=r(3067),s=e=>{if(!e.startsWith("/"))return e;let{pathname:t,query:r,hash:s}=(0,i.parsePath)(e);return""+(0,n.removeTrailingSlash)(t)+r+s};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cancelIdleCallback:function(){return n},requestIdleCallback:function(){return r}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},n="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return d}});let n=r(2149),i=r(3071),s=r(757),a=r(1348),o=r(3658),l=r(944),u=r(4903),c=r(1394);function d(e,t,r){let d;let h="string"==typeof t?t:(0,i.formatWithValidation)(t),f=h.match(/^[a-zA-Z]{1,}:\/\//),p=f?h.slice(f[0].length):h;if((p.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+h+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let t=(0,a.normalizeRepeatedSlashes)(p);h=(f?f[0]:"")+t}if(!(0,l.isLocalURL)(h))return r?[h]:h;try{d=new URL(h.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){d=new URL("/","http://n")}try{let e=new URL(h,d);e.pathname=(0,o.normalizePathTrailingSlash)(e.pathname);let t="";if((0,u.isDynamicRoute)(e.pathname)&&e.searchParams&&r){let r=(0,n.searchParamsToUrlQuery)(e.searchParams),{result:a,params:o}=(0,c.interpolateAs)(e.pathname,e.pathname,r);a&&(t=(0,i.formatWithValidation)({pathname:a,hash:e.hash,query:(0,s.omit)(r,o)}))}let a=e.origin===d.origin?e.href.slice(e.origin.length):e.href;return r?[a,t||a]:a}catch(e){return r?[h]:h}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});let n=r(7266),i=r(956),s="function"==typeof IntersectionObserver,a=new Map,o=[];function l(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=o.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=a.get(n)))return t;let i=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:i},o.push(r),a.set(r,t),t}function u(e,t,r){let{id:n,observer:i,elements:s}=l(r);return s.set(e,t),i.observe(e),function(){if(s.delete(e),i.unobserve(e),0===s.size){i.disconnect(),a.delete(n);let e=o.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&o.splice(e,1)}}}function c(e){let{rootRef:t,rootMargin:r,disabled:a}=e,o=a||!s,[l,c]=(0,n.useState)(!1),d=(0,n.useRef)(null),h=(0,n.useCallback)(e=>{d.current=e},[]);return(0,n.useEffect)(()=>{if(s){if(o||l)return;let e=d.current;if(e&&e.tagName)return u(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!l){let e=(0,i.requestIdleCallback)(()=>c(!0));return()=>(0,i.cancelIdleCallback)(e)}},[o,r,t,l,d.current]),[h,l,(0,n.useCallback)(()=>{c(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=r(7266);function i(e,t){let r=(0,n.useRef)(()=>{}),i=(0,n.useRef)(()=>{});return(0,n.useMemo)(()=>e&&t?n=>{null===n?(r.current(),i.current()):(r.current=s(e,n),i.current=s(t,n))}:e||t,[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5633:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_SUFFIX:function(){return c},APP_DIR_ALIAS:function(){return N},CACHE_ONE_YEAR:function(){return T},DOT_NEXT_ALIAS:function(){return R},ESLINT_DEFAULT_DIRS:function(){return Q},GSP_NO_RETURNED_VALUE:function(){return $},GSSP_COMPONENT_MEMBER_ERROR:function(){return H},GSSP_NO_RETURNED_VALUE:function(){return W},INFINITE_CACHE:function(){return E},INSTRUMENTATION_HOOK_FILENAME:function(){return I},MIDDLEWARE_FILENAME:function(){return C},MIDDLEWARE_LOCATION_REGEXP:function(){return x},NEXT_BODY_SUFFIX:function(){return f},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return w},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return g},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return y},NEXT_CACHE_SOFT_TAGS_HEADER:function(){return m},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return S},NEXT_CACHE_TAGS_HEADER:function(){return p},NEXT_CACHE_TAG_MAX_ITEMS:function(){return b},NEXT_CACHE_TAG_MAX_LENGTH:function(){return _},NEXT_DATA_SUFFIX:function(){return d},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return n},NEXT_META_SUFFIX:function(){return h},NEXT_QUERY_PARAM_PREFIX:function(){return r},NEXT_RESUME_HEADER:function(){return v},NON_STANDARD_NODE_ENV:function(){return G},PAGES_DIR_ALIAS:function(){return k},PRERENDER_REVALIDATE_HEADER:function(){return i},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return s},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return F},ROOT_DIR_ALIAS:function(){return A},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return j},RSC_ACTION_ENCRYPTION_ALIAS:function(){return L},RSC_ACTION_PROXY_ALIAS:function(){return P},RSC_ACTION_VALIDATE_ALIAS:function(){return D},RSC_CACHE_WRAPPER_ALIAS:function(){return M},RSC_MOD_REF_PROXY_ALIAS:function(){return O},RSC_PREFETCH_SUFFIX:function(){return a},RSC_SEGMENTS_DIR_SUFFIX:function(){return o},RSC_SEGMENT_SUFFIX:function(){return l},RSC_SUFFIX:function(){return u},SERVER_PROPS_EXPORT_ERROR:function(){return q},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return U},SERVER_PROPS_SSG_CONFLICT:function(){return V},SERVER_RUNTIME:function(){return Y},SSG_FALLBACK_EXPORT_ERROR:function(){return Z},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return B},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return z},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return K},WEBPACK_LAYERS:function(){return J},WEBPACK_RESOURCE_QUERIES:function(){return ee}});let r="nxtP",n="nxtI",i="x-prerender-revalidate",s="x-prerender-revalidate-if-generated",a=".prefetch.rsc",o=".segments",l=".segment.rsc",u=".rsc",c=".action",d=".json",h=".meta",f=".body",p="x-next-cache-tags",m="x-next-cache-soft-tags",g="x-next-revalidated-tags",y="x-next-revalidate-tag-token",v="next-resume",b=64,_=256,S=1024,w="_N_T_",T=31536e3,E=0xfffffffe,C="middleware",x=`(?:src/)?${C}`,I="instrumentation",k="private-next-pages",R="private-dot-next",A="private-next-root-dir",N="private-next-app-dir",O="private-next-rsc-mod-ref-proxy",D="private-next-rsc-action-validate",P="private-next-rsc-server-reference",M="private-next-rsc-cache-wrapper",L="private-next-rsc-action-encryption",j="private-next-rsc-action-client-wrapper",F="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",B="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",U="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",V="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",z="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",q="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",$="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",W="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",K="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",H="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",G='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',Z="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",Q=["app","pages","components","lib","src"],Y={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},X={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route"},J={...X,GROUP:{builtinReact:[X.reactServerComponents,X.actionBrowser,X.appMetadataRoute],serverOnly:[X.reactServerComponents,X.actionBrowser,X.appMetadataRoute,X.instrument,X.middleware],neutralTarget:[X.api],clientOnly:[X.serverSideRendering,X.appPagesBrowser],bundled:[X.reactServerComponents,X.actionBrowser,X.appMetadataRoute,X.serverSideRendering,X.appPagesBrowser,X.shared,X.instrument],appPages:[X.reactServerComponents,X.serverSideRendering,X.appPagesBrowser,X.actionBrowser]}},ee={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},4520:(e,t,r)=>{"use strict";e.exports=r(5004).vendored.contexts.RouterContext},2451:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},8974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=r(3067);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return""+t+r+i+s}},3071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return s},formatWithValidation:function(){return o},urlObjectKeys:function(){return a}});let n=r(8374)._(r(2149)),i=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",o=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let c=e.search||l&&"?"+l||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||i.test(s))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),""+s+u+(a=a.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+o}let a=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function o(e){return s(e)}},4903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n.getSortedRouteObjects},getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return i.isDynamicRoute}});let n=r(4712),i=r(5541)},1394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return s}});let n=r(9966),i=r(7249);function s(e,t,r){let s="",a=(0,i.getRouteRegex)(e),o=a.groups,l=(t!==e?(0,n.getRouteMatcher)(a)(t):"")||r;s=e;let u=Object.keys(o);return u.every(e=>{let t=l[e]||"",{repeat:r,optional:n}=o[e],i="["+(r?"...":"")+e+"]";return n&&(i=(t?"":"/")+"["+i+"]"),r&&!Array.isArray(t)&&(t=[t]),(n||e in l)&&(s=s.replace(i,r?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(s=""),{params:u,result:s}}},5541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(6879),i=/\/\[[^/]+?\](?=\/|$)/;function s(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),i.test(e)}},944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return s}});let n=r(1348),i=r(7929);function s(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,i.hasBasePath)(r.pathname)}catch(e){return!1}}},757:(e,t)=>{"use strict";function r(e,t){let r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return r}})},3067:(e,t)=>{"use strict";function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},4655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=r(3067);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},2149:(e,t)=>{"use strict";function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function n(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,i]=e;Array.isArray(i)?i.forEach(e=>t.append(r,n(e))):t.set(r,n(i))}),t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return s},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i}})},3236:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},9966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(1348);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new n.DecodeError("failed to decode param")}},a={};return Object.keys(r).forEach(e=>{let t=r[e],n=i[t.pos];void 0!==n&&(a[e]=~n.indexOf("/")?n.split("/").map(e=>s(e)):t.repeat?[s(n)]:s(n))}),a}}},7249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return g},getNamedRouteRegex:function(){return m},getRouteRegex:function(){return d},parseParameter:function(){return l}});let n=r(5633),i=r(6879),s=r(2451),a=r(3236),o=/\[((?:\[.*\])|.+)\]/;function l(e){let t=e.match(o);return t?u(t[1]):u(e)}function u(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function c(e){let t=(0,a.removeTrailingSlash)(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=i.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),a=e.match(o);if(t&&a){let{key:e,optional:i,repeat:o}=u(a[1]);return r[e]={pos:n++,repeat:o,optional:i},"/"+(0,s.escapeStringRegexp)(t)+"([^/]+?)"}if(!a)return"/"+(0,s.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:i}=u(a[1]);return r[e]={pos:n++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function d(e){let{parameterizedRoute:t,groups:r}=c(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function h(){let e=0;return()=>{let t="",r=++e;for(;r>0;)t+=String.fromCharCode(97+(r-1)%26),r=Math.floor((r-1)/26);return t}}function f(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:i,keyPrefix:a}=e,{key:o,optional:l,repeat:c}=u(n),d=o.replace(/\W/g,"");a&&(d=""+a+d);let h=!1;(0===d.length||d.length>30)&&(h=!0),isNaN(parseInt(d.slice(0,1)))||(h=!0),h&&(d=r()),a?i[d]=""+a+o:i[d]=o;let f=t?(0,s.escapeStringRegexp)(t):"";return c?l?"(?:/"+f+"(?<"+d+">.+?))?":"/"+f+"(?<"+d+">.+?)":"/"+f+"(?<"+d+">[^/]+?)"}function p(e,t){let r=(0,a.removeTrailingSlash)(e).slice(1).split("/"),o=h(),l={};return{namedParameterizedRoute:r.map(e=>{let r=i.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&a){let[r]=e.split(a[0]);return f({getSafeRouteKey:o,interceptionMarker:r,segment:a[1],routeKeys:l,keyPrefix:t?n.NEXT_INTERCEPTION_MARKER_PREFIX:void 0})}return a?f({getSafeRouteKey:o,segment:a[1],routeKeys:l,keyPrefix:t?n.NEXT_QUERY_PARAM_PREFIX:void 0}):"/"+(0,s.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function m(e,t){let r=p(e,t);return{...d(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function g(e,t){let{parameterizedRoute:r}=c(e),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=p(e,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},4712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return i},getSortedRoutes:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let i=e[0];if(i.startsWith("[")&&i.endsWith("]")){let r=i.slice(1,-1),a=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),a=!0),r.startsWith("…"))throw Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?");if(r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function s(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===i.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(a){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');s(this.optionalRestSlugName,r),this.optionalRestSlugName=r,i="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');s(this.restSlugName,r),this.restSlugName=r,i="[...]"}}else{if(a)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');s(this.slugName,r),this.slugName=r,i="[]"}}this.children.has(i)||this.children.set(i,new r),this.children.get(i)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function i(e,t){let r={},i=[];for(let n=0;n<e.length;n++){let s=t(e[n]);r[s]=n,i[n]=s}return n(i).map(t=>e[r[t]])}},1348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return a},getURL:function(){return o},isAbsoluteUrl:function(){return s},isResSent:function(){return u},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return r||(r=!0,t=e(...i)),t}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function a(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=a();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},3042:(e,t,r)=>{"use strict";r.d(t,{AppHeader:()=>x});var n=r(8819),i=r(434),s=r(2012),a=r(9664);let o=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],l=(0,a.Z)("MessageCircle",o);var u=r(1855);let c=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],d=(0,a.Z)("Mountain",c),h=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],f=(0,a.Z)("Menu",h);var p=r(1664),m=r(7266),g=r(4961),y=r(9360),v=r(3020),b=r(1223);let _=g.fC,S=g.xz;g.x8;let w=g.h_,T=m.forwardRef(({className:e,...t},r)=>(0,n.jsx)(g.aV,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));T.displayName=g.aV.displayName;let E=(0,y.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),C=m.forwardRef(({side:e="right",className:t,children:r,...i},s)=>(0,n.jsxs)(w,{children:[(0,n.jsx)(T,{}),(0,n.jsxs)(g.VY,{ref:s,className:(0,b.cn)(E({side:e}),t),...i,children:[r,(0,n.jsxs)(g.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));function x(){let[e,t]=(0,m.useState)(!1),r=[{href:"#submit-idea",label:"Submit Idea",icon:s.Z},{href:"#view-feedback",label:"View Feedback",icon:l},{href:"#find-testers",label:"Find Testers",icon:u.Z}],a=({href:e,label:r,icon:s})=>(0,n.jsxs)(i.default,{href:e,className:"flex items-center gap-2 text-sm font-medium text-primary-foreground hover:text-accent-foreground transition-colors px-3 py-2 rounded-md hover:bg-primary-foreground/10",onClick:()=>t(!1),children:[(0,n.jsx)(s,{className:"h-5 w-5"}),r]});return(0,n.jsx)("header",{className:"sticky top-0 z-50 w-full bg-primary shadow-md",children:(0,n.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 md:px-6",children:[(0,n.jsxs)(i.default,{href:"/",className:"flex items-center gap-2",children:[(0,n.jsx)(d,{className:"h-6 w-6 text-primary-foreground"}),(0,n.jsx)("span",{className:"text-xl font-semibold text-primary-foreground",children:"Validated"})]}),(0,n.jsxs)("nav",{className:"hidden md:flex items-center gap-2",children:[r.map(e=>(0,n.jsx)(a,{href:e.href,label:e.label,icon:e.icon},e.href)),(0,n.jsx)(p.z,{variant:"outline",className:"text-primary-foreground border-primary-foreground/50 hover:bg-primary-foreground/10 hover:text-accent-foreground ml-2",children:"Login / Sign Up"})]}),(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsxs)(_,{open:e,onOpenChange:t,children:[(0,n.jsx)(S,{asChild:!0,children:(0,n.jsxs)(p.z,{variant:"ghost",size:"icon",className:"text-primary-foreground hover:bg-primary-foreground/10",children:[(0,n.jsx)(f,{className:"h-6 w-6"}),(0,n.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,n.jsx)(C,{side:"right",className:"w-[280px] bg-primary p-4",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 pt-8",children:[r.map(e=>(0,n.jsx)(a,{href:e.href,label:e.label,icon:e.icon},e.href)),(0,n.jsx)("div",{className:"mt-auto border-t border-primary-foreground/20 pt-4",children:(0,n.jsx)(p.z,{variant:"outline",className:"w-full text-primary-foreground border-primary-foreground/50 hover:bg-primary-foreground/10 hover:text-accent-foreground",children:"Login / Sign Up"})})]})})]})})]})})}C.displayName=g.VY.displayName,m.forwardRef(({className:e,...t},r)=>(0,n.jsx)(g.Dx,{ref:r,className:(0,b.cn)("text-lg font-semibold text-foreground",e),...t})).displayName=g.Dx.displayName,m.forwardRef(({className:e,...t},r)=>(0,n.jsx)(g.dk,{ref:r,className:(0,b.cn)("text-sm text-muted-foreground",e),...t})).displayName=g.dk.displayName},5662:(e,t,r)=>{"use strict";r.d(t,{IdeaCard:()=>tP});var n=r(8819),i=r(9752),s=r(7266),a=r(3095),o=r(6196),l=r(5819),u=r(5226),c="Avatar",[d,h]=(0,a.b)(c),[f,p]=d(c),m=s.forwardRef((e,t)=>{let{__scopeAvatar:r,...i}=e,[a,o]=s.useState("idle");return(0,n.jsx)(f,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:(0,n.jsx)(u.WV.span,{...i,ref:t})})});m.displayName=c;var g="AvatarImage",y=s.forwardRef((e,t)=>{let{__scopeAvatar:r,src:i,onLoadingStatusChange:s=()=>{},...a}=e,c=p(g,r),d=_(i,a.referrerPolicy),h=(0,o.W)(e=>{s(e),c.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==d&&h(d)},[d,h]),"loaded"===d?(0,n.jsx)(u.WV.img,{...a,ref:t,src:i}):null});y.displayName=g;var v="AvatarFallback",b=s.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:i,...a}=e,o=p(v,r),[l,c]=s.useState(void 0===i);return s.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>c(!0),i);return()=>window.clearTimeout(e)}},[i]),l&&"loaded"!==o.imageLoadingStatus?(0,n.jsx)(u.WV.span,{...a,ref:t}):null});function _(e,t){let[r,n]=s.useState("idle");return(0,l.b)(()=>{if(!e){n("error");return}let r=!0,i=new window.Image,s=e=>()=>{r&&n(e)};return n("loading"),i.onload=s("loaded"),i.onerror=s("error"),i.src=e,t&&(i.referrerPolicy=t),()=>{r=!1}},[e,t]),r}b.displayName=v;var S=m,w=y,T=b,E=r(1223);let C=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(S,{ref:r,className:(0,E.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));C.displayName=S.displayName;let x=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(w,{ref:r,className:(0,E.cn)("aspect-square h-full w-full",e),...t}));x.displayName=w.displayName;let I=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(T,{ref:r,className:(0,E.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));I.displayName=T.displayName;var k=r(1664),R=r(9664);let A=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],N=(0,R.Z)("UserRound",A),O=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],D=(0,R.Z)("MessageSquare",O);function P(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function M(e){return P(e,Date.now())}function L(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}function j(e,t){let r=L(e),n=L(t),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}let F=43200,B=1440;function U(e,t){let r=L(e),n=L(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function V(e){let t=L(e);return t.setHours(23,59,59,999),t}function z(e){let t=L(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function q(e){let t=L(e);return+V(t)==+z(t)}function $(e,t){let r;let n=L(e),i=L(t),s=j(n,i),a=Math.abs(U(n,i));if(a<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let t=j(n,i)===-s;q(L(e))&&1===a&&1===j(e,i)&&(t=!1),r=s*(a-Number(t))}return 0===r?0:r}function W(e){return t=>{let r=(e?Math[e]:Math.trunc)(t);return 0===r?0:r}}function K(e,t){return+L(e)-+L(t)}function H(e,t,r){let n=K(e,t)/1e3;return W(r?.roundingMethod)(n)}let G={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Z=(e,t,r)=>{let n;let i=G[e];return(n="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),r?.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Q(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let Y={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},X={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J={date:Q({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Q({formats:Y,defaultWidth:"full"}),dateTime:Q({formats:X,defaultWidth:"full"})},ee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},et=(e,t,r,n)=>ee[e];function er(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,i=r?.width?String(r.width):t;n=e.formattingValues[i]||e.formattingValues[t]}else{let t=e.defaultWidth,i=r?.width?String(r.width):e.defaultWidth;n=e.values[i]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}let en={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ei={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},es={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ea={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},el={ordinalNumber:(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:er({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:er({values:en,defaultWidth:"wide",argumentCallback:e=>e-1}),month:er({values:ei,defaultWidth:"wide"}),day:er({values:es,defaultWidth:"wide"}),dayPeriod:er({values:ea,defaultWidth:"wide",formattingValues:eo,defaultFormattingWidth:"wide"})};function eu(e){return(t,r={})=>{let n;let i=r.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;let o=a[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?ed(l,e=>e.test(o)):ec(l,e=>e.test(o));return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(o.length)}}}function ec(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function ed(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}let eh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ef={any:[/^b/i,/^(a|c)/i]},ep={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},em={any:[/1/i,/2/i,/3/i,/4/i]},eg={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ey={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ev={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eb={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},e_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ew={code:"en-US",formatDistance:Z,formatLong:J,formatRelative:et,localize:el,match:{ordinalNumber:function(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let i=n[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:eu({matchPatterns:eh,defaultMatchWidth:"wide",parsePatterns:ef,defaultParseWidth:"any"}),quarter:eu({matchPatterns:ep,defaultMatchWidth:"wide",parsePatterns:em,defaultParseWidth:"any",valueCallback:e=>e+1}),month:eu({matchPatterns:eg,defaultMatchWidth:"wide",parsePatterns:ey,defaultParseWidth:"any"}),day:eu({matchPatterns:ev,defaultMatchWidth:"wide",parsePatterns:eb,defaultParseWidth:"any"}),dayPeriod:eu({matchPatterns:e_,defaultMatchWidth:"any",parsePatterns:eS,defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},eT={};function eE(){return eT}function eC(e){let t=L(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ex(e,t,r){let n,i,s;let a=eE(),o=r?.locale??a.locale??ew,l=2520,u=j(e,t);if(isNaN(u))throw RangeError("Invalid time value");let c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:u});u>0?(n=L(t),i=L(e)):(n=L(e),i=L(t));let d=H(i,n),h=Math.round((d-(eC(i)-eC(n))/1e3)/60);if(h<2){if(r?.includeSeconds){if(d<5)return o.formatDistance("lessThanXSeconds",5,c);if(d<10)return o.formatDistance("lessThanXSeconds",10,c);if(d<20)return o.formatDistance("lessThanXSeconds",20,c);if(d<40)return o.formatDistance("halfAMinute",0,c);else if(d<60)return o.formatDistance("lessThanXMinutes",1,c);else return o.formatDistance("xMinutes",1,c)}return 0===h?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",h,c)}if(h<45)return o.formatDistance("xMinutes",h,c);if(h<90)return o.formatDistance("aboutXHours",1,c);if(h<B){let e=Math.round(h/60);return o.formatDistance("aboutXHours",e,c)}if(h<l)return o.formatDistance("xDays",1,c);if(h<F){let e=Math.round(h/B);return o.formatDistance("xDays",e,c)}if(h<2*F)return s=Math.round(h/F),o.formatDistance("aboutXMonths",s,c);if((s=$(i,n))<12){let e=Math.round(h/F);return o.formatDistance("xMonths",e,c)}{let e=s%12,t=Math.trunc(s/12);return e<3?o.formatDistance("aboutXYears",t,c):e<9?o.formatDistance("overXYears",t,c):o.formatDistance("almostXYears",t+1,c)}}function eI(e,t){return ex(e,M(e),t)}var ek=r(5305),eR=r(4961),eA=r(3020);let eN=eR.fC;eR.xz;let eO=eR.h_;eR.x8;let eD=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eR.aV,{ref:r,className:(0,E.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));eD.displayName=eR.aV.displayName;let eP=s.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(eO,{children:[(0,n.jsx)(eD,{}),(0,n.jsxs)(eR.VY,{ref:i,className:(0,E.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,n.jsxs)(eR.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(eA.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));eP.displayName=eR.VY.displayName;let eM=({className:e,...t})=>(0,n.jsx)("div",{className:(0,E.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});eM.displayName="DialogHeader";let eL=({className:e,...t})=>(0,n.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eL.displayName="DialogFooter";let ej=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eR.Dx,{ref:r,className:(0,E.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));ej.displayName=eR.Dx.displayName;let eF=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eR.dk,{ref:r,className:(0,E.cn)("text-sm text-muted-foreground",e),...t}));eF.displayName=eR.dk.displayName;var eB=r(2015),eU=r(1478),eV=r(4723),ez=r(4064),eq=r(7842),e$=r(6242);let eW=(0,e$.createServerReference)("94cf6efeb22de6a742509fb9347d9468b1ff89cf",e$.callServer,void 0,e$.findSourceMapURL,"addFeedbackAction");var eK=r(8484),eH=r(2556);let eG=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],eZ=(0,R.Z)("CalendarDays",eG);var eQ=r(9815),eY=r(8051),eX=r(7124);function eJ(e,[t,r]){return Math.min(r,Math.max(t,e))}var e0=r(2561);function e1(e,t){return s.useReducer((e,r)=>t[e][r]??e,e)}var e2="ScrollArea",[e3,e4]=(0,a.b)(e2),[e6,e5]=e3(e2),e8=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,type:i="hover",dir:a,scrollHideDelay:o=600,...l}=e,[c,d]=s.useState(null),[h,f]=s.useState(null),[p,m]=s.useState(null),[g,y]=s.useState(null),[v,b]=s.useState(null),[_,S]=s.useState(0),[w,T]=s.useState(0),[E,C]=s.useState(!1),[x,I]=s.useState(!1),k=(0,eY.e)(t,e=>d(e)),R=(0,eX.gm)(a);return(0,n.jsx)(e6,{scope:r,type:i,dir:R,scrollHideDelay:o,scrollArea:c,viewport:h,onViewportChange:f,content:p,onContentChange:m,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:C,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:x,onScrollbarYEnabledChange:I,onCornerWidthChange:S,onCornerHeightChange:T,children:(0,n.jsx)(u.WV.div,{dir:R,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});e8.displayName=e2;var e9="ScrollAreaViewport",e7=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,children:i,nonce:a,...o}=e,l=e5(e9,r),c=s.useRef(null),d=(0,eY.e)(t,c,l.onViewportChange);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,n.jsx)(u.WV.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,n.jsx)("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});e7.displayName=e9;var te="ScrollAreaScrollbar",tt=s.forwardRef((e,t)=>{let{forceMount:r,...i}=e,a=e5(te,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,u="horizontal"===e.orientation;return s.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),"hover"===a.type?(0,n.jsx)(tr,{...i,ref:t,forceMount:r}):"scroll"===a.type?(0,n.jsx)(tn,{...i,ref:t,forceMount:r}):"auto"===a.type?(0,n.jsx)(ti,{...i,ref:t,forceMount:r}):"always"===a.type?(0,n.jsx)(ts,{...i,ref:t}):null});tt.displayName=te;var tr=s.forwardRef((e,t)=>{let{forceMount:r,...i}=e,a=e5(te,e.__scopeScrollArea),[o,l]=s.useState(!1);return s.useEffect(()=>{let e=a.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),l(!0)},n=()=>{t=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[a.scrollArea,a.scrollHideDelay]),(0,n.jsx)(eQ.z,{present:r||o,children:(0,n.jsx)(ti,{"data-state":o?"visible":"hidden",...i,ref:t})})}),tn=s.forwardRef((e,t)=>{let{forceMount:r,...i}=e,a=e5(te,e.__scopeScrollArea),o="horizontal"===e.orientation,l=tC(()=>c("SCROLL_END"),100),[u,c]=e1("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return s.useEffect(()=>{if("idle"===u){let e=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,a.scrollHideDelay,c]),s.useEffect(()=>{let e=a.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(c("SCROLL"),l()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[a.viewport,o,c,l]),(0,n.jsx)(eQ.z,{present:r||"hidden"!==u,children:(0,n.jsx)(ts,{"data-state":"hidden"===u?"hidden":"visible",...i,ref:t,onPointerEnter:(0,e0.M)(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:(0,e0.M)(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ti=s.forwardRef((e,t)=>{let r=e5(te,e.__scopeScrollArea),{forceMount:i,...a}=e,[o,l]=s.useState(!1),u="horizontal"===e.orientation,c=tC(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(u?e:t)}},10);return tx(r.viewport,c),tx(r.content,c),(0,n.jsx)(eQ.z,{present:i||o,children:(0,n.jsx)(ts,{"data-state":o?"visible":"hidden",...a,ref:t})})}),ts=s.forwardRef((e,t)=>{let{orientation:r="vertical",...i}=e,a=e5(te,e.__scopeScrollArea),o=s.useRef(null),l=s.useRef(0),[u,c]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=tv(u.viewport,u.content),h={...i,sizes:u,onSizesChange:c,hasThumb:!!(d>0&&d<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function f(e,t){return t_(e,l.current,u,t)}return"horizontal"===r?(0,n.jsx)(ta,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){let e=tS(a.viewport.scrollLeft,u,a.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=f(e,a.dir))}}):"vertical"===r?(0,n.jsx)(to,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){let e=tS(a.viewport.scrollTop,u);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=f(e))}}):null}),ta=s.forwardRef((e,t)=>{let{sizes:r,onSizesChange:i,...a}=e,o=e5(te,e.__scopeScrollArea),[l,u]=s.useState(),c=s.useRef(null),d=(0,eY.e)(t,c,o.onScrollbarXChange);return s.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),(0,n.jsx)(tc,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tb(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(o.viewport){let n=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),tT(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ty(l.paddingLeft),paddingEnd:ty(l.paddingRight)}})}})}),to=s.forwardRef((e,t)=>{let{sizes:r,onSizesChange:i,...a}=e,o=e5(te,e.__scopeScrollArea),[l,u]=s.useState(),c=s.useRef(null),d=(0,eY.e)(t,c,o.onScrollbarYChange);return s.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),(0,n.jsx)(tc,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tb(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(o.viewport){let n=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),tT(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ty(l.paddingTop),paddingEnd:ty(l.paddingBottom)}})}})}),[tl,tu]=e3(te),tc=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,sizes:i,hasThumb:a,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:f,onWheelScroll:p,onResize:m,...g}=e,y=e5(te,r),[v,b]=s.useState(null),_=(0,eY.e)(t,e=>b(e)),S=s.useRef(null),w=s.useRef(""),T=y.viewport,E=i.content-i.viewport,C=(0,o.W)(p),x=(0,o.W)(h),I=tC(m,10);function k(e){S.current&&f({x:e.clientX-S.current.left,y:e.clientY-S.current.top})}return s.useEffect(()=>{let e=e=>{let t=e.target;v?.contains(t)&&C(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[T,v,E,C]),s.useEffect(x,[i,x]),tx(v,I),tx(y.content,I),(0,n.jsx)(tl,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:(0,o.W)(l),onThumbPointerUp:(0,o.W)(c),onThumbPositionChange:x,onThumbPointerDown:(0,o.W)(d),children:(0,n.jsx)(u.WV.div,{...g,ref:_,style:{position:"absolute",...g.style},onPointerDown:(0,e0.M)(e.onPointerDown,e=>{let t=0;e.button===t&&(e.target.setPointerCapture(e.pointerId),S.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,e0.M)(e.onPointerMove,k),onPointerUp:(0,e0.M)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,y.viewport&&(y.viewport.style.scrollBehavior=""),S.current=null})})})}),td="ScrollAreaThumb",th=s.forwardRef((e,t)=>{let{forceMount:r,...i}=e,s=tu(td,e.__scopeScrollArea);return(0,n.jsx)(eQ.z,{present:r||s.hasThumb,children:(0,n.jsx)(tf,{ref:t,...i})})}),tf=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,style:i,...a}=e,o=e5(td,r),l=tu(td,r),{onThumbPositionChange:c}=l,d=(0,eY.e)(t,e=>l.onThumbChange(e)),h=s.useRef(void 0),f=tC(()=>{h.current&&(h.current(),h.current=void 0)},100);return s.useEffect(()=>{let e=o.viewport;if(e){let t=()=>{if(f(),!h.current){let t=tE(e,c);h.current=t,c()}};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,f,c]),(0,n.jsx)(u.WV.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:(0,e0.M)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;l.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,e0.M)(e.onPointerUp,l.onThumbPointerUp)})});th.displayName=td;var tp="ScrollAreaCorner",tm=s.forwardRef((e,t)=>{let r=e5(tp,e.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&i?(0,n.jsx)(tg,{...e,ref:t}):null});tm.displayName=tp;var tg=s.forwardRef((e,t)=>{let{__scopeScrollArea:r,...i}=e,a=e5(tp,r),[o,l]=s.useState(0),[c,d]=s.useState(0),h=!!(o&&c);return tx(a.scrollbarX,()=>{let e=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(e),d(e)}),tx(a.scrollbarY,()=>{let e=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(e),l(e)}),h?(0,n.jsx)(u.WV.div,{...i,ref:t,style:{width:o,height:c,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function ty(e){return e?parseInt(e,10):0}function tv(e,t){let r=e/t;return isNaN(r)?0:r}function tb(e){let t=tv(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function t_(e,t,r,n="ltr"){let i=tb(r),s=i/2,a=t||s,o=i-a,l=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-o,c=r.content-r.viewport;return tw([l,u],"ltr"===n?[0,c]:[-1*c,0])(e)}function tS(e,t,r="ltr"){let n=tb(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,a=t.content-t.viewport,o=s-n,l=eJ(e,"ltr"===r?[0,a]:[-1*a,0]);return tw([0,a],[0,o])(l)}function tw(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function tT(e,t){return e>0&&e<t}var tE=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){let s={left:e.scrollLeft,top:e.scrollTop},a=r.left!==s.left,o=r.top!==s.top;(a||o)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function tC(e,t){let r=(0,o.W)(e),n=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(n.current),[]),s.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function tx(e,t){let r=(0,o.W)(t);(0,l.b)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}var tI=e8,tk=e7,tR=tm;let tA=s.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(tI,{ref:i,className:(0,E.cn)("relative overflow-hidden",e),...r,children:[(0,n.jsx)(tk,{className:"h-full w-full rounded-[inherit]",children:t}),(0,n.jsx)(tN,{}),(0,n.jsx)(tR,{})]}));tA.displayName=tI.displayName;let tN=s.forwardRef(({className:e,orientation:t="vertical",...r},i)=>(0,n.jsx)(tt,{ref:i,orientation:t,className:(0,E.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:(0,n.jsx)(th,{className:"relative flex-1 rounded-full bg-border"})}));function tO(){let{pending:e}=(0,ek.useFormStatus)();return(0,n.jsx)(k.z,{type:"submit",disabled:e,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eH.Z,{className:"mr-2 h-4 w-4"})," Submit Feedback"]})})}function tD({ideaId:e,ideaText:t,initialFeedbackList:r,isOpen:i,onOpenChange:a}){let[o,l]=(0,s.useState)(r),{toast:u}=(0,eK.pm)(),[c,d]=(0,s.useActionState)(eW,null),h=(0,eV.cI)({resolver:(0,ez.F)(eq.K),defaultValues:{feedbackText:"",ideaId:e}}),f=t=>{t||h.reset({feedbackText:"",ideaId:e}),a(t)};return(0,n.jsx)(eN,{open:i,onOpenChange:f,children:(0,n.jsxs)(eP,{className:"sm:max-w-[600px] max-h-[90vh] flex flex-col",children:[(0,n.jsxs)(eM,{children:[(0,n.jsxs)(ej,{className:"text-2xl flex items-center",children:[(0,n.jsx)(D,{className:"mr-2 h-6 w-6 text-primary"}),"Feedback for Idea"]}),(0,n.jsx)(eF,{className:"text-base line-clamp-3",children:t})]}),(0,n.jsx)("div",{className:"flex-grow overflow-hidden pr-2",children:(0,n.jsx)(tA,{className:"h-[300px] pr-4",children:0===o.length?(0,n.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No feedback yet. Be the first to share your thoughts!"}):(0,n.jsx)("div",{className:"space-y-4",children:o.map(e=>{let t=e.author?e.author.charAt(0).toUpperCase():(0,n.jsx)(N,{className:"h-4 w-4"});return(0,n.jsxs)("div",{className:"p-4 rounded-md border bg-card shadow",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsxs)(C,{className:"h-8 w-8",children:[(0,n.jsx)(x,{src:`https://placehold.co/32x32.png?text=${t}`,alt:e.author,"data-ai-hint":"profile avatar"}),(0,n.jsx)(I,{children:t})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-card-foreground",children:e.author}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:[(0,n.jsx)(eZ,{className:"mr-1 h-3 w-3"}),e.submittedAt?eI(new Date(e.submittedAt.toString()),{addSuffix:!0}):"recently"]})]})]}),(0,n.jsx)("p",{className:"text-sm text-foreground leading-relaxed",children:e.text})]},e.id)})})})}),(0,n.jsx)(eU.l0,{...h,children:(0,n.jsxs)("form",{action:d,className:"space-y-4 pt-4 border-t",children:[(0,n.jsx)(eU.Wi,{control:h.control,name:"feedbackText",render:({field:e})=>(0,n.jsxs)(eU.xJ,{children:[(0,n.jsx)(eU.lX,{htmlFor:"feedbackText",className:"font-semibold",children:"Your Feedback"}),(0,n.jsx)(eU.NI,{children:(0,n.jsx)(eB.g,{id:"feedbackText",placeholder:"Share your thoughts on this idea...",className:"min-h-[100px]",...e})}),(0,n.jsx)(eU.zG,{})]})}),(0,n.jsx)("input",{type:"hidden",...h.register("ideaId")}),(0,n.jsxs)(eL,{children:[(0,n.jsx)(k.z,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,n.jsx)(tO,{})]}),c&&!c.success&&c.message&&!c.issues&&(0,n.jsx)("p",{className:"text-sm font-medium text-destructive text-center pt-2",children:c.message})]})})]})})}function tP({idea:e}){let t=e.submittedAt?eI(new Date(e.submittedAt.toString()),{addSuffix:!0}):"some time ago",r=e.author?e.author.charAt(0).toUpperCase():(0,n.jsx)(N,{className:"h-5 w-5"}),a=e.feedback?.length||0,[o,l]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.Zb,{className:"w-full shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col h-full",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsxs)(C,{children:[(0,n.jsx)(x,{src:`https://placehold.co/40x40.png?text=${r}`,alt:e.author||"User","data-ai-hint":"profile avatar"}),(0,n.jsx)(I,{children:r})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.ll,{className:"text-lg font-semibold",children:e.author||"Anonymous Idea"}),(0,n.jsx)(i.SZ,{className:"text-xs text-muted-foreground",children:t})]})]})}),(0,n.jsx)(i.aY,{className:"flex-grow",children:(0,n.jsx)("p",{className:"text-foreground leading-relaxed",children:e.text})}),(0,n.jsx)(i.eW,{className:"flex-col items-start gap-2 pt-4",children:(0,n.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full transition-colors hover:bg-accent hover:text-accent-foreground",onClick:()=>l(!0),children:[(0,n.jsx)(D,{className:"mr-2 h-4 w-4"}),"View & Add Feedback (",a,")"]})})]}),(0,n.jsx)(tD,{ideaId:e.id,ideaText:e.text,initialFeedbackList:e.feedback||[],isOpen:o,onOpenChange:l})]})}tN.displayName=tt.displayName},2698:(e,t,r)=>{"use strict";r.d(t,{SubmitIdeaForm:()=>b});var n=r(8819),i=r(5305),s=r(7266),a=r(4064),o=r(4723),l=r(1664),u=r(2015),c=r(1478),d=r(9752),h=r(6242);let f=(0,h.createServerReference)("47692f7aecfe96bfd22fffaee0058261159f9fce",h.callServer,void 0,h.findSourceMapURL,"submitIdeaAction");var p=r(7842),m=r(8484),g=r(2556),y=r(2012);function v(){let{pending:e}=(0,i.useFormStatus)();return(0,n.jsx)(l.z,{type:"submit",disabled:e,className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{className:"mr-2 h-4 w-4"})," Submit Idea"]})})}function b(){let[e,t]=(0,s.useActionState)(f,null),{toast:r}=(0,m.pm)(),i=(0,o.cI)({resolver:(0,a.F)(p.z),defaultValues:{ideaText:""}});return(0,n.jsxs)(d.Zb,{className:"w-full max-w-lg shadow-xl",children:[(0,n.jsxs)(d.Ol,{className:"items-center text-center",children:[(0,n.jsx)(y.Z,{className:"h-12 w-12 text-primary mb-2"}),(0,n.jsx)(d.ll,{className:"text-3xl font-bold",children:"Share Your Vision"}),(0,n.jsx)(d.SZ,{children:"Got a brilliant business idea? Pitch it below and let the community help you refine it."})]}),(0,n.jsx)(d.aY,{children:(0,n.jsx)(c.l0,{...i,children:(0,n.jsxs)("form",{action:t,className:"space-y-6",children:[(0,n.jsx)(c.Wi,{control:i.control,name:"ideaText",render:({field:e})=>(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{htmlFor:"ideaText",className:"text-lg font-semibold",children:"Your Business Idea"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(u.g,{id:"ideaText",placeholder:"Describe your business idea in a few sentences. What problem does it solve? Who is it for?",className:"min-h-[150px] text-base",...e})}),(0,n.jsx)(c.zG,{})]})}),(0,n.jsx)(v,{}),e&&!e.success&&e.message&&!e.issues&&(0,n.jsx)("p",{className:"text-sm font-medium text-destructive",children:e.message})]})})})]})}},1606:(e,t,r)=>{"use strict";r.d(t,{TesterResources:()=>eI});var n=r(8819);let i=[{id:"communities",name:"Online Communities & Platforms",icon:r(1855).Z,resources:[{id:"tr-comm-1",name:"BetaFamily",description:"Connect with beta testers for your mobile apps, specifically focusing on finding users willing to provide *paid* feedback for early access and validation.",url:"https://betafamily.com/"}]}];var s=r(9752),a=r(7266),o=r(3095),l=r(545),u=r(8051),c=r(2561),d=r(2067),h=r(5226),f=r(5819),p=r(9815),m=r(8957),g="Collapsible",[y,v]=(0,o.b)(g),[b,_]=y(g),S=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:i,defaultOpen:s,disabled:o,onOpenChange:l,...u}=e,[c=!1,f]=(0,d.T)({prop:i,defaultProp:s,onChange:l});return(0,n.jsx)(b,{scope:r,disabled:o,contentId:(0,m.M)(),open:c,onOpenToggle:a.useCallback(()=>f(e=>!e),[f]),children:(0,n.jsx)(h.WV.div,{"data-state":I(c),"data-disabled":o?"":void 0,...u,ref:t})})});S.displayName=g;var w="CollapsibleTrigger",T=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,...i}=e,s=_(w,r);return(0,n.jsx)(h.WV.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":I(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...i,ref:t,onClick:(0,c.M)(e.onClick,s.onOpenToggle)})});T.displayName=w;var E="CollapsibleContent",C=a.forwardRef((e,t)=>{let{forceMount:r,...i}=e,s=_(E,e.__scopeCollapsible);return(0,n.jsx)(p.z,{present:r||s.open,children:({present:e})=>(0,n.jsx)(x,{...i,ref:t,present:e})})});C.displayName=E;var x=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:i,children:s,...o}=e,l=_(E,r),[c,d]=a.useState(i),p=a.useRef(null),m=(0,u.e)(t,p),g=a.useRef(0),y=g.current,v=a.useRef(0),b=v.current,S=l.open||c,w=a.useRef(S),T=a.useRef(void 0);return a.useEffect(()=>{let e=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.b)(()=>{let e=p.current;if(e){T.current=T.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,v.current=t.width,w.current||(e.style.transitionDuration=T.current.transitionDuration,e.style.animationName=T.current.animationName),d(i)}},[l.open,i]),(0,n.jsx)(h.WV.div,{"data-state":I(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:S&&s})});function I(e){return e?"open":"closed"}var k=S,R=T,A=C,N=r(7124),O="Accordion",D=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[P,M,L]=(0,l.B)(O),[j,F]=(0,o.b)(O,[L,v]),B=v(),U=a.forwardRef((e,t)=>{let{type:r,...i}=e,s=i,a=i;return(0,n.jsx)(P.Provider,{scope:e.__scopeAccordion,children:"multiple"===r?(0,n.jsx)(K,{...a,ref:t}):(0,n.jsx)(W,{...s,ref:t})})});U.displayName=O;var[V,z]=j(O),[q,$]=j(O,{collapsible:!1}),W=a.forwardRef((e,t)=>{let{value:r,defaultValue:i,onValueChange:s=()=>{},collapsible:o=!1,...l}=e,[u,c]=(0,d.T)({prop:r,defaultProp:i,onChange:s});return(0,n.jsx)(V,{scope:e.__scopeAccordion,value:u?[u]:[],onItemOpen:c,onItemClose:a.useCallback(()=>o&&c(""),[o,c]),children:(0,n.jsx)(q,{scope:e.__scopeAccordion,collapsible:o,children:(0,n.jsx)(Z,{...l,ref:t})})})}),K=a.forwardRef((e,t)=>{let{value:r,defaultValue:i,onValueChange:s=()=>{},...o}=e,[l=[],u]=(0,d.T)({prop:r,defaultProp:i,onChange:s}),c=a.useCallback(e=>u((t=[])=>[...t,e]),[u]),h=a.useCallback(e=>u((t=[])=>t.filter(t=>t!==e)),[u]);return(0,n.jsx)(V,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:h,children:(0,n.jsx)(q,{scope:e.__scopeAccordion,collapsible:!0,children:(0,n.jsx)(Z,{...o,ref:t})})})}),[H,G]=j(O),Z=a.forwardRef((e,t)=>{let{__scopeAccordion:r,disabled:i,dir:s,orientation:o="vertical",...l}=e,d=a.useRef(null),f=(0,u.e)(d,t),p=M(r),m="ltr"===(0,N.gm)(s),g=(0,c.M)(e.onKeyDown,e=>{if(!D.includes(e.key))return;let t=e.target,r=p().filter(e=>!e.ref.current?.disabled),n=r.findIndex(e=>e.ref.current===t),i=r.length;if(-1===n)return;e.preventDefault();let s=n,a=0,l=i-1,u=()=>{(s=n+1)>l&&(s=a)},c=()=>{(s=n-1)<a&&(s=l)};switch(e.key){case"Home":s=a;break;case"End":s=l;break;case"ArrowRight":"horizontal"===o&&(m?u():c());break;case"ArrowDown":"vertical"===o&&u();break;case"ArrowLeft":"horizontal"===o&&(m?c():u());break;case"ArrowUp":"vertical"===o&&c()}let d=s%i;r[d].ref.current?.focus()});return(0,n.jsx)(H,{scope:r,disabled:i,direction:s,orientation:o,children:(0,n.jsx)(P.Slot,{scope:r,children:(0,n.jsx)(h.WV.div,{...l,"data-orientation":o,ref:f,onKeyDown:i?void 0:g})})})}),Q="AccordionItem",[Y,X]=j(Q),J=a.forwardRef((e,t)=>{let{__scopeAccordion:r,value:i,...s}=e,a=G(Q,r),o=z(Q,r),l=B(r),u=(0,m.M)(),c=i&&o.value.includes(i)||!1,d=a.disabled||e.disabled;return(0,n.jsx)(Y,{scope:r,open:c,disabled:d,triggerId:u,children:(0,n.jsx)(k,{"data-orientation":a.orientation,"data-state":ea(c),...l,...s,ref:t,disabled:d,open:c,onOpenChange:e=>{e?o.onItemOpen(i):o.onItemClose(i)}})})});J.displayName=Q;var ee="AccordionHeader",et=a.forwardRef((e,t)=>{let{__scopeAccordion:r,...i}=e,s=G(O,r),a=X(ee,r);return(0,n.jsx)(h.WV.h3,{"data-orientation":s.orientation,"data-state":ea(a.open),"data-disabled":a.disabled?"":void 0,...i,ref:t})});et.displayName=ee;var er="AccordionTrigger",en=a.forwardRef((e,t)=>{let{__scopeAccordion:r,...i}=e,s=G(O,r),a=X(er,r),o=$(er,r),l=B(r);return(0,n.jsx)(P.ItemSlot,{scope:r,children:(0,n.jsx)(R,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...i,ref:t})})});en.displayName=er;var ei="AccordionContent",es=a.forwardRef((e,t)=>{let{__scopeAccordion:r,...i}=e,s=G(O,r),a=X(ei,r),o=B(r);return(0,n.jsx)(A,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...i,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function ea(e){return e?"open":"closed"}es.displayName=ei;var eo=U,el=J,eu=et,ec=en,ed=es,eh=r(9664);let ef=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ep=(0,eh.Z)("ChevronDown",ef);var em=r(1223);let eg=eo,ey=a.forwardRef(({className:e,...t},r)=>(0,n.jsx)(el,{ref:r,className:(0,em.cn)("border-b",e),...t}));ey.displayName="AccordionItem";let ev=a.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsx)(eu,{className:"flex",children:(0,n.jsxs)(ec,{ref:i,className:(0,em.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,(0,n.jsx)(ep,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ev.displayName=ec.displayName;let eb=a.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsx)(ed,{ref:i,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,n.jsx)("div",{className:(0,em.cn)("pb-4 pt-0",e),children:t})}));eb.displayName=ed.displayName;var e_=r(1664);let eS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ew=(0,eh.Z)("ExternalLink",eS),eT=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],eE=(0,eh.Z)("SearchCheck",eT);var eC=r(434);let ex=({resource:e})=>(0,n.jsx)("li",{className:"py-3 border-b border-border last:border-b-0",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold text-foreground",children:e.name}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,n.jsx)(e_.z,{variant:"outline",size:"sm",asChild:!0,className:"ml-4 shrink-0",children:(0,n.jsxs)(eC.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:["Visit ",(0,n.jsx)(ew,{className:"ml-2 h-3 w-3"})]})})]})});function eI(){return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsx)(eE,{className:"h-16 w-16 text-primary mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl",children:"Find Paying Testers: The True Validation"}),(0,n.jsx)("p",{className:"mt-4 text-xl text-muted-foreground max-w-2xl mx-auto",children:"The ultimate test for any business idea: will people pay for it? This section helps you find resources to connect with users willing to provide paid feedback, offering crucial validation for your venture."})]}),(0,n.jsx)(eg,{type:"multiple",defaultValue:i.map(e=>e.id),className:"w-full space-y-4",children:i.map(e=>(0,n.jsx)(ey,{value:e.id,className:"border-none",children:(0,n.jsxs)(s.Zb,{className:"shadow-lg",children:[(0,n.jsx)(ev,{className:"p-0 hover:no-underline",children:(0,n.jsx)(s.Ol,{className:"flex flex-row items-center justify-between w-full p-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[e.icon&&(0,n.jsx)(e.icon,{className:"h-8 w-8 text-primary"}),(0,n.jsx)(s.ll,{className:"text-2xl",children:e.name})]})})}),(0,n.jsx)(eb,{children:(0,n.jsx)(s.aY,{className:"pt-0 pb-6 px-6",children:(0,n.jsx)("ul",{className:"divide-y divide-border",children:e.resources.map(e=>(0,n.jsx)(ex,{resource:e},e.id))})})})]})},e.id))})]})}},1664:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(8819),i=r(7266),s=r(4214),a=r(9360),o=r(1223);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...a},u)=>{let c=i?s.g7:"button";return(0,n.jsx)(c,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:u,...a})});u.displayName="Button"},9752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>u,Zb:()=>a,aY:()=>c,eW:()=>d,ll:()=>l});var n=r(8819),i=r(7266),s=r(1223);let a=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));a.displayName="Card";let o=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let u=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));u.displayName="CardDescription";let c=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let d=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter"},1478:(e,t,r)=>{"use strict";r.d(t,{l0:()=>p,NI:()=>S,Wi:()=>g,xJ:()=>b,lX:()=>_,zG:()=>w});var n=r(8819),i=r(7266),s=r(4214),a=r(4723),o=r(1223),l=r(5226),u="Label",c=i.forwardRef((e,t)=>(0,n.jsx)(l.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));c.displayName=u;var d=c;let h=(0,r(9360).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(d,{ref:r,className:(0,o.cn)(h(),e),...t}));f.displayName=d.displayName;let p=a.RV,m=i.createContext({}),g=({...e})=>(0,n.jsx)(m.Provider,{value:{name:e.name},children:(0,n.jsx)(a.Qr,{...e})}),y=()=>{let e=i.useContext(m),t=i.useContext(v),{getFieldState:r,formState:n}=(0,a.Gc)(),s=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},v=i.createContext({}),b=i.forwardRef(({className:e,...t},r)=>{let s=i.useId();return(0,n.jsx)(v.Provider,{value:{id:s},children:(0,n.jsx)("div",{ref:r,className:(0,o.cn)("space-y-2",e),...t})})});b.displayName="FormItem";let _=i.forwardRef(({className:e,...t},r)=>{let{error:i,formItemId:s}=y();return(0,n.jsx)(f,{ref:r,className:(0,o.cn)(i&&"text-destructive",e),htmlFor:s,...t})});_.displayName="FormLabel";let S=i.forwardRef(({...e},t)=>{let{error:r,formItemId:i,formDescriptionId:a,formMessageId:o}=y();return(0,n.jsx)(s.g7,{ref:t,id:i,"aria-describedby":r?`${a} ${o}`:`${a}`,"aria-invalid":!!r,...e})});S.displayName="FormControl",i.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:i}=y();return(0,n.jsx)("p",{ref:r,id:i,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";let w=i.forwardRef(({className:e,children:t,...r},i)=>{let{error:s,formMessageId:a}=y(),l=s?String(s?.message??""):t;return l?(0,n.jsx)("p",{ref:i,id:a,className:(0,o.cn)("text-sm font-medium text-destructive",e),...r,children:l}):null});w.displayName="FormMessage"},2427:(e,t,r)=>{"use strict";r.d(t,{Separator:()=>f});var n=r(8819),i=r(7266),s=r(5226),a="Separator",o="horizontal",l=["horizontal","vertical"],u=i.forwardRef((e,t)=>{let{decorative:r,orientation:i=o,...a}=e,l=c(i)?i:o,u="vertical"===l?l:void 0,d=r?{role:"none"}:{"aria-orientation":u,role:"separator"};return(0,n.jsx)(s.WV.div,{"data-orientation":l,...d,...a,ref:t})});function c(e){return l.includes(e)}u.displayName=a;var d=u,h=r(1223);let f=i.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...i},s)=>(0,n.jsx)(d,{ref:s,decorative:r,orientation:t,className:(0,h.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...i}));f.displayName=d.displayName},2015:(e,t,r)=>{"use strict";r.d(t,{g:()=>a});var n=r(8819),i=r(7266),s=r(1223);let a=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));a.displayName="Textarea"},422:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>y});var n=r(8819),i=r(8484),s=r(7266),a=r(9556),o=r(9360),l=r(3020),u=r(1223);let c=a.zt,d=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.l_,{ref:r,className:(0,u.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));d.displayName=a.l_.displayName;let h=(0,o.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=s.forwardRef(({className:e,variant:t,...r},i)=>(0,n.jsx)(a.fC,{ref:i,className:(0,u.cn)(h({variant:t}),e),...r}));f.displayName=a.fC.displayName,s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.aU,{ref:r,className:(0,u.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=a.aU.displayName;let p=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.x8,{ref:r,className:(0,u.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})}));p.displayName=a.x8.displayName;let m=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.Dx,{ref:r,className:(0,u.cn)("text-sm font-semibold",e),...t}));m.displayName=a.Dx.displayName;let g=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.dk,{ref:r,className:(0,u.cn)("text-sm opacity-90",e),...t}));function y(){let{toasts:e}=(0,i.pm)();return(0,n.jsxs)(c,{children:[e.map(function({id:e,title:t,description:r,action:i,...s}){return(0,n.jsxs)(f,{...s,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[t&&(0,n.jsx)(m,{children:t}),r&&(0,n.jsx)(g,{children:r})]}),i,(0,n.jsx)(p,{})]},e)}),(0,n.jsx)(d,{})]})}g.displayName=a.dk.displayName},8484:(e,t,r)=>{"use strict";r.d(t,{pm:()=>m});var n=r(7266);let i=1,s=1e6,a=0;function o(){return(a=(a+1)%Number.MAX_SAFE_INTEGER).toString()}let l=new Map,u=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),f({type:"REMOVE_TOAST",toastId:e})},s);l.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,i)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?u(r):e.toasts.forEach(e=>{u(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],h={toasts:[]};function f(e){h=c(h,e),d.forEach(e=>{e(h)})}function p({...e}){let t=o(),r=e=>f({type:"UPDATE_TOAST",toast:{...e,id:t}}),n=()=>f({type:"DISMISS_TOAST",toastId:t});return f({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:r}}function m(){let[e,t]=n.useState(h);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:p,dismiss:e=>f({type:"DISMISS_TOAST",toastId:e})}}},7842:(e,t,r)=>{"use strict";let n;r.d(t,{K:()=>tI,z:()=>tx}),function(e){function t(e){}function r(e){throw Error()}function n(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)}e.assertEqual=e=>e,e.assertIs=t,e.assertNever=r,e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=n,e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(tb||(tb={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(t_||(t_={}));let i=tb.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),s=e=>{switch(typeof e){case"undefined":return i.undefined;case"string":return i.string;case"number":return isNaN(e)?i.nan:i.number;case"boolean":return i.boolean;case"function":return i.function;case"bigint":return i.bigint;case"symbol":return i.symbol;case"object":if(Array.isArray(e))return i.array;if(null===e)return i.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return i.promise;if("undefined"!=typeof Map&&e instanceof Map)return i.map;if("undefined"!=typeof Set&&e instanceof Set)return i.set;if("undefined"!=typeof Date&&e instanceof Date)return i.date;return i.object;default:return i.unknown}},a=tb.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),o=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class l extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof l))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tb.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}l.create=e=>new l(e);let u=(e,t)=>{let r;switch(e.code){case a.invalid_type:r=e.received===i.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,tb.jsonStringifyReplacer)}`;break;case a.unrecognized_keys:r=`Unrecognized key(s) in object: ${tb.joinValues(e.keys,", ")}`;break;case a.invalid_union:r="Invalid input";break;case a.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${tb.joinValues(e.options)}`;break;case a.invalid_enum_value:r=`Invalid enum value. Expected ${tb.joinValues(e.options)}, received '${e.received}'`;break;case a.invalid_arguments:r="Invalid function arguments";break;case a.invalid_return_type:r="Invalid function return type";break;case a.invalid_date:r="Invalid date";break;case a.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:tb.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.custom:r="Invalid input";break;case a.invalid_intersection_types:r="Intersection results could not be merged";break;case a.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.not_finite:r="Number must be finite";break;default:r=t.defaultError,tb.assertNever(e)}return{message:r}},c=u;function d(e){c=e}function h(){return c}let f=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},p=[];function m(e,t){let r=h(),n=f({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===u?void 0:u].filter(e=>!!e)});e.common.issues.push(n)}class g{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return y;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return g.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return y;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let y=Object.freeze({status:"aborted"}),v=e=>({status:"dirty",value:e}),b=e=>({status:"valid",value:e}),_=e=>"aborted"===e.status,S=e=>"dirty"===e.status,w=e=>"valid"===e.status,T=e=>"undefined"!=typeof Promise&&e instanceof Promise;function E(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function C(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(tS||(tS={}));class x{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let I=(e,t)=>{if(w(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new l(e.common.issues);return this._error=t,this._error}}};function k(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,a;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=null!=o?o:r)&&void 0!==a?a:i.defaultError}},description:i}}class R{get description(){return this._def.description}_getType(e){return s(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new g,ctx:{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(T(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},i=this._parseSync({data:e,path:n.path,parent:n});return I(n,i)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return w(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>w(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},n=this._parse({data:e,path:r.path,parent:r});return I(r,await (T(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),s=()=>n.addIssue({code:a.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eN({schema:this,typeName:tE.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eO.create(this,this._def)}nullable(){return eD.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eh.create(this)}promise(){return eA.create(this,this._def)}or(e){return em.create([this,e],this._def)}and(e){return eb.create(this,e,this._def)}transform(e){return new eN({...k(this._def),schema:this,typeName:tE.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new eP({...k(this._def),innerType:this,defaultValue:t,typeName:tE.ZodDefault})}brand(){return new eF({typeName:tE.ZodBranded,type:this,...k(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new eM({...k(this._def),innerType:this,catchValue:t,typeName:tE.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eB.create(this,e)}readonly(){return eU.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let A=/^c[^\s-]{8,}$/i,N=/^[0-9a-z]+$/,O=/^[0-9A-HJKMNP-TV-Z]{26}$/i,D=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,P=/^[a-z0-9_-]{21}$/i,M=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,L=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,j=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,F="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",B=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,V=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,z=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,q=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,W="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",K=RegExp(`^${W}$`);function H(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function G(e){return RegExp(`^${H(e)}$`)}function Z(e){let t=`${W}T${H(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}function Q(e,t){return!!(("v4"===t||!t)&&B.test(e)||("v6"===t||!t)&&V.test(e))}function Y(e,t){if(!M.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)return!1;return!0}catch(e){return!1}}function X(e,t){return!!(("v4"===t||!t)&&U.test(e)||("v6"===t||!t)&&z.test(e))}class J extends R{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==i.string){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.string,received:t.parsedType}),y}let r=new g;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("max"===i.kind)e.data.length>i.value&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("length"===i.kind){let n=e.data.length>i.value,s=e.data.length<i.value;(n||s)&&(t=this._getOrReturnCtx(e,t),n?m(t,{code:a.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&m(t,{code:a.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if("email"===i.kind)j.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"email",code:a.invalid_string,message:i.message}),r.dirty());else if("emoji"===i.kind)n||(n=RegExp(F,"u")),n.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:a.invalid_string,message:i.message}),r.dirty());else if("uuid"===i.kind)D.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:a.invalid_string,message:i.message}),r.dirty());else if("nanoid"===i.kind)P.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"nanoid",code:a.invalid_string,message:i.message}),r.dirty());else if("cuid"===i.kind)A.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:a.invalid_string,message:i.message}),r.dirty());else if("cuid2"===i.kind)N.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:a.invalid_string,message:i.message}),r.dirty());else if("ulid"===i.kind)O.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:a.invalid_string,message:i.message}),r.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(n){m(t=this._getOrReturnCtx(e,t),{validation:"url",code:a.invalid_string,message:i.message}),r.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"regex",code:a.invalid_string,message:i.message}),r.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):"datetime"===i.kind?Z(i).test(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:"datetime",message:i.message}),r.dirty()):"date"===i.kind?K.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:"date",message:i.message}),r.dirty()):"time"===i.kind?G(i).test(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_string,validation:"time",message:i.message}),r.dirty()):"duration"===i.kind?L.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"duration",code:a.invalid_string,message:i.message}),r.dirty()):"ip"===i.kind?Q(e.data,i.version)||(m(t=this._getOrReturnCtx(e,t),{validation:"ip",code:a.invalid_string,message:i.message}),r.dirty()):"jwt"===i.kind?Y(e.data,i.alg)||(m(t=this._getOrReturnCtx(e,t),{validation:"jwt",code:a.invalid_string,message:i.message}),r.dirty()):"cidr"===i.kind?X(e.data,i.version)||(m(t=this._getOrReturnCtx(e,t),{validation:"cidr",code:a.invalid_string,message:i.message}),r.dirty()):"base64"===i.kind?q.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"base64",code:a.invalid_string,message:i.message}),r.dirty()):"base64url"===i.kind?$.test(e.data)||(m(t=this._getOrReturnCtx(e,t),{validation:"base64url",code:a.invalid_string,message:i.message}),r.dirty()):tb.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:a.invalid_string,...tS.errToObj(r)})}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...tS.errToObj(e)})}url(e){return this._addCheck({kind:"url",...tS.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...tS.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...tS.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...tS.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...tS.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...tS.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...tS.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...tS.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...tS.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...tS.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...tS.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...tS.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...tS.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...tS.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...tS.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...tS.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...tS.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...tS.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...tS.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...tS.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...tS.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...tS.errToObj(t)})}nonempty(e){return this.min(1,tS.errToObj(e))}trim(){return new J({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new J({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new J({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ee(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}J.create=e=>{var t;return new J({checks:[],typeName:tE.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...k(e)})};class et extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==i.number){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.number,received:t.parsedType}),y}let r=new g;for(let n of this._def.checks)"int"===n.kind?tb.isInteger(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:a.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==ee(e.data,n.value)&&(m(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:a.not_finite,message:n.message}),r.dirty()):tb.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,tS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tS.toString(t))}setLimit(e,t,r,n){return new et({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:tS.toString(n)}]})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:tS.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:tS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:tS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:tS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:tS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tS.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:tS.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:tS.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:tS.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&tb.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}et.create=e=>new et({checks:[],typeName:tE.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...k(e)});class er extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==i.bigint)return this._getInvalidInput(e);let r=new g;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(m(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):tb.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.bigint,received:t.parsedType}),y}gte(e,t){return this.setLimit("min",e,!0,tS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tS.toString(t))}setLimit(e,t,r,n){return new er({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:tS.toString(n)}]})}_addCheck(e){return new er({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:tS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:tS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:tS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:tS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tS.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}er.create=e=>{var t;return new er({checks:[],typeName:tE.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...k(e)})};class en extends R{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==i.boolean){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.boolean,received:t.parsedType}),y}return b(e.data)}}en.create=e=>new en({typeName:tE.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...k(e)});class ei extends R{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==i.date){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.date,received:t.parsedType}),y}if(isNaN(e.data.getTime()))return m(this._getOrReturnCtx(e),{code:a.invalid_date}),y;let r=new g;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(m(t=this._getOrReturnCtx(e,t),{code:a.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):tb.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:tS.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:tS.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ei.create=e=>new ei({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:tE.ZodDate,...k(e)});class es extends R{_parse(e){if(this._getType(e)!==i.symbol){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.symbol,received:t.parsedType}),y}return b(e.data)}}es.create=e=>new es({typeName:tE.ZodSymbol,...k(e)});class ea extends R{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.undefined,received:t.parsedType}),y}return b(e.data)}}ea.create=e=>new ea({typeName:tE.ZodUndefined,...k(e)});class eo extends R{_parse(e){if(this._getType(e)!==i.null){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.null,received:t.parsedType}),y}return b(e.data)}}eo.create=e=>new eo({typeName:tE.ZodNull,...k(e)});class el extends R{constructor(){super(...arguments),this._any=!0}_parse(e){return b(e.data)}}el.create=e=>new el({typeName:tE.ZodAny,...k(e)});class eu extends R{constructor(){super(...arguments),this._unknown=!0}_parse(e){return b(e.data)}}eu.create=e=>new eu({typeName:tE.ZodUnknown,...k(e)});class ec extends R{_parse(e){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.never,received:t.parsedType}),y}}ec.create=e=>new ec({typeName:tE.ZodNever,...k(e)});class ed extends R{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.void,received:t.parsedType}),y}return b(e.data)}}ed.create=e=>new ed({typeName:tE.ZodVoid,...k(e)});class eh extends R{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==i.array)return m(t,{code:a.invalid_type,expected:i.array,received:t.parsedType}),y;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(m(t,{code:e?a.too_big:a.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(m(t,{code:a.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(m(t,{code:a.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new x(t,e,t.path,r)))).then(e=>g.mergeArray(r,e));let s=[...t.data].map((e,r)=>n.type._parseSync(new x(t,e,t.path,r)));return g.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new eh({...this._def,minLength:{value:e,message:tS.toString(t)}})}max(e,t){return new eh({...this._def,maxLength:{value:e,message:tS.toString(t)}})}length(e,t){return new eh({...this._def,exactLength:{value:e,message:tS.toString(t)}})}nonempty(e){return this.min(1,e)}}function ef(e){if(e instanceof ep){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=eO.create(ef(n))}return new ep({...e._def,shape:()=>t})}return e instanceof eh?new eh({...e._def,type:ef(e.element)}):e instanceof eO?eO.create(ef(e.unwrap())):e instanceof eD?eD.create(ef(e.unwrap())):e instanceof e_?e_.create(e.items.map(e=>ef(e))):e}eh.create=(e,t)=>new eh({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tE.ZodArray,...k(t)});class ep extends R{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=tb.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==i.object){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.object,received:t.parsedType}),y}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof ec&&"strip"===this._def.unknownKeys))for(let e in r.data)s.includes(e)||o.push(e);let l=[];for(let e of s){let t=n[e],i=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new x(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ec){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&(m(r,{code:a.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let n=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new x(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of l){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>g.mergeObjectSync(t,e)):g.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return tS.errToObj,new ep({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,a;let o=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=tS.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new ep({...this._def,unknownKeys:"strip"})}passthrough(){return new ep({...this._def,unknownKeys:"passthrough"})}extend(e){return new ep({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ep({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tE.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ep({...this._def,catchall:e})}pick(e){let t={};return tb.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ep({...this._def,shape:()=>t})}omit(e){let t={};return tb.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ep({...this._def,shape:()=>t})}deepPartial(){return ef(this)}partial(e){let t={};return tb.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new ep({...this._def,shape:()=>t})}required(e){let t={};return tb.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eO;)e=e._def.innerType;t[r]=e}}),new ep({...this._def,shape:()=>t})}keyof(){return eI(tb.objectKeys(this.shape))}}ep.create=(e,t)=>new ep({shape:()=>e,unknownKeys:"strip",catchall:ec.create(),typeName:tE.ZodObject,...k(t)}),ep.strictCreate=(e,t)=>new ep({shape:()=>e,unknownKeys:"strict",catchall:ec.create(),typeName:tE.ZodObject,...k(t)}),ep.lazycreate=(e,t)=>new ep({shape:e,unknownKeys:"strip",catchall:ec.create(),typeName:tE.ZodObject,...k(t)});class em extends R{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new l(e.ctx.common.issues));return m(t,{code:a.invalid_union,unionErrors:r}),y}if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(n);{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new l(e));return m(t,{code:a.invalid_union,unionErrors:i}),y}}get options(){return this._def.options}}em.create=(e,t)=>new em({options:e,typeName:tE.ZodUnion,...k(t)});let eg=e=>{if(e instanceof eC)return eg(e.schema);if(e instanceof eN)return eg(e.innerType());if(e instanceof ex)return[e.value];if(e instanceof ek)return e.options;if(e instanceof eR)return tb.objectValues(e.enum);if(e instanceof eP)return eg(e._def.innerType);if(e instanceof ea)return[void 0];else if(e instanceof eo)return[null];else if(e instanceof eO)return[void 0,...eg(e.unwrap())];else if(e instanceof eD)return[null,...eg(e.unwrap())];else if(e instanceof eF)return eg(e.unwrap());else if(e instanceof eU)return eg(e.unwrap());else if(e instanceof eM)return eg(e._def.innerType);else return[]};class ey extends R{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.object)return m(t,{code:a.invalid_type,expected:i.object,received:t.parsedType}),y;let r=this.discriminator,n=t.data[r],s=this.optionsMap.get(n);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(m(t,{code:a.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=eg(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new ey({typeName:tE.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...k(r)})}}function ev(e,t){let r=s(e),n=s(t);if(e===t)return{valid:!0,data:e};if(r===i.object&&n===i.object){let r=tb.objectKeys(t),n=tb.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=ev(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===i.array&&n===i.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=ev(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===i.date&&n===i.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class eb extends R{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(_(e)||_(n))return y;let i=ev(e.value,n.value);return i.valid?((S(e)||S(n))&&t.dirty(),{status:t.value,value:i.data}):(m(r,{code:a.invalid_intersection_types}),y)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eb.create=(e,t,r)=>new eb({left:e,right:t,typeName:tE.ZodIntersection,...k(r)});class e_ extends R{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.array)return m(r,{code:a.invalid_type,expected:i.array,received:r.parsedType}),y;if(r.data.length<this._def.items.length)return m(r,{code:a.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),y;!this._def.rest&&r.data.length>this._def.items.length&&(m(r,{code:a.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new x(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>g.mergeArray(t,e)):g.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new e_({...this._def,rest:e})}}e_.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new e_({items:e,typeName:tE.ZodTuple,rest:null,...k(t)})};class eS extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.object)return m(r,{code:a.invalid_type,expected:i.object,received:r.parsedType}),y;let n=[],s=this._def.keyType,o=this._def.valueType;for(let e in r.data)n.push({key:s._parse(new x(r,e,r.path,e)),value:o._parse(new x(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?g.mergeObjectAsync(t,n):g.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eS(t instanceof R?{keyType:e,valueType:t,typeName:tE.ZodRecord,...k(r)}:{keyType:J.create(),valueType:e,typeName:tE.ZodRecord,...k(t)})}}class ew extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.map)return m(r,{code:a.invalid_type,expected:i.map,received:r.parsedType}),y;let n=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new x(r,e,r.path,[i,"key"])),value:s._parse(new x(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return y;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of o){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return y;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ew.create=(e,t,r)=>new ew({valueType:t,keyType:e,typeName:tE.ZodMap,...k(r)});class eT extends R{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.set)return m(r,{code:a.invalid_type,expected:i.set,received:r.parsedType}),y;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(m(r,{code:a.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(m(r,{code:a.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let s=this._def.valueType;function o(e){let r=new Set;for(let n of e){if("aborted"===n.status)return y;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let l=[...r.data.values()].map((e,t)=>s._parse(new x(r,e,r.path,t)));return r.common.async?Promise.all(l).then(e=>o(e)):o(l)}min(e,t){return new eT({...this._def,minSize:{value:e,message:tS.toString(t)}})}max(e,t){return new eT({...this._def,maxSize:{value:e,message:tS.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eT.create=(e,t)=>new eT({valueType:e,minSize:null,maxSize:null,typeName:tE.ZodSet,...k(t)});class eE extends R{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.function)return m(t,{code:a.invalid_type,expected:i.function,received:t.parsedType}),y;function r(e,r){return f({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,h(),u].filter(e=>!!e),issueData:{code:a.invalid_arguments,argumentsError:r}})}function n(e,r){return f({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,h(),u].filter(e=>!!e),issueData:{code:a.invalid_return_type,returnTypeError:r}})}let s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof eA){let e=this;return b(async function(...t){let i=new l([]),a=await e._def.args.parseAsync(t,s).catch(e=>{throw i.addIssue(r(t,e)),i}),u=await Reflect.apply(o,this,a);return await e._def.returns._def.type.parseAsync(u,s).catch(e=>{throw i.addIssue(n(u,e)),i})})}{let e=this;return b(function(...t){let i=e._def.args.safeParse(t,s);if(!i.success)throw new l([r(t,i.error)]);let a=Reflect.apply(o,this,i.data),u=e._def.returns.safeParse(a,s);if(!u.success)throw new l([n(a,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eE({...this._def,args:e_.create(e).rest(eu.create())})}returns(e){return new eE({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eE({args:e||e_.create([]).rest(eu.create()),returns:t||eu.create(),typeName:tE.ZodFunction,...k(r)})}}class eC extends R{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eC.create=(e,t)=>new eC({getter:e,typeName:tE.ZodLazy,...k(t)});class ex extends R{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return m(t,{received:t.data,code:a.invalid_literal,expected:this._def.value}),y}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eI(e,t){return new ek({values:e,typeName:tE.ZodEnum,...k(t)})}ex.create=(e,t)=>new ex({value:e,typeName:tE.ZodLiteral,...k(t)});class ek extends R{constructor(){super(...arguments),tw.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{expected:tb.joinValues(r),received:t.parsedType,code:a.invalid_type}),y}if(E(this,tw,"f")||C(this,tw,new Set(this._def.values),"f"),!E(this,tw,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{received:t.data,code:a.invalid_enum_value,options:r}),y}return b(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ek.create(e,{...this._def,...t})}exclude(e,t=this._def){return ek.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}tw=new WeakMap,ek.create=eI;class eR extends R{constructor(){super(...arguments),tT.set(this,void 0)}_parse(e){let t=tb.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==i.string&&r.parsedType!==i.number){let e=tb.objectValues(t);return m(r,{expected:tb.joinValues(e),received:r.parsedType,code:a.invalid_type}),y}if(E(this,tT,"f")||C(this,tT,new Set(tb.getValidEnumValues(this._def.values)),"f"),!E(this,tT,"f").has(e.data)){let e=tb.objectValues(t);return m(r,{received:r.data,code:a.invalid_enum_value,options:e}),y}return b(e.data)}get enum(){return this._def.values}}tT=new WeakMap,eR.create=(e,t)=>new eR({values:e,typeName:tE.ZodNativeEnum,...k(t)});class eA extends R{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==i.promise&&!1===t.common.async?(m(t,{code:a.invalid_type,expected:i.promise,received:t.parsedType}),y):b((t.parsedType===i.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eA.create=(e,t)=>new eA({type:e,typeName:tE.ZodPromise,...k(t)});class eN extends R{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tE.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{m(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return y;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?y:"dirty"===n.status||"dirty"===t.value?v(n.value):n});{if("aborted"===t.value)return y;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?y:"dirty"===n.status||"dirty"===t.value?v(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?y:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?y:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>w(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!w(e))return e;let s=n.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}tb.assertNever(n)}}eN.create=(e,t,r)=>new eN({schema:e,typeName:tE.ZodEffects,effect:t,...k(r)}),eN.createWithPreprocess=(e,t,r)=>new eN({schema:t,effect:{type:"preprocess",transform:e},typeName:tE.ZodEffects,...k(r)});class eO extends R{_parse(e){return this._getType(e)===i.undefined?b(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eO.create=(e,t)=>new eO({innerType:e,typeName:tE.ZodOptional,...k(t)});class eD extends R{_parse(e){return this._getType(e)===i.null?b(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eD.create=(e,t)=>new eD({innerType:e,typeName:tE.ZodNullable,...k(t)});class eP extends R{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===i.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eP.create=(e,t)=>new eP({innerType:e,typeName:tE.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...k(t)});class eM extends R{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return T(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new l(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new l(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eM.create=(e,t)=>new eM({innerType:e,typeName:tE.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...k(t)});class eL extends R{_parse(e){if(this._getType(e)!==i.nan){let t=this._getOrReturnCtx(e);return m(t,{code:a.invalid_type,expected:i.nan,received:t.parsedType}),y}return{status:"valid",value:e.data}}}eL.create=e=>new eL({typeName:tE.ZodNaN,...k(e)});let ej=Symbol("zod_brand");class eF extends R{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eB extends R{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?y:"dirty"===e.status?(t.dirty(),v(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?y:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eB({in:e,out:t,typeName:tE.ZodPipeline})}}class eU extends R{_parse(e){let t=this._def.innerType._parse(e),r=e=>(w(e)&&(e.value=Object.freeze(e.value)),e);return T(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eV(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function ez(e,t={},r){return e?el.create().superRefine((n,i)=>{var s,a;let o=e(n);if(o instanceof Promise)return o.then(e=>{var s,a;if(!e){let e=eV(t,n),o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=eV(t,n),o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}}):el.create()}eU.create=(e,t)=>new eU({innerType:e,typeName:tE.ZodReadonly,...k(t)});let eq={object:ep.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(tE||(tE={}));let e$=(e,t={message:`Input not instance of ${e.name}`})=>ez(t=>t instanceof e,t),eW=J.create,eK=et.create,eH=eL.create,eG=er.create,eZ=en.create,eQ=ei.create,eY=es.create,eX=ea.create,eJ=eo.create,e0=el.create,e1=eu.create,e2=ec.create,e3=ed.create,e4=eh.create,e6=ep.create,e5=ep.strictCreate,e8=em.create,e9=ey.create,e7=eb.create,te=e_.create,tt=eS.create,tr=ew.create,tn=eT.create,ti=eE.create,ts=eC.create,ta=ex.create,to=ek.create,tl=eR.create,tu=eA.create,tc=eN.create,td=eO.create,th=eD.create,tf=eN.createWithPreprocess,tp=eB.create,tm=()=>eK().optional(),tg=()=>eZ().optional(),ty={string:e=>J.create({...e,coerce:!0}),number:e=>et.create({...e,coerce:!0}),boolean:e=>en.create({...e,coerce:!0}),bigint:e=>er.create({...e,coerce:!0}),date:e=>ei.create({...e,coerce:!0})},tv=y;var tb,t_,tS,tw,tT,tE,tC=Object.freeze({__proto__:null,defaultErrorMap:u,setErrorMap:d,getErrorMap:h,makeIssue:f,EMPTY_PATH:p,addIssueToContext:m,ParseStatus:g,INVALID:y,DIRTY:v,OK:b,isAborted:_,isDirty:S,isValid:w,isAsync:T,get util(){return tb},get objectUtil(){return t_},ZodParsedType:i,getParsedType:s,ZodType:R,datetimeRegex:Z,ZodString:J,ZodNumber:et,ZodBigInt:er,ZodBoolean:en,ZodDate:ei,ZodSymbol:es,ZodUndefined:ea,ZodNull:eo,ZodAny:el,ZodUnknown:eu,ZodNever:ec,ZodVoid:ed,ZodArray:eh,ZodObject:ep,ZodUnion:em,ZodDiscriminatedUnion:ey,ZodIntersection:eb,ZodTuple:e_,ZodRecord:eS,ZodMap:ew,ZodSet:eT,ZodFunction:eE,ZodLazy:eC,ZodLiteral:ex,ZodEnum:ek,ZodNativeEnum:eR,ZodPromise:eA,ZodEffects:eN,ZodTransformer:eN,ZodOptional:eO,ZodNullable:eD,ZodDefault:eP,ZodCatch:eM,ZodNaN:eL,BRAND:ej,ZodBranded:eF,ZodPipeline:eB,ZodReadonly:eU,custom:ez,Schema:R,ZodSchema:R,late:eq,get ZodFirstPartyTypeKind(){return tE},coerce:ty,any:e0,array:e4,bigint:eG,boolean:eZ,date:eQ,discriminatedUnion:e9,effect:tc,enum:to,function:ti,instanceof:e$,intersection:e7,lazy:ts,literal:ta,map:tr,nan:eH,nativeEnum:tl,never:e2,null:eJ,nullable:th,number:eK,object:e6,oboolean:tg,onumber:tm,optional:td,ostring:()=>eW().optional(),pipeline:tp,preprocess:tf,promise:tu,record:tt,set:tn,strictObject:e5,string:eW,symbol:eY,transformer:tc,tuple:te,undefined:eX,union:e8,unknown:e1,void:e3,NEVER:tv,ZodIssueCode:a,quotelessJson:o,ZodError:l});let tx=tC.object({ideaText:tC.string().min(20,{message:"Your idea should be at least 20 characters long."}).max(500,{message:"Keep your idea concise (max 500 characters)."})}),tI=tC.object({feedbackText:tC.string().min(5,{message:"Feedback should be at least 5 characters long."}).max(500,{message:"Keep your feedback concise (max 500 characters)."}),ideaId:tC.string()})},1223:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(1135),i=r(1009);function s(...e){return(0,i.m6)((0,n.W)(e))}},8201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];function n(e,t){r.push({getServiceDefinition:e,getHandlers:t})}function i(e){for(let{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}t.registerAdminService=n,t.addAdminServicesToServer=i},2480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,n=1.6,i=12e4,s=.2;function a(e,t){return Math.random()*(t-e)+e}class o{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=n,this.maxDelay=i,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+a(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=o},5038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let n=r(9932);function i(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=i(e)?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>{if(e){n(e);return}if(!t){n(Error("Headers not set by metadata plugin"));return}r(t)})})).then(e=>{let t=new n.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class a extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new n.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new a(this.creds.concat([e]))}_equals(e){return this===e||e instanceof a&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new a([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},6351:(e,t)=>{"use strict";function r(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length}Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=r;class n{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=n},2837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;function n(){return r++}t.getNextCallNumber=n},7693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let n=r(7702),i=r(6162),s=r(4428);function a(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=Error(r),i=`${n.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:i})}t.callErrorFromStatus=a;class o extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=o;class l extends i.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=l;class u extends i.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(i,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=u;class c extends i.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(i,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=c},1061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let n=r(2452),i=r(5038),s=r(3981);function a(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class o{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var o;if(a(e,"Root certificate"),a(t,"Private key"),a(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new u((0,n.createSecureContext)({ca:null!==(o=null!=e?e:(0,s.getDefaultRootsData)())&&void 0!==o?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=i?i:{})}static createFromSecureContext(e,t){return new u(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=o;class l extends o{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class u extends o{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new c(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class c extends o{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new c(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof c&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},2869:(e,t)=>{"use strict";function r(e,t){let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},t.channelOptionsEqual=r},5910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let n=r(1061),i=r(2044);class s{constructor(e,t,r){if("string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.internalChannel=new i.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,i)}}t.ChannelImplementation=s},6188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let n=r(8216),i=r(5394),s=r(4428),a=r(6379),o=r(8201),l=r(8665);function u(e){return{channel_id:e.id,name:e.name}}function c(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{server_id:e.id}}function h(e){return{socket_id:e.id,name:e.name}}let f=32;class p{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*f&&(this.events=this.events.slice(f)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:O(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:O(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?c(e.childSubchannel):null}))}}}t.ChannelzTrace=p;class m{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!==(t=this.channelChildren.get(e.id))&&void 0!==t?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!==(r=this.subchannelChildren.get(e.id))&&void 0!==r?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!==(n=this.socketChildren.get(e.id))&&void 0!==n?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=m;class g{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=g;let y=1;function v(){return y++}let b=[],_=[],S=[],w=[];function T(e,t,r){let n=v(),i={id:n,name:e,kind:"channel"};return r&&(b[n]={ref:i,getInfo:t}),i}function E(e,t,r){let n=v(),i={id:n,name:e,kind:"subchannel"};return r&&(_[n]={ref:i,getInfo:t}),i}function C(e,t){let r=v(),n={id:r,kind:"server"};return t&&(S[r]={ref:n,getInfo:e}),n}function x(e,t,r){let n=v(),i={id:n,name:e,kind:"socket"};return r&&(w[n]={ref:i,getInfo:t}),i}function I(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete _[e.id];return;case"server":delete S[e.id];return;case"socket":delete w[e.id];return}}function k(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function R(e){return""===e?[]:[].concat(...e.split(":").map(e=>k(e)))}function A(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!(0,n.isIPv6)(e))return null;{let t,r;let n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));let i=Buffer.from(R(t)),s=Buffer.from(R(r)),a=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,a,s])}}function N(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function O(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function D(e){let t=e.getInfo();return{ref:u(e.ref),data:{target:t.target,state:N(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>u(e)),subchannel_ref:t.children.subchannels.map(e=>c(e))}}function P(e,t){let r=Number.parseInt(e.request.channel_id),n=b[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});return}t(null,{channel:D(n)})}function M(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_channel_id);for(;i<b.length;i++){let e=b[i];if(void 0!==e&&(n.push(D(e)),n.length>=r))break}t(null,{channel:n,end:i>=S.length})}function L(e){let t=e.getInfo();return{ref:d(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>h(e))}}function j(e,t){let r=Number.parseInt(e.request.server_id),n=S[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}t(null,{server:L(n)})}function F(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_server_id);for(;i<S.length;i++){let e=S[i];if(void 0!==e&&(n.push(L(e)),n.length>=r))break}t(null,{server:n,end:i>=S.length})}function B(e,t){let r=Number.parseInt(e.request.subchannel_id),n=_[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}let i=n.getInfo();t(null,{subchannel:{ref:c(n.ref),data:{target:i.target,state:N(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:O(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(e=>h(e))}})}function U(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=A(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function V(e,t){var r,n,i,a,o;let l=Number.parseInt(e.request.socket_id),u=w[l];if(void 0===u){t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});return}let c=u.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=c.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=c.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(i=c.security.localCertificate)&&void 0!==i?i:void 0,remote_certificate:null!==(a=c.security.remoteCertificate)&&void 0!==a?a:void 0}}:null;t(null,{socket:{ref:h(u.ref),local:c.localAddress?U(c.localAddress):null,remote:c.remoteAddress?U(c.remoteAddress):null,remote_name:null!==(o=c.remoteName)&&void 0!==o?o:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:O(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:O(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:O(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:O(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}}})}function z(e,t){let r=Number.parseInt(e.request.server_id),n=S[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}let i=Number.parseInt(e.request.start_socket_id),a=Number.parseInt(e.request.max_results),o=n.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],u=0;for(;u<o.length&&(!(o[u].id>=i)||(l.push(h(o[u])),!(l.length>=a)));u++);t(null,{socket_ref:l,end:u>=o.length})}function q(){return{GetChannel:P,GetTopChannels:M,GetServer:j,GetServers:F,GetSubchannel:B,GetSocket:V,GetServerSockets:z}}t.registerChannelzChannel=T,t.registerChannelzSubchannel=E,t.registerChannelzServer=C,t.registerChannelzSocket=x,t.unregisterChannelzRef=I,t.getChannelzHandlers=q;let $=null;function W(){if($)return $;let e=(0,r(5314).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return $=(0,l.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service}function K(){(0,o.registerAdminService)(W,q)}t.getChannelzServiceDefinition=W,t.setup=K},9544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let n=r(9932),i=r(6351),s=r(4428),a=r(986);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class l{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=l;class u{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=u;let c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},d={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class h{constructor(e,t){var r,n,i,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!==(r=t.start)&&void 0!==r?r:d.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:d.sendMessage,halfClose:null!==(i=t.halfClose)&&void 0!==i?i:d.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:d.cancel}:this.requester=d}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,a,o,l;let u={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(a=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==a?a:e=>{},onReceiveStatus:null!==(l=null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o?void 0:o.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,(e,t)=>{var r,n,s;let a;if(this.processingMetadata=!1,(0,i.isInterceptingListener)(t))a=t;else{let e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:c.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:c.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:c.onReceiveStatus};a=new i.InterceptingListenerImpl(e,u)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function f(e,t,r){var n,i;let s=null!==(n=r.deadline)&&void 0!==n?n:1/0,a=r.host,o=null!==(i=r.parent)&&void 0!==i?i:null,l=r.propagate_flags,u=r.credentials,c=e.createCall(t,s,a,o,l);return u&&c.setCredentials(u),c}t.InterceptingCall=h;class p{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new n.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null===(i=null==t?void 0:t.onReceiveMessage)||void 0===i||i.call(t,o)},onReceiveStatus:e=>{var n,i;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(i=null==t?void 0:t.onReceiveStatus)||void 0===i||i.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class m extends p{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=!1,s={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;i=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;i||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class g extends p{}function y(e,t,r){let n=f(e,r.path,t);return r.responseStream?new g(n,r):new m(n,r)}function v(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];i=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return i.reduceRight((e,t)=>r=>t(r,e),e=>y(n,e,t))(s)}t.getInterceptingCall=v},7163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let n=r(7693),i=r(5910),s=r(5394),a=r(4428),o=r(9932),l=r(9544),u=Symbol(),c=Symbol(),d=Symbol(),h=Symbol();function f(e){return"function"==typeof e}function p(e){return e.stack.split("\n").slice(1).join("\n")}class m{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[c]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[d]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[c].length>0&&this[d].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[u]=r.channelOverride;else if(r.channelFactoryOverride){let n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[u]=n(e,t,r)}else this[u]=new i.ChannelImplementation(e,t,r)}close(){this[u].close()}getChannel(){return this[u]}waitForReady(e,t){let r=n=>{let i;if(n){t(Error("Failed to connect before the deadline"));return}try{i=this[u].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(i===s.ConnectivityState.READY)t();else try{this[u].watchConnectivityState(i,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(f(e))return{metadata:new o.Metadata,options:{},callback:e};if(f(t))return e instanceof o.Metadata?{metadata:e,options:{},callback:t}:{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&f(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,f){var m,g;let y=this.checkOptionalUnaryResponseArguments(s,o,f),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:i,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[u],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(b=this[h](b));let _=b.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},w=(0,l.getInterceptingCall)(S,b.methodDefinition,b.callOptions,b.channel);_.call=w;let T=null,E=!1,C=Error();return w.start(b.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==T&&w.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),T=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===a.Status.OK){if(null===T){let t=p(C);b.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,T)}else{let t=p(C);b.callback((0,n.callErrorFromStatus)(e,t))}C=null,_.emit("status",e)}}}),w.sendMessage(i),w.halfClose(),_}makeClientStreamRequest(e,t,r,i,s,o){var f,m;let g=this.checkOptionalUnaryResponseArguments(i,s,o),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:g.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[u],methodDefinition:y,callOptions:g.options,callback:g.callback};this[h]&&(v=this[h](v));let b=v.call,_={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(f=v.callOptions.interceptors)&&void 0!==f?f:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},S=(0,l.getInterceptingCall)(_,v.methodDefinition,v.callOptions,v.channel);b.call=S;let w=null,T=!1,E=Error();return S.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==w&&S.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),w=e},onReceiveStatus(e){if(!T){if(T=!0,e.code===a.Status.OK){if(null===w){let t=p(E);v.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,w)}else{let t=p(E);v.callback((0,n.callErrorFromStatus)(e,t))}E=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,n;return e instanceof o.Metadata?(r=e,n=t||{}):(n=e||{},r=new o.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,o){var f,m;let g=this.checkMetadataAndOptions(s,o),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:g.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[u],methodDefinition:y,callOptions:g.options};this[h]&&(v=this[h](v));let b=v.call,_={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(f=v.callOptions.interceptors)&&void 0!==f?f:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},S=(0,l.getInterceptingCall)(_,v.methodDefinition,v.callOptions,v.channel);b.call=S;let w=!1,T=Error();return S.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!w){if(w=!0,b.push(null),e.code!==a.Status.OK){let t=p(T);b.emit("error",(0,n.callErrorFromStatus)(e,t))}T=null,b.emit("status",e)}}}),S.sendMessage(i),S.halfClose(),b}makeBidiStreamRequest(e,t,r,i,s){var o,f;let m=this.checkMetadataAndOptions(i,s),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:m.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[u],methodDefinition:g,callOptions:m.options};this[h]&&(y=this[h](y));let v=y.call,b={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(o=y.callOptions.interceptors)&&void 0!==o?o:[],callInterceptorProviders:null!==(f=y.callOptions.interceptor_providers)&&void 0!==f?f:[]},_=(0,l.getInterceptingCall)(b,y.methodDefinition,y.callOptions,y.channel);v.call=_;let S=!1,w=Error();return _.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!S){if(S=!0,v.push(null),e.code!==a.Status.OK){let t=p(w);v.emit("error",(0,n.callErrorFromStatus)(e,t))}w=null,v.emit("status",e)}}}),v}}t.Client=m},7185:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},1399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let n=r(1568),i=r(7185),s=r(4428),a=r(280),o=r(5888),l=e=>"number"==typeof e&&"string"==typeof i.CompressionAlgorithms[e];class u{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends u{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createInflate();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class h extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createGunzip();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class f extends u{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function p(e,t){switch(e){case"identity":return new c;case"deflate":return new d(t);case"gzip":return new h(t);default:return new f(e)}}class m extends a.BaseFilter{constructor(e,t){var r,n;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";let a=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!==(r=e["grpc.max_receive_message_length"])&&void 0!==r?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,void 0!==a){if(l(a)){let e=i.CompressionAlgorithms[a],r=null===(n=t.serverSupportedEncodingHeader)||void 0===n?void 0:n.split(",");(!r||r.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm,-1))}else o.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${a}`)}}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=p(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r;let n=await e;return r=!(this.sendCompression instanceof c)&&((null!==(t=n.flags)&&void 0!==t?t:0)&2)==0,{message:await this.sendCompression.writeMessage(n.message,r),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=m;class g{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new m(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=g},5394:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},4428:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(i||(t.Propagate=i={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},9131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;let n=r(4428),i=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];function s(e,t){return i.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}t.restrictControlPlaneStatusCode=s},5563:(e,t)=>{"use strict";function r(...e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=r;let n=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function i(e){let t=new Date().getTime();e instanceof Date&&(e=e.getTime());let r=Math.max(e-t,0);for(let[e,t]of n){let n=r/t;if(n<1e8)return String(Math.ceil(n))+e}throw Error("Deadline is too far in the future")}t.getDeadlineTimeoutString=i;let s=0x7fffffff;function a(e){let t=(e instanceof Date?e.getTime():e)-new Date().getTime();return t<0?0:t>s?1/0:t}function o(e){if(e instanceof Date)return e.toISOString();{let t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}t.getRelativeTimeout=a,t.deadlineToString=o},4700:(e,t)=>{"use strict";function r(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}}function n(e){return 1e3*e.seconds+e.nanos/1e6|0}function i(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=r,t.durationToMs=n,t.isDuration=i},986:(e,t)=>{"use strict";function r(e){return e instanceof Error?e.message:String(e)}function n(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=r,t.getErrorCode=n},518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(5888);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var i=r(4811);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return i.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return i.createResolver}});var s=r(6737);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var a=r(4700);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}});var o=r(2480);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=r(7960);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var u=r(6379);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}});var c=r(1308);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return c.ChildLoadBalancerHandler}});var d=r(5322);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(280);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var f=r(977);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return f.FilterStackFactory}});var p=r(8201);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return p.registerAdminService}});var m=r(9863);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return m.BaseSubchannelWrapper}});var g=r(1390);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return g.OutlierDetectionLoadBalancingConfig}})},977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=n},280:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=r},5247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let n=r(5888),i=r(4428),s=r(4811),a=r(2615),o=r(2452),l=r(5888),u=r(6379),c=r(6737),d=r(7360),h=r(2728),f="proxy";function p(e){l.trace(i.LogVerbosity.DEBUG,f,e)}function m(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(i.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(i.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(i.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let a=e.hostname,o=e.port;""===o&&(o="80");let l={address:`${a}:${o}`};return s&&(l.creds=s),p("Proxy server "+l.address+" set by environment variable "+r),l}function g(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(p("No proxy server list set by environment variable "+t),e.split(",")):[]}function y(e,t){var r;let n={target:e,extraOptions:{}};if((null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1)===0||"unix"===e.scheme)return n;let i=m();if(!i.address)return n;let s=(0,c.splitHostPort)(e.path);if(!s)return n;let a=s.host;for(let t of g())if(t===a)return p("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),n;let o={"grpc.http_connect_target":(0,c.uriToString)(e)};return i.creds&&(o["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:o}}function v(e,t,r){var l;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let d=t["grpc.http_connect_target"],f=(0,c.parseUri)(d);if(null===f)return Promise.resolve({});let m=(0,c.splitHostPort)(f.path);if(null===m)return Promise.resolve({});let g=`${m.host}:${null!==(l=m.port)&&void 0!==l?l:h.DEFAULT_PORT}`,y={method:"CONNECT",path:g},v={Host:g};(0,u.isTcpSubchannelAddress)(e)?(y.host=e.host,y.port=e.port):y.socketPath=e.path,"grpc.http_connect_creds"in t&&(v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),y.headers=v;let b=(0,u.subchannelAddressToString)(e);return p("Using proxy "+b+" to connect to "+y.path),new Promise((e,t)=>{let l=a.request(y);l.once("connect",(a,u,d)=>{var h;if(l.removeAllListeners(),u.removeAllListeners(),200===a.statusCode){if(p("Successfully connected to "+y.path+" through proxy "+b),"secureContext"in r){let n=(0,s.getDefaultAuthority)(f),i=(0,c.splitHostPort)(n),a=null!==(h=null==i?void 0:i.host)&&void 0!==h?h:n,l=o.connect(Object.assign({host:a,servername:a,socket:u},r),()=>{p("Successfully established a TLS connection to "+y.path+" through proxy "+b),e({socket:l,realTarget:f})});l.on("error",e=>{p("Failed to establish a TLS connection to "+y.path+" through proxy "+b+" with error "+e.message),t()})}else p("Successfully established a plaintext connection to "+y.path+" through proxy "+b),e({socket:u,realTarget:f})}else(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to "+y.path+" through proxy "+b+" with status "+a.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to proxy "+b+" with error "+e.message),t()}),l.end()})}t.mapProxyName=y,t.getProxiedConnection=v},3429:(e,t,r)=>{"use strict";g={value:!0},g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=t.Rz=g=g=g=g=g=g=t.SF=t.K9=void 0;let n=r(5038);g={enumerable:!0,get:function(){return n.CallCredentials}};let i=r(5910);g={enumerable:!0,get:function(){return i.ChannelImplementation}};let s=r(7185);g={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let a=r(5394);g={enumerable:!0,get:function(){return a.ConnectivityState}};let o=r(1061);g={enumerable:!0,get:function(){return o.ChannelCredentials}};let l=r(7163);g={enumerable:!0,get:function(){return l.Client}};let u=r(4428);g={enumerable:!0,get:function(){return u.LogVerbosity}},g={enumerable:!0,get:function(){return u.Status}},g={enumerable:!0,get:function(){return u.Propagate}};let c=r(5888),d=r(8665);Object.defineProperty(t,"Rz",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),g={enumerable:!0,get:function(){return d.makeClientConstructor}},g={enumerable:!0,get:function(){return d.makeClientConstructor}};let h=r(9932);Object.defineProperty(t,"SF",{enumerable:!0,get:function(){return h.Metadata}});let f=r(5445);g={enumerable:!0,get:function(){return f.Server}};let p=r(6970);g={enumerable:!0,get:function(){return p.ServerCredentials}};let m=r(9364);g={enumerable:!0,get:function(){return m.StatusBuilder}},t.K9={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},g=e=>e.close(),g=(e,t,r)=>e.waitForReady(t,r),g=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=e=>{c.setLogger(e)},g=e=>{c.setLoggerVerbosity(e)},g=e=>l.Client.prototype.getChannel.call(e);var g,y=r(9544);g={enumerable:!0,get:function(){return y.ListenerBuilder}},g={enumerable:!0,get:function(){return y.RequesterBuilder}},g={enumerable:!0,get:function(){return y.InterceptingCall}},g={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(6188);g={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},g={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(8201);g={enumerable:!0,get:function(){return b.addAdminServicesToServer}},g=r(518);let _=r(2728),S=r(2246),w=r(7715),T=r(5387),E=r(9552),C=r(1390),x=r(6188);(()=>{_.setup(),S.setup(),w.setup(),T.setup(),E.setup(),C.setup(),x.setup()})()},2044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;let n=r(1061),i=r(6160),s=r(8326),a=r(5322),o=r(4428),l=r(977),u=r(1399),c=r(4811),d=r(5888),h=r(5247),f=r(6737),p=r(5394),m=r(6188),g=r(9881),y=r(5563),v=r(30),b=r(2837),_=r(9131),S=r(7972),w=r(9863),T=0x7fffffff,E=1e3,C=18e5,x=new Map,I=0x1000000,k=1048576;class R extends w.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,i)=>{t.throttleKeepalive(i)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class A{constructor(e,t,r){var g,y,v,b,w,A,N,O;if(this.credentials=t,this.options=r,this.connectivityState=p.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new m.ChannelzCallTracker,this.childrenTracker=new m.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let D=(0,f.parseUri)(e);if(null===D)throw Error(`Could not parse target name "${e}"`);let P=(0,c.mapUriDefaultScheme)(D);if(null===P)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},T),null===(y=(g=this.callRefTimer).unref)||void 0===y||y.call(g),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new m.ChannelzTrace,this.channelzRef=(0,m.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,c.getDefaultAuthority)(P);let M=(0,h.mapProxyName)(P,r);this.target=M.target,this.options=Object.assign({},this.options,M.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)((null!==(v=r["grpc.use_local_subchannel_pool"])&&void 0!==v?v:0)===0),this.retryBufferTracker=new S.MessageBufferTracker(null!==(b=r["grpc.retry_buffer_size"])&&void 0!==b?b:I,null!==(w=r["grpc.per_rpc_retry_buffer_size"])&&void 0!==w?w:k),this.keepaliveTime=null!==(A=r["grpc.keepalive_time_ms"])&&void 0!==A?A:-1,this.idleTimeoutMs=Math.max(null!==(N=r["grpc.client_idle_timeout_ms"])&&void 0!==N?N:C,E);let L={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());let n=new R(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let e of(this.pickQueue=[],r.length>0&&this.callRefTimerUnref(),r))e.doPick();this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new i.ResolvingLoadBalancer(this.target,L,r,(e,t)=>{e.retryThrottling?x.set(this.getTarget(),new S.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,x.get(this.getTarget()))):x.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let t of(this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref(),e))t.getConfig()})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,_.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let r of(this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref(),t))r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new u.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let j=Error();(0,d.trace)(o.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(O=j.stack)||void 0===O?void 0:O.substring(j.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,d.trace)(null!=t?t:o.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(t=(e=this.callRefTimer).unref)||void 0===t||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of((0,d.trace)(o.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+p.ConnectivityState[this.connectivityState]+" -> "+p.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+p.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==p.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime)for(let t of(this.keepaliveTime=e,this.wrappedSubchannels))t.throttleKeepalive(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let e=new Date().valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null===(r=(t=this.idleTimer).unref)||void 0===r||r.call(t)}maybeStartIdleTimer(){this.connectivityState===p.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new g.LoadBalancingCall(this,e,t,r,n,i,s)}createRetryingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new S.RetryingCall(this,e,t,r,n,i,s,this.retryBufferTracker,x.get(this.getTarget()))}createInnerCall(e,t,r,n,i){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,i):this.createRetryingCall(e,t,r,n,i)}createResolvingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));let a={deadline:t,flags:null!=i?i:o.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},l=new v.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.onCallStart(),l.addStatusWatcher(e=>{this.onCallEnd(e)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,m.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let n=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s){process.nextTick(r,Error("Deadline passed without connectivity state change"));return}n=setTimeout(()=>{this.removeConnectivityStateWatcher(i),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,i)}}t.InternalChannel=A},1308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let n=r(7960),i=r(5394),s="child_load_balancer_helper";class a{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=a},1390:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let i=r(5394),s=r(4428),a=r(4700),o=r(518),l=r(7960),u=r(1308),c=r(5322),d=r(6379),h=r(9863),f=r(5888),p="outlier_detection";function m(e){f.trace(s.LogVerbosity.DEBUG,p,e)}let g="outlier_detection",y=(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true")==="true",v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function _(e,t,r,n){if(t in e&&typeof e[t]!==r){let i=n?`${n}.${t}`:t;throw Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function S(e,t,r){let n=r?`${r}.${t}`:t;if(t in e){if(!(0,a.isDuration)(e[t]))throw Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=0x3b9ac9ff))throw Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function w(e,t,r){let n=r?`${r}.${t}`:t;if(_(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class T{constructor(e,t,r,n,i,s,a){if(this.childPolicy=a,a.length>0&&"pick_first"===a[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=i?Object.assign(Object.assign({},v),i):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new T(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(S(e,"interval"),S(e,"base_ejection_time"),S(e,"max_ejection_time"),w(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");_(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),w(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),_(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),_(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");w(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),w(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),_(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),_(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new T(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(l.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=T;class E extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r,n)})}getConnectivityState(){return this.ejected?i.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function C(){return{success:0,failure:0}}class x{constructor(){this.activeBucket=C(),this.inactiveBucket=C()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=C()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class I{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==c.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(n=t.onCallEnded)||void 0===n||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}}}}class k{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new u.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let n=e.createSubchannel(t,r),i=this.addressMap.get((0,d.subchannelAddressToString)(t)),s=new E(n,i);return(null==i?void 0:i.currentEjectionTimestamp)!==null&&s.eject(),null==i||i.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===i.ConnectivityState.READY?e.updateState(t,new I(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;m("Running success rate check");let r=t.request_volume,n=0,i=[];for(let[e,t]of this.addressMap){let s=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();m("Stats for "+e+": successes="+s+" failures="+a+" targetRequestVolume="+r),s+a>=r&&(n+=1,i.push(s/(s+a)))}if(m("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]"),n<t.minimum_hosts)return;let s=i.reduce((e,t)=>e+t)/i.length,a=0;for(let e of i){let t=e-s;a+=t*t}let o=Math.sqrt(a/i.length),l=s-o*(t.stdev_factor/1e3);for(let[n,i]of(m("stdev="+o+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=i.counter.getLastSuccesses(),a=i.counter.getLastFailures();if(s+a<r)continue;let o=s/(s+a);if(m("Checking candidate "+n+" successRate="+o),o<l){let r=100*Math.random();m("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(m("Ejecting candidate "+n),this.eject(i,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;m("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let i=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if(m("Candidate successes="+i+" failures="+s),!(i+s<t.request_volume)&&100*s/(s+i)>t.threshold){let i=100*Math.random();m("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(m("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){let e=new Date;if(m("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),i=new Date(r.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,n))),i<new Date&&(m("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof T))return;let n=new Set;for(let t of e)n.add((0,d.subchannelAddressToString)(t));for(let e of n)this.addressMap.has(e)||(m("Adding map entry for "+e),this.addressMap.set(e,{counter:new x,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())n.has(e)||(m("Removing map entry for "+e),this.addressMap.delete(e));let i=(0,l.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig()){if(this.timerStartTime){m("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else m("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets()}else for(let e of(m("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}function R(){y&&(0,o.registerLoadBalancerType)(g,k,T)}t.OutlierDetectionLoadBalancer=k,t.setup=R},5387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.shuffled=t.PickFirstLoadBalancingConfig=void 0;let n=r(7960),i=r(5394),s=r(5322),a=r(5888),o=r(4428),l="pick_first";function u(e){a.trace(o.LogVerbosity.DEBUG,l,e)}let c="pick_first",d=250;class h{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return c}toJsonObject(){return{[c]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new h(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=h;class f{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function p(e){let t=e.slice();for(let e=t.length-1;e>1;e--){let r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}t.shuffled=p;class m{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=i.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,i)=>{this.onSubchannelStateUpdate(e,t,r,i)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(i.ConnectivityState.READY,new f(this.currentPick)):0===this.children.length?this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:e}of(this.stickyTransientFailureMode=!0,this.children))e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,n){var s;if(null===(s=this.currentPick)||void 0===s?void 0:s.realSubchannelEquals(e)){r!==i.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel)){r===i.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===i.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),s.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let e=r.subchannel.getConnectivityState();if(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.CONNECTING){this.startConnecting(t);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===i.ConnectivityState.IDLE&&(u("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null===(t=this.children[e])||void 0===t||t.subchannel.startConnecting()})),this.connectionDelayTimeout=null===(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},d)).unref)||void 0===r?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(u("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){u(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,{}),hasReportedTransientFailure:!1}));for(let{subchannel:e}of t)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let{subchannel:e}of(this.resetSubchannelList(),this.children=t,this.children))if(e.addConnectivityStateListener(this.subchannelStateListener),e.getConnectivityState()===i.ConnectivityState.READY){this.pickSubchannel(e);return}for(let e of this.children)e.subchannel.getConnectivityState()===i.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof h&&(t.getShuffleAddressList()&&(e=p(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return c}}function g(){(0,n.registerLoadBalancerType)(c,m,h),(0,n.registerDefaultLoadBalancerType)(c)}t.PickFirstLoadBalancer=m,t.setup=g},9552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let n=r(7960),i=r(5394),s=r(5322),a=r(6379),o=r(5888),l=r(4428),u="round_robin";function c(e){o.trace(l.LogVerbosity.DEBUG,u,e)}let d="round_robin";class h{getLoadBalancerName(){return d}constructor(){}toJsonObject(){return{[d]:{}}}static createFromJson(e){return new h}}class f{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,t,r,n,s)=>{this.calculateAndUpdateState(),(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE)&&(s&&(this.lastError=s),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(i.ConnectivityState.READY)>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===i.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(i.ConnectivityState.READY,new f(e,t))}else this.countSubchannelsWithState(i.ConnectivityState.CONNECTING)>0?this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.countSubchannelsWithState(i.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),c("Connect to address list "+e.map(e=>(0,a.subchannelAddressToString)(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return d}}function m(){(0,n.registerLoadBalancerType)(d,p,h)}t.RoundRobinLoadBalancer=p,t.setup=m},7960:(e,t)=>{"use strict";function r(e,t){var r,n,i,s,a,o,l,u,c,d;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(s=null===(i=t.updateState)||void 0===i?void 0:i.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(o=null===(a=t.requestReresolution)||void 0===a?void 0:a.bind(t))&&void 0!==o?o:e.requestReresolution.bind(e),addChannelzChild:null!==(u=null===(l=t.addChannelzChild)||void 0===l?void 0:l.bind(t))&&void 0!==u?u:e.addChannelzChild.bind(e),removeChannelzChild:null!==(d=null===(c=t.removeChannelzChild)||void 0===c?void 0:c.bind(t))&&void 0!==d?d:e.removeChannelzChild.bind(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=r;let n={},i=null;function s(e,t,r){n[e]={LoadBalancer:t,LoadBalancingConfig:r}}function a(e){i=e}function o(e,t){let r=e.getLoadBalancerName();return r in n?new n[r].LoadBalancer(t):null}function l(e){return e in n}function u(e,t=!1){for(let t of e)if(t.getLoadBalancerName() in n)return t;return t&&i?new n[i].LoadBalancingConfig:null}function c(e){if(!(null!==e&&"object"==typeof e))throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let r=t[0];if(r in n)return n[r].LoadBalancingConfig.createFromJson(e[r]);throw Error(`Unrecognized load balancing config name ${r}`)}t.registerLoadBalancerType=s,t.registerDefaultLoadBalancerType=a,t.createLoadBalancer=o,t.isLoadBalancerNameRegistered=l,t.getFirstUsableConfig=u,t.validateLoadBalancingConfig=c},9881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;let n=r(5394),i=r(4428),s=r(5563),a=r(9932),o=r(5322),l=r(6737),u=r(5888),c=r(9131),d=r(2694),h="load_balancing_call";class f{constructor(e,t,r,n,i,s,a){var o,u;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let c=this.methodName.split("/"),d="";c.length>=2&&(d=c[1]);let h=null!==(u=null===(o=(0,l.splitHostPort)(this.host))||void 0===o?void 0:o.host)&&void 0!==u?u:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){u.trace(i.LogVerbosity.DEBUG,h,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let i=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(i),null===(n=this.onCallEnded)||void 0===n||n.call(this,i.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),l=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+o.PickResultType[r.pickResultType]+" subchannel: "+l+" status: "+(null===(e=r.status)||void 0===e?void 0:e.code)+" "+(null===(t=r.status)||void 0===t?void 0:t.details)),r.pickResultType){case o.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(e=>{var t,o,u;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let c=this.metadata.clone();if(c.merge(e),c.get("authorization").length>1&&this.outputStatus({code:i.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY){this.trace("Picked subchannel "+l+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&c.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(c,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===d.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),this.outputStatus({code:i.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED");return}null===(o=(t=this.callConfig).onCommitted)||void 0===o||o.call(t),null===(u=r.onCallStarted)||void 0===u||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},e=>{let{code:t,details:r}=(0,c.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:i.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:let{code:u,details:h}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:u,details:h,metadata:r.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:e,details:t}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=f},5888:(e,t,r)=>{"use strict";var n,i,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let o=r(4428),l=r(5816),u=r(9293).i8,c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},d=o.LogVerbosity.ERROR;switch((null!==(i=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==i?i:"").toUpperCase()){case"DEBUG":d=o.LogVerbosity.DEBUG;break;case"INFO":d=o.LogVerbosity.INFO;break;case"ERROR":d=o.LogVerbosity.ERROR;break;case"NONE":d=o.LogVerbosity.NONE}let h=()=>c;t.getLogger=h;let f=e=>{c=e};t.setLogger=f;let p=e=>{d=e};t.setLoggerVerbosity=p;let m=(e,...t)=>{let r;if(e>=d){switch(e){case o.LogVerbosity.DEBUG:r=c.debug;break;case o.LogVerbosity.INFO:r=c.info;break;case o.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};t.log=m;let g=null!==(a=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==a?a:"",y=new Set,v=new Set;for(let e of g.split(","))e.startsWith("-")?v.add(e.substring(1)):y.add(e);let b=y.has("all");function _(e,r,n){S(r)&&(0,t.log)(e,new Date().toISOString()+" | v"+u+" "+l.pid+" | "+r+" | "+n)}function S(e){return!v.has(e)&&(b||y.has(e))}t.trace=_,t.isTracerEnabled=S},8665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let n=r(7163),i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,r){r||(r={});class a extends n.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let n=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=n.requestStream?n.responseStream?"bidi":"client_stream":n.responseStream?"server_stream":"unary";let l=n.requestSerialize,u=n.responseDeserialize,c=o(i[r],n.path,l,u);a.prototype[t]=c,Object.assign(a.prototype[t],n),n.originalName&&!s(n.originalName)&&(a.prototype[n.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function l(e){return"format"in e}function u(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r],i=r.split(".");if(i.some(e=>s(e)))continue;let o=i[i.length-1],u=t;for(let e of i.slice(0,-1))u[e]||(u[e]={}),u=u[e];l(n)?u[o]=n:u[o]=a(n,o,{})}return t}t.makeClientConstructor=a,t.loadPackageDefinition=u},9932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let n=r(5888),i=r(4428),s=r(986),a=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return a.test(e)}function u(e){return o.test(e)}function c(e){return e.endsWith("-bin")}function d(e){return!e.startsWith("grpc-")}function h(e){return e.toLowerCase()}function f(e,t){if(!l(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t){if(c(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!u(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}}class p{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){f(e=h(e),t),this.internalRepr.set(e,[t])}add(e,t){f(e=h(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=h(e),this.internalRepr.delete(e)}get(e){return e=h(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){let e=new p(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(m);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new p;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let a=e[r];try{c(r)?Array.isArray(a)?a.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==a&&(d(r)?a.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(r,e)}):void 0!==a&&t.add(r,a)}catch(t){let e=`Failed to add metadata entry ${r}: ${a}. ${(0,s.getErrorMessage)(t)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(i.LogVerbosity.ERROR,e)}}return t}}t.Metadata=p;let m=e=>Buffer.isBuffer(e)?e.toString("base64"):e},5322:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let i=r(9932),s=r(4428);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n||(t.PickResultType=n={}));class a{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new i.Metadata},e)}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=a;class o{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:n.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}t.QueuePicker=o},2728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.DEFAULT_PORT=void 0;let n=r(4811),i=r(665),s=r(1764),a=r(6682),o=r(4428),l=r(9932),u=r(5888),c=r(4428),d=r(6737),h=r(8216),f=r(2480),p="dns_resolver";function m(e){u.trace(c.LogVerbosity.DEBUG,p,e)}t.DEFAULT_PORT=443;let g=3e4,y=s.promisify(i.resolveTxt),v=s.promisify(i.lookup);function b(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let n of e)r<n.length&&t.push(n[r]);return t}class _{constructor(e,r,n){var i,s,a;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,m("Resolver constructed for target "+(0,d.uriToString)(e));let u=(0,d.splitHostPort)(e.path);null===u?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(u.host)||(0,h.isIPv6)(u.host)?(this.ipResult=[{host:u.host,port:null!==(i=u.port)&&void 0!==i?i:t.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=u.host,this.port=null!==(s=u.port)&&void 0!==s?s:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata};let c={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new f.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(a=n["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==a?a:g,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(m("Returning IP address for target "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)m("Failed to parse DNS address "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:!0}),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=b(r,t).map(e=>({host:e.address,port:+this.port}));let n="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(m("Resolved addresses for target "+(0,d.uriToString)(this.target)+": "+n),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{null!==this.pendingLookupPromise&&(m("Resolution error for target "+(0,d.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=y(e),this.pendingTxtPromise.then(e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,a.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===t?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?m('resolution update delayed by "min time between resolutions" rate limit'):m("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}function S(){(0,n.registerResolver)("dns",_),(0,n.registerDefaultScheme)("dns")}t.setup=S},7715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(8216),i=r(4428),s=r(9932),a=r(4811),o=r(6737),l=r(5888),u="ip_resolver";function c(e){l.trace(i.LogVerbosity.DEBUG,u,e)}let d="ipv4",h="ipv6",f=443;class p{constructor(e,t,r){var a;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,c("Resolver constructed for target "+(0,o.uriToString)(e));let l=[];if(!(e.scheme===d||e.scheme===h)){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=(0,o.splitHostPort)(t);if(null===r||e.scheme===d&&!(0,n.isIPv4)(r.host)||e.scheme===h&&!(0,n.isIPv6)(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!==(a=r.port)&&void 0!==a?a:f})}this.addresses=l,c("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}function m(){(0,a.registerResolver)(d,p),(0,a.registerResolver)(h,p)}t.setup=m},2246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(4811);class i{constructor(e,t,r){let n;this.listener=t,this.addresses=[],this.hasReturnedResult=!1,n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}}function s(){(0,n.registerResolver)("unix",i)}t.setup=s},4811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let n=r(6737),i={},s=null;function a(e,t){i[e]=t}function o(e){s=e}function l(e,t,r){if(void 0!==e.scheme&&e.scheme in i)return new i[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)}function u(e){if(void 0!==e.scheme&&e.scheme in i)return i[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${(0,n.uriToString)(e)}`)}function c(e){return void 0!==e.scheme&&e.scheme in i?e:null!==s?{scheme:s,authority:void 0,path:(0,n.uriToString)(e)}:null}t.registerResolver=a,t.registerDefaultScheme=o,t.createResolver=l,t.getDefaultAuthority=u,t.mapUriDefaultScheme=c},30:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;let n=r(4428),i=r(5563),s=r(9932),a=r(5888),o=r(9131),l="resolving_call";class u{constructor(e,t,r,s,a,o){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")}),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,i.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(n.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,i.deadlineToString)(this.deadline));let e=(0,i.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type){this.channel.queueCallForConfig(this);return}if("ERROR"===e.type){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let t=e.config;if(t.status!==n.Status.OK){let{code:e,details:r}=(0,o.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata});return}if(t.methodConfig.timeout){let e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,i.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=u},6160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let n=r(7960),i=r(6682),s=r(5394),a=r(4811),o=r(5322),l=r(2480),u=r(4428),c=r(9932),d=r(5888),h=r(4428),f=r(6737),p=r(1308),m="resolving_load_balancer";function g(e){d.trace(h.LogVerbosity.DEBUG,m,e)}let y=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,r,n){for(let i of r.name)switch(n){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===e&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===e&&i.method===t)return!0}return!1}function b(e,t,r,n){for(let i of r)if(v(e,t,i,n))return i;return null}function _(e){return function(t,r){var n,i;let s=t.split("/").filter(e=>e.length>0),a=null!==(n=s[0])&&void 0!==n?n:"",o=null!==(i=s[1])&&void 0!==i?i:"";if(e&&e.methodConfig)for(let t of y){let r=b(a,o,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}}class S{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,i.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new o.QueuePicker(this)),this.childLoadBalancer=new p.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(g("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let o=null;null===t?null===r?(this.previousServiceConfig=null,o=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):o=this.previousServiceConfig:(o=t,this.previousServiceConfig=t);let l=null!==(a=null==o?void 0:o.loadBalancingConfig)&&void 0!==a?a:[],d=(0,n.getFirstUsableConfig)(l,!0);if(null===d){this.handleResolutionFailure({code:u.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new c.Metadata});return}this.childLoadBalancer.updateAddressList(e,d,s);let h=null!=o?o:this.defaultServiceConfig;this.onSuccessfulResolution(h,null!=i?i:_(h))},onError:e=>{this.handleResolutionFailure(e)}},r);let f={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},f),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new o.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){g((0,f.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new o.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=S},7972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;let n=r(4428),i=r(9932),s=r(5888),a="retrying_call";class o{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=o;class l{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-n<e)&&!(this.totalLimit-this.totalAllocated<e)&&(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(n<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;let r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=l;let u="grpc-previous-rpc-attempts";class c{constructor(e,t,r,n,i,s,a,o,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,a,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){for(let{call:r}of(this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new i.Metadata}),this.underlyingCalls))r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(let[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){let r;if("RETRY"!==this.state){t(!1);return}let n=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(n.maxAttempts,5)){t(!1);return}if(null===e)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var e,r;if("RETRY"!==this.state){t(!1);return}(null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r)&&(t(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)(null==t?void 0:t.state)==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,i,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==n?n:[],e.code)){let n;if(null===(i=this.retryThrottler)||void 0===i||i.addCallFailed(),null===r)n=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else n=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return -1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK){null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if("COMMITTED"===this.state){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;let i=null!==(e=n.hedgingDelay)&&void 0!==e?e:"0s",s=Number(i.substring(0,i.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*s),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(u,`${r}`);let i=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),i=!0,r>0&&n.set(u,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!i&&r>0&&n.metadata.set(u,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let n=this.underlyingCalls[e],i=n.nextMessageToSend;null===(r=(t=this.getBufferEntry(i)).callback)||void 0===r||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let n={message:t,flags:e.flags},i=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated)for(let[n,s]of(null===(r=e.callback)||void 0===r||r.call(e),this.underlyingCalls.entries()))"ACTIVE"===s.state&&s.nextMessageToSend===i&&s.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(n)}},t);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===i&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){for(let e of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==e?void 0:e.state)==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();for(let t of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==t?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=c},8445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let n=r(7702),i=r(2694),s=r(6162),a=r(1568),o=r(4428),l=r(9932),u=r(1850),c=r(5888),d=r(986),h="server_call";function f(e){c.trace(o.LogVerbosity.DEBUG,h,e)}let p="grpc-message",m="grpc-status",g="grpc-timeout",y=/(\d{1,8})\s*([HMSmun])/,v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},b={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},_={[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},S={waitForTrailers:!0};class w extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=w;class T extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=T;class E extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t)){this.call.once("drain",r);return}}catch(e){this.emit("error",{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:o.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=E;class C extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=C,C.prototype._read=T.prototype._read,C.prototype._write=E.prototype._write,C.prototype._final=E.prototype._final;class x extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;f("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:o.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if("identity"===t)return r;if("deflate"!==t&&"gzip"!==t)return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});{let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,n)=>{let i=0,s=[];e.on("data",t=>{s.push(t),i+=t.byteLength,-1!==this.maxReceiveMessageSize&&i>this.maxReceiveMessageSize&&(e.destroy(),n({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(s))}),e.write(r),e.end()})}}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},_),b),t);this.stream.respond(r,S)}receiveMetadata(e){let t=l.Metadata.fromHttp2Headers(e);c.isTracerEnabled(h)&&f("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(g);if(r.length>0){let e=r[0].toString().match(y);if(null===e){let e=Error("Invalid deadline");return e.code=o.Status.OUT_OF_RANGE,this.sendError(e),t}let n=+e[1]*v[e[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(I,n,this),t.remove(g)}return t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(i.constants.HTTP2_HEADER_TE),t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:n}=this,i=0,s=this,a=[],l=this.maxReceiveMessageSize;function u(e){if(i+=e.byteLength,-1!==l&&i>l){n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),r({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${i} vs. ${l})`});return}a.push(e)}function c(l){if(n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),void 0!==l){r({code:o.Status.INTERNAL,details:l.message});return}if(0===i){r({code:o.Status.INTERNAL,details:"received empty unary message"});return}s.emit("receiveMessage");let d=Buffer.concat(a,i),h=1===d.readUInt8(0)?e:"identity",f=s.getDecompressedMessage(d,h);if(Buffer.isBuffer(f)){t(s.deserializeMessageWithInternalError(f));return}f.then(e=>t(s.deserializeMessageWithInternalError(e)),t=>r(t.code?t:{code:o.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}this.stream.on("data",u),this.stream.on("end",c),this.stream.on("error",c)})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(e){throw{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:o.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===o.Status.OK),!this.checkCancelled()){if(f("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[m]:e.code,[p]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.stream.end());else{let t=Object.assign(Object.assign({[m]:e.code,[p]:encodeURI(e.details)},_),null===(r=e.metadata)||void 0===r?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}}sendError(e){let t={code:o.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new u.StreamDecoder(this.maxReceiveMessageSize),n=!1,i=!1,s=!1,a=async()=>{s||!n||i||(s=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async n=>{let s;try{s=r.write(n)}catch(e){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(let r of(i=!0,this.stream.pause(),s)){let n;this.emit("receiveMessage");let i=1===r.readUInt8(0)?t:"identity";try{n=await this.getDecompressedMessage(r,i)}catch(e){this.sendError(e);return}if(!n)return;await this.pushOrBufferMessage(e,n)}i=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{n=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){f("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}f("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let t=(0,d.getErrorCode)(r);(null===t||t<o.Status.OK||t>o.Status.UNAUTHENTICATED)&&(t=o.Status.INTERNAL),e.emit("error",{details:(0,d.getErrorMessage)(r),code:t})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=null===(e=this.stream.session)||void 0===e?void 0:e.socket;return null!=t&&t.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function I(e){let t=Error("Deadline exceeded");t.code=o.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=x},6970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let n=r(3981);class i{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),s.push(r.private_key)}return new a({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=i;class s extends i{_isSecure(){return!1}_getSettings(){return null}}class a extends i{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},5445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let n=r(2694),i=r(4428),s=r(8445),a=r(6970),o=r(4811),l=r(5888),u=r(6379),c=r(6737),d=r(6188),h=0x7fffffff,f=0x7fffffff,p=2e4,{HTTP2_HEADER_PATH:m}=n.constants,g="server";function y(){}function v(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function b(e,t){let r=v(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class _{constructor(e){var t,r,n,i;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,d.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:h,this.maxConnectionAgeGraceMs=null!==(r=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==r?r:h,this.keepaliveTimeMs=null!==(n=this.options["grpc.keepalive_time_ms"])&&void 0!==n?n:f,this.keepaliveTimeoutMs=null!==(i=this.options["grpc.keepalive_timeout_ms"])&&void 0!==i?i:p,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;let i;let s=this.sessions.get(e),a=e.socket,o=a.remoteAddress?(0,u.stringToSubchannelAddress)(a.remoteAddress,a.remotePort):null,l=a.localAddress?(0,u.stringToSubchannelAddress)(a.localAddress,a.localPort):null;if(e.encrypted){let e=a,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();i={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:l,security:i,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}}trace(e){l.trace(i.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let n,i;let s=e[r];n=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let a=t[r];if(void 0===a&&"string"==typeof s.originalName&&(a=t[s.originalName]),i=void 0!==a?a.bind(t):b(n,r),!1===this.register(s.path,i,s.responseSerialize,s.requestDeserialize,n))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof a.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=(0,c.parseUri)(e);if(null===s)throw Error(`Could not parse port "${e}"`);let h=(0,o.mapUriDefaultScheme)(s);if(null===h)throw Error(`Could not get a default scheme for port "${e}"`);let f={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?f.maxSessionMemory=this.options["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(f.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let p=(e,t)=>{process.nextTick(()=>r(e,t))},m=()=>{let e;if(t._isSecure()){let r=Object.assign(f,t._getSettings());r.enableTrace=1===this.options["grpc-node.tls_enable_trace"],(e=n.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=n.createServer(f);return e.setTimeout(0,y),this._setupHandlers(e),e},g=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+(0,u.subchannelAddressToString)(e)),r=(0,u.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;let n=m();return new Promise((i,s)=>{let a=t=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(e)+" with error "+t.message),i(t)};n.once("error",a),n.listen(r,()=>{let e;if(this.shutdown){n.close(),i(Error("bindAsync failed because server is shutdown"));return}let r=n.address();e="string"==typeof r?{path:r}:{host:r.address,port:r.port};let s=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(e)),i("port"in e?e.port:t),n.removeListener("error",a)})})})).then(e=>{let n=0;for(let r of e)if("number"==typeof r&&(n+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=m();return new Promise((n,i)=>{let s=r=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{if(this.shutdown){r.close(),n({port:0,count:0});return}let t=r.address(),i={host:t.address,port:t.port},a=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(i),()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(a),this.http2ServerList.push({server:r,channelzRef:a}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(i)),n(g(e.slice(1),t.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,n)=>{let s;if(b.onSuccessfulResolution=()=>{},this.shutdown&&p(Error("bindAsync failed because server is shutdown"),0),0===t.length){p(Error(`No addresses resolved for port ${e}`),0);return}(s=(0,u.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):g(t,t[0].port,0):g(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,e),p(Error(e),0)}else e.count<t.length&&l.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),p(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,r),p(Error(r),0)})},onError:e=>{p(Error(e.details),0)}};(0,o.createResolver)(h,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,i){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef),e(t)},r=0;function n(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.shutdown=!0,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t)),n()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(n))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof r&&r.startsWith("application/grpc"))||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return void 0===t?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=i.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed();return}let n=t[m],a=this._retrieveHandler(n);if(!a){this._respondWithError(v(n),e,r);return}let o=new s.Http2ServerCallStream(e,a,this.options);o.once("callEnd",e=>{e===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",e=>{e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,a,t)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),o.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${a.type}`}))}_streamHandler(e,t){if(!0!==this._verifyContentType(e,t))return;let r=t[m],n=this._retrieveHandler(r);if(!n){this._respondWithError(v(r),e,null);return}let a=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(a,n,t)||a.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;let i=e.receiveMetadata(r),s=null!==(n=i.get("grpc-encoding")[0])&&void 0!==n?n:"identity";i.remove("grpc-encoding");let{type:a}=t;if("unary"===a)S(e,t,i,s);else if("clientStream"===a)w(e,t,i,s);else if("serverStream"===a)T(e,t,i,s);else{if("bidi"!==a)return!1;E(e,t,i,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",e=>{var t,r,i,s,a;if(!this.started){e.destroy();return}let o=(0,d.registerChannelzSocket)(null!==(t=e.socket.remoteAddress)&&void 0!==t?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),l={ref:o,streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,l);let u=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+u),this.sessionChildrenTracker.refChild(o));let c=null,f=null,p=!1;if(this.maxConnectionAgeMs!==h){let t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;c=null===(i=(r=setTimeout(()=>{var t,r;p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+u);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,0x7fffffff,Buffer.from("max_age"))}catch(t){e.destroy();return}e.close(),this.maxConnectionAgeGraceMs!==h&&(f=null===(r=(t=setTimeout(()=>{e.destroy()},this.maxConnectionAgeGraceMs)).unref)||void 0===r?void 0:r.call(t))},this.maxConnectionAgeMs+s)).unref)||void 0===i?void 0:i.call(r)}let m=null===(a=(s=setInterval(()=>{var t,r;let n=null===(r=(t=setTimeout(()=>{p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+u),e.close()},this.keepaliveTimeoutMs)).unref)||void 0===r?void 0:r.call(t);try{e.ping((e,t,r)=>{clearTimeout(n)})}catch(t){e.destroy()}},this.keepaliveTimeMs)).unref)||void 0===a?void 0:a.call(s);e.on("close",()=>{this.channelzEnabled&&(p||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+u),this.sessionChildrenTracker.unrefChild(o),(0,d.unregisterChannelzRef)(o)),c&&clearTimeout(c),f&&clearTimeout(f),m&&clearTimeout(m),this.sessions.delete(e)})})}}async function S(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerUnaryCallImpl(e,r,i);t.func(a,(t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)})}catch(t){e.sendError(t)}}function w(e,t,r,n){let i=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function a(t,r,n,s){i.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(i.on("error",a),t.func(i,a))}async function T(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(a)}catch(t){e.sendError(t)}}function E(e,t,r,n){let i=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(i)}t.Server=_},6682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;let n=r(9801),i=r(4428),s=r(7960),a=/^\d+(\.\d{1,9})?s$/,o="node";function l(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`);if(!("method"in e)||""===e.method)return{service:e.service};if("string"!=typeof e.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`);return{service:e.service,method:e.method}}if("method"in e&&void 0!==e.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function u(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!a.test(e.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!a.test(e.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function c(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!a.test(e.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(let t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}function d(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(l(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e){if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&a.test(e.timeout)){let n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:(null!==(t=n[1])&&void 0!==t?t:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=u(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=c(e.hedgingPolicy));return r}function h(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function f(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in e){if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(d(r));"retryThrottling"in e&&(t.retryThrottling=h(e.retryThrottling));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function p(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:f(e.serviceConfig)};if("clientLanguage"in e){if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in e){if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in e){if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage")}let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function m(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=p(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}function g(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return m(JSON.parse(r.join("").substring(12)),t);return null}t.validateRetryThrottling=h,t.validateServiceConfig=f,t.extractAndSelectServiceConfig=g},9364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},1850:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class n{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0,i=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,i.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,i.push(t)}break;default:throw Error("Unexpected read state")}return i}}t.StreamDecoder=n},6379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let n=r(8216);function i(e){return"port"in e}function s(e,t){return!e&&!t||!!e&&!!t&&(i(e)?i(t)&&e.host===t.host&&e.port===t.port:!i(t)&&e.path===t.path)}function a(e){return i(e)?e.host+":"+e.port:e.path}t.isTcpSubchannelAddress=i,t.subchannelAddressEqual=s,t.subchannelAddressToString=a;let o=443;function l(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:o}:{path:e}}t.stringToSubchannelAddress=l},4451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;let n=r(2694),i=r(9801),s=r(4428),a=r(9932),o=r(1850),l=r(5888),u=r(4428),c="subchannel_call";function d(e){for(let[t,r]of Object.entries(i.constants.errno))if(r===e)return t;return"Unknown system error "+e}class h{constructor(e,t,r,i,l){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let c=null!==(u=i.getOptions()["grpc.max_receive_message_length"])&&void 0!==u?u:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(c),e.on("response",(e,t)=>{let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new a.Metadata});return}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{let t;if(!this.statusOutput){this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(let e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,i=this.internalError.message):i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+d(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(u.LogVerbosity.DEBUG,c,"["+this.callId+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===s.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){let t;this.callEventTracker.onStreamEnd(!0);let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}let n=t.getMap(),i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){let e=Number(n["grpc-status"]);e in s.Status&&(i=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let o="";if("string"==typeof n["grpc-message"]){try{o=decodeURI(n["grpc-message"])}catch(e){o=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let l={code:i,details:o,metadata:t};this.endCall(l)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=t=>{process.nextTick(()=>{var r;let n=s.Status.UNAVAILABLE;(null==t?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}t.Http2SubchannelCall=h},9863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}}t.BaseSubchannelWrapper=r},8326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let n=r(2869),i=r(1589),s=r(6379),a=r(6737),o=r(2817),l=1e4;class u{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},l),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();let u=(0,a.uriToString)(e);if(u in this.pool){for(let e of this.pool[u])if((0,s.subchannelAddressEqual)(t,e.subchannelAddress)&&(0,n.channelOptionsEqual)(r,e.channelArguments)&&l._equals(e.channelCredentials))return e.subchannel}let c=new i.Subchannel(e,t,r,l,new o.Http2SubchannelConnector(e));return u in this.pool||(this.pool[u]=[]),this.pool[u].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:c}),c.ref(),c}}t.SubchannelPool=u;let c=new u;function d(e){return e?c:new u}t.getSubchannelPool=d},1589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let n=r(5394),i=r(2480),s=r(5888),a=r(4428),o=r(6737),l=r(6379),u=r(6188),c="subchannel",d=0x7fffffff;class h{constructor(e,t,r,s,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=a,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new u.ChannelzCallTracker,this.childrenTracker=new u.ChannelzChildrenTracker,this.streamTracker=new u.ChannelzCallTracker;let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new i.BackoffTimeout(()=>{this.handleBackoffTimer()},c),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!==(o=r["grpc.keepalive_time_ms"])&&void 0!==o?o:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new u.ChannelzTrace,this.channelzRef=(0,u.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(a.LogVerbosity.DEBUG,c,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,d);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var i,s;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);let a=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(i=this.transport)||void 0===i||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(s=this.transport)||void 0===s||s.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of this.stateListeners)e(this,a,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,u.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){let i;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),i={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):i={},this.transport.createCall(e,t,r,n,i)}startConnecting(){process.nextTick(()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState!==n.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}t.Subchannel=h},3981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let n=r(2048);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;function a(){return i?(null===s&&(s=n.readFileSync(i)),s):null}t.getDefaultRootsData=a},2817:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;let n=r(2694),i=r(2452),s=r(6188),a=r(4428),o=r(5247),l=r(5888),u=r(4811),c=r(6379),d=r(6737),h=r(8216),f=r(4451),p=r(2837),m="transport",g="transport_flowctrl",y=r(9293).i8,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:b,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:S,HTTP2_HEADER_TE:w,HTTP2_HEADER_USER_AGENT:T}=n.constants,E=2e4,C=Buffer.from("too_many_pings","ascii");class x{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=E,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,c.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${y}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let i=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(C)&&(i=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(i)}),e.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(m)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let n;let i=this.session.socket,s=i.remoteAddress?(0,c.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,a=i.localAddress?(0,c.stringToSubchannelAddress)(i.localAddress,i.localPort):null;if(this.session.encrypted){let t=i,r=t.getCipher(),s=t.getCertificate(),a=t.getPeerCertificate();n={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:a&&"raw"in a?a.raw:null}}else n=null;return{remoteAddress:s,localAddress:a,security:n,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimeoutId).unref)||void 0===t||t.call(e));try{this.session.ping((e,t,r)=>{e&&(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch(e){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null===(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)||void 0===t?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1!==this.activeCalls.size||(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,i){let s,a,o;let l=e.toHttp2Headers();l[v]=t,l[T]=this.userAgent,l[b]="application/grpc",l[_]="POST",l[S]=r,l[w]="trailers";try{s=this.session.request(l)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=i.addMessageSent)||void 0===e||e.call(i)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=i.addMessageReceived)||void 0===e||e.call(i)},onCallEnd:e=>{var t;null===(t=i.onCallEnd)||void 0===t||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=i.onStreamEnd)||void 0===t||t.call(i,e)}}):a={addMessageSent:()=>{var e;null===(e=i.addMessageSent)||void 0===e||e.call(i)},addMessageReceived:()=>{var e;null===(e=i.addMessageReceived)||void 0===e||e.call(i)},onCallEnd:e=>{var t;null===(t=i.onCallEnd)||void 0===t||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;null===(t=i.onStreamEnd)||void 0===t||t.call(i,e)}},o=new f.Http2SubchannelCall(s,a,n,this,(0,p.getNextCallNumber)()),this.addActiveCall(o),o}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,s.unregisterChannelzRef)(this.channelzRef)}}class I{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,m,(0,d.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise((a,o)=>{var l,f,p;let m;s.realTarget?(m=(0,d.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,d.uriToString)(s.realTarget))):(m=null,this.trace("creating HTTP/2 session to "+(0,c.subchannelAddressToString)(e)));let g=(0,u.getDefaultAuthority)(null!==(l=s.realTarget)&&void 0!==l?l:this.channelTarget),y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?y.maxSessionMemory=r["grpc-node.max_session_memory"]:y.maxSessionMemory=Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),y.servername=e}else{let e=null!==(p=null===(f=(0,d.splitHostPort)(g))||void 0===f?void 0:f.host)&&void 0!==p?p:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:h.connect(e);y=Object.assign(Object.assign(Object.assign({},y),e),{enableTrace:1===r["grpc-node.tls_enable_trace"]});let b=n.connect(v+g,y);this.session=b;let _="Failed to connect";b.unref(),b.once("connect",()=>{b.removeAllListeners(),a(new x(b,e,r,m)),this.session=null}),b.once("close",()=>{this.session=null,setImmediate(()=>{o(`${_} (${new Date().toISOString()})`)})}),b.once("error",e=>{_=e.message,this.trace("connection failed with error "+_)})})}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();let a=t._getConnectionOptions()||{};if("secureContext"in a){if(a.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];a.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),a.servername=e}else if("grpc.http_connect_target"in r){let e=(0,u.getDefaultAuthority)(null!==(n=(0,d.parseUri)(r["grpc.http_connect_target"]))&&void 0!==n?n:{path:"localhost"}),t=(0,d.splitHostPort)(e);a.servername=null!==(s=null==t?void 0:t.host)&&void 0!==s?s:e}r["grpc-node.tls_enable_trace"]&&(a.enableTrace=!0)}return(0,o.getProxiedConnection)(e,r,a).then(n=>this.createSession(e,t,r,n))}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}t.Http2SubchannelConnector=I},6737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function n(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}}t.parseUri=n;let i=/^\d+$/;function s(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let n=e.substring(t+2);return i.test(n)?{host:r,port:+n}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:i.test(t[1])?{host:t[0],port:+t[1]}:null}}function a(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}t.splitHostPort=s,t.uriToString=a},5314:(e,t,r)=>{"use strict";var n,i;n={value:!0},n=n=t.im=t.J_=n=t.Cp=n=n=void 0;let s=r(4285),a=r(8154),o=r(2802),l=r(9673);n=r(5710),n=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(i=t.Cp||(t.Cp={}));let u={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){return""===e?t:e+"."+t}function d(e){return e instanceof a.Service||e instanceof a.Type||e instanceof a.Enum}function h(e){return e instanceof a.Namespace||e instanceof a.Root}function f(e,t){let r=c(t,e.name);return d(e)?[[r,e]]:h(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>f(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function p(e,t){return function(r){return e.toObject(e.decode(r),t)}}function m(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function g(e){return(e||[]).reduce((e,t)=>{for(let[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:i.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function y(e,t,r,n){let i=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:m(i),requestDeserialize:p(i,r),responseSerialize:m(a),responseDeserialize:p(a,r),originalName:s(e.name),requestType:b(i,n),responseType:b(a,n),options:g(e.parsedOptions)}}function v(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=y(s,t,r,n);return i}function b(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function _(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function S(e,t,r,n){if(e instanceof a.Service)return v(e,t,r,n);if(e instanceof a.Type)return b(e,n);if(e instanceof a.Enum)return _(e,n);throw Error("Type mismatch in reflection object handling")}function w(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of f(e,""))r[i]=S(s,i,t,n);return r}function T(e,t){t=t||{};let r=a.Root.fromDescriptor(e);return r.resolveAll(),w(r,t)}function E(e,t){return w((0,l.loadProtosWithOptionsSync)(e,t),t)}function C(e,t){t=t||{};let r=a.Root.fromJSON(e);return r.resolveAll(),w(r,t)}n=function(e,t){return(0,l.loadProtosWithOptions)(e,t).then(e=>w(e,t))},t.J_=E,t.im=C,n=function(e,t){return T(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return T(o.FileDescriptorSet.fromObject(e),t)},(0,l.addCommonProtos)()},9673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let n=r(2048),i=r(5315),s=r(8154);function a(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}async function o(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));a(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n}function l(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");a(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n}function u(){let e=r(522),t=r(4552),n=r(7105),i=r(8730);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}t.loadProtosWithOptions=o,t.loadProtosWithOptionsSync=l,t.addCommonProtos=u},6362:e=>{"use strict";function t(e,t){for(var r=Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(s){if(s=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}e.exports=t},7406:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,a=[],o=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[o++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[o++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[o++]=n[i|u>>6],a[o++]=n[63&u],l=0}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0)}return(l&&(a[o++]=n[i],a[o++]=61,1===l&&(a[o++]=61)),s)?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,o=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error(a);switch(o){case 0:n=u,o=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:t[r++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},332:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),o=Array(a.length+1),l=Array(a.length),u=0;u<a.length;)o[u]=a[u],l[u]=e[a[u++]];return o[u]=r,Function.apply(null,o).apply(null,l)}return Function(r)()}for(var c=Array(arguments.length-1),d=0;d<c.length;)c[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=c[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),d!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},1740:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},6660:(e,t,r)=>{"use strict";e.exports=s;var n=r(6362),i=r(3822)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&i&&i.readFile?i.readFile(e,function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},3614:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function o(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:0x80000000,r,n);else if(isNaN(t))e(0x7fc00000,r,n);else if(t>34028234663852886e22)e((i<<31|0x7f800000)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|a)>>>0,r,n)}}function a(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=8388607&n;return 255===s?a?NaN:1/0*i:0===s?1401298464324817e-60*i*a:i*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,i),e.readFloatBE=a.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function o(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():function(){function t(e,t,r,n,i,s){var a,o=n<0?1:0;if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:0x80000000,i,s+r);else if(isNaN(n))e(0,i,s+t),e(0x7ff80000,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|0x7ff00000)>>>0,i,s+r);else if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/0x100000000)>>>0,i,s+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(0x10000000000000*(a=n*Math.pow(2,-l))>>>0,i,s+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}function a(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r),o=(a>>31)*2+1,l=a>>>20&2047,u=0x100000000*(1048575&a)+s;return 2047===l?u?NaN:1/0*o:0===l?5e-324*o*u:o*Math.pow(2,l-1075)*(u+0x10000000000000)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,i,0,4),e.readDoubleBE=a.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},3822:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1265:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return(r||(t=i(t)),n(t))?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},697:e=>{"use strict";function t(e,t,r){var n=r||8192,i=n>>>1,s=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(s=e(n),a=0);var o=t.call(s,a,a+=r);return 7&a&&(a=(7|a)+1),o}}e.exports=t},3130:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],a=0;t<r;)(n=e[t++])<128?s[a++]=n:n>191&&n<224?s[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(n>>10),s[a++]=56320+(1023&n)):s[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(e,t,r){for(var n,i,s=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(a+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}},4285:e=>{var t=1/0,r="[object Symbol]",n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",h="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",p="["+s+"]",m="["+h+"]",g="["+a+o+"]",y="\\d+",v="["+l+"]",b="["+u+"]",_="[^"+s+h+y+l+u+c+"]",S="\ud83c[\udffb-\udfff]",w="[^"+s+"]",T="(?:\ud83c[\udde6-\uddff]){2}",E="[\ud800-\udbff][\udc00-\udfff]",C="["+c+"]",x="\\u200d",I="(?:"+b+"|"+_+")",k="(?:"+C+"|"+_+")",R="(?:"+f+"(?:d|ll|m|re|s|t|ve))?",A="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?",N="(?:"+g+"|"+S+")?",O="["+d+"]?",D="(?:"+x+"(?:"+[w,T,E].join("|")+")"+O+N+")*",P=O+N+D,M="(?:"+[v,T,E].join("|")+")"+P,L="(?:"+[w+g+"?",g,T,E,p].join("|")+")",j=RegExp(f,"g"),F=RegExp(g,"g"),B=RegExp(S+"(?="+S+")|"+L+P,"g"),U=RegExp([C+"?"+b+"+"+R+"(?="+[m,C,"$"].join("|")+")",k+"+"+A+"(?="+[m,C+I,"$"].join("|")+")",C+"?"+I+"+"+R,C+"+"+A,y,M].join("|"),"g"),V=RegExp("["+x+s+a+o+d+"]"),z=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,q={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},$="object"==typeof global&&global&&global.Object===Object&&global,W="object"==typeof self&&self&&self.Object===Object&&self,K=$||W||Function("return this")();function H(e,t,r,n){var i=-1,s=e?e.length:0;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function G(e){return e.split("")}function Z(e){return e.match(n)||[]}var Q=function(e){return function(t){return null==e?void 0:e[t]}}(q);function Y(e){return V.test(e)}function X(e){return z.test(e)}function J(e){return Y(e)?ee(e):G(e)}function ee(e){return e.match(B)||[]}function et(e){return e.match(U)||[]}var er=Object.prototype.toString,en=K.Symbol,ei=en?en.prototype:void 0,es=ei?ei.toString:void 0;function ea(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function eo(e){if("string"==typeof e)return e;if(ed(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ea(e,t,r)}function eu(e){return function(t){var r=Y(t=eh(t))?J(t):void 0,n=r?r[0]:t.charAt(0),i=r?el(r,1).join(""):t.slice(1);return n[e]()+i}}function ec(e){return!!e&&"object"==typeof e}function ed(e){return"symbol"==typeof e||ec(e)&&er.call(e)==r}function eh(e){return null==e?"":eo(e)}var ef=function(e){return function(t){return H(ey(em(t).replace(j,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ep(t):t)});function ep(e){return eg(eh(e).toLowerCase())}function em(e){return(e=eh(e))&&e.replace(i,Q).replace(F,"")}var eg=eu("toUpperCase");function ey(e,t,r){return(e=eh(e),void 0===(t=r?void 0:t))?X(e)?et(e):Z(e):e.match(t)||[]}e.exports=ef},1973:(e,t,r)=>{let n={unstable_cache:r(753).A,revalidateTag:r(7018).revalidateTag,revalidatePath:r(7018).revalidatePath,unstable_noStore:r(5921).P,unstable_cacheLife:r(329).R,unstable_cacheTag:r(9577).H};e.exports=n,t.unstable_cache=n.unstable_cache,t.revalidatePath=n.revalidatePath,t.revalidateTag=n.revalidateTag,t.unstable_noStore=n.unstable_noStore,t.unstable_cacheLife=n.unstable_cacheLife,t.unstable_cacheTag=n.unstable_cacheTag},7989:(e,t)=>{"use strict";var r;function n(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}r={value:!0},Object.defineProperty(t,"h",{enumerable:!0,get:function(){return n}})},1999:(e,t,r)=>{"use strict";var n;n={value:!0},Object.defineProperty(t,"j",{enumerable:!0,get:function(){return i.registerServerReference}});let i=r(8093)},2379:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t;e.parse=a,e.serialize=o;var r=decodeURIComponent,n=encodeURIComponent,i=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},s=t||{},a=e.split(i),o=s.decode||r,u=0;u<a.length;u++){var c=a[u],d=c.indexOf("=");if(!(d<0)){var h=c.substr(0,d).trim(),f=c.substr(++d,c.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==n[h]&&(n[h]=l(f,o))}}return n}function o(e,t,r){var i=r||{},a=i.encode||n;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var o=a(t);if(o&&!s.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(i.domain){if(!s.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l}function l(e,t){try{return t(e)}catch(t){return e}}})(),e.exports=t})()},1385:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t;function r(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",s=r+1;s<e.length;){var a=e.charCodeAt(s);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a){i+=e[s++];continue}break}if(!i)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:i}),r=s;continue}if("("===n){var o=1,l="",s=r+1;if("?"===e[s])throw TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;){if("\\"===e[s]){l+=e[s++]+e[s++];continue}if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw TypeError("Capturing groups are not allowed at "+s);l+=e[s++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=s;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function n(e,t){void 0===t&&(t={});for(var n=r(e),i=t.prefixes,s=void 0===i?"./":i,a="[^"+l(t.delimiter||"/#?")+"]+?",o=[],u=0,c=0,d="",h=function(e){if(c<n.length&&n[c].type===e)return n[c++].value},f=function(e){var t=h(e);if(void 0!==t)return t;var r=n[c];throw TypeError("Unexpected "+r.type+" at "+r.index+", expected "+e)},p=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};c<n.length;){var m=h("CHAR"),g=h("NAME"),y=h("PATTERN");if(g||y){var v=m||"";-1===s.indexOf(v)&&(d+=v,v=""),d&&(o.push(d),d=""),o.push({name:g||u++,prefix:v,suffix:"",pattern:y||a,modifier:h("MODIFIER")||""});continue}var b=m||h("ESCAPED_CHAR");if(b){d+=b;continue}if(d&&(o.push(d),d=""),h("OPEN")){var v=p(),_=h("NAME")||"",S=h("PATTERN")||"",w=p();f("CLOSE"),o.push({name:_||(S?u++:""),pattern:_&&!S?a:S,prefix:v,suffix:w,modifier:h("MODIFIER")||""});continue}f("END")}return o}function i(e,t){return s(n(e,t),t)}function s(e,t){void 0===t&&(t={});var r=u(t),n=t.encode,i=void 0===n?function(e){return e}:n,s=t.validate,a=void 0===s||s,o=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",n=0;n<e.length;n++){var s=e[n];if("string"==typeof s){r+=s;continue}var l=t?t[s.name]:void 0,u="?"===s.modifier||"*"===s.modifier,c="*"===s.modifier||"+"===s.modifier;if(Array.isArray(l)){if(!c)throw TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===l.length){if(u)continue;throw TypeError('Expected "'+s.name+'" to not be empty')}for(var d=0;d<l.length;d++){var h=i(l[d],s);if(a&&!o[n].test(h))throw TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+h+'"');r+=s.prefix+h+s.suffix}continue}if("string"==typeof l||"number"==typeof l){var h=i(String(l),s);if(a&&!o[n].test(h))throw TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+h+'"');r+=s.prefix+h+s.suffix;continue}if(!u){var f=c?"an array":"a string";throw TypeError('Expected "'+s.name+'" to be '+f)}}return r}}function a(e,t){var r=[];return o(p(e,r,t),r,t)}function o(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var s=n[0],a=n.index,o=Object.create(null),l=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return i(e,r)}):o[r.name]=i(n[e],r)},u=1;u<n.length;u++)l(u);return{path:s,index:a,params:o}}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function u(e){return e&&e.sensitive?"":"i"}function c(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}function d(e,t,r){return RegExp("(?:"+e.map(function(e){return p(e,t,r).source}).join("|")+")",u(r))}function h(e,t,r){return f(n(e,r),t,r)}function f(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,s=r.start,a=void 0===s||s,o=r.end,c=void 0===o||o,d=r.encode,h=void 0===d?function(e){return e}:d,f="["+l(r.endsWith||"")+"]|$",p="["+l(r.delimiter||"/#?")+"]",m=a?"^":"",g=0,y=e;g<y.length;g++){var v=y[g];if("string"==typeof v)m+=l(h(v));else{var b=l(h(v.prefix)),_=l(h(v.suffix));if(v.pattern){if(t&&t.push(v),b||_){if("+"===v.modifier||"*"===v.modifier){var S="*"===v.modifier?"?":"";m+="(?:"+b+"((?:"+v.pattern+")(?:"+_+b+"(?:"+v.pattern+"))*)"+_+")"+S}else m+="(?:"+b+"("+v.pattern+")"+_+")"+v.modifier}else m+="("+v.pattern+")"+v.modifier}else m+="(?:"+b+_+")"+v.modifier}}if(c)i||(m+=p+"?"),m+=r.endsWith?"(?="+f+")":"$";else{var w=e[e.length-1],T="string"==typeof w?p.indexOf(w[w.length-1])>-1:void 0===w;i||(m+="(?:"+p+"(?="+f+"))?"),T||(m+="(?="+p+"|"+f+")")}return new RegExp(m,u(r))}function p(e,t,r){return e instanceof RegExp?c(e,t):Array.isArray(e)?d(e,t,r):h(e,t,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=n,e.compile=i,e.tokensToFunction=s,e.match=a,e.regexpToFunction=o,e.tokensToRegexp=f,e.pathToRegexp=p})(),e.exports=t})()},5759:(e,t,r)=>{"use strict";var n=r(9129),i={stream:!0};function s(e,t){if(e){var r=e[t[0]];if(e=r[t[2]])r=e.name;else{if(!(e=r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}function a(e,t){var r="",n=e[t];if(n)r=n.name;else{var i=t.lastIndexOf("#");if(-1!==i&&(r=t.slice(i+1),n=e[t.slice(0,i)]),!n)throw Error('Could not find the module "'+t+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return[n.id,n.chunks,r]}var o=new Map;function l(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function u(){}function c(e){for(var t=e[1],n=[],i=0;i<t.length;){var s=t[i++];t[i++];var a=o.get(s);if(void 0===a){a=r.e(s),n.push(a);var c=o.set.bind(o,s,null);a.then(c,u),o.set(s,a)}else null!==a&&n.push(a)}return 4===e.length?0===n.length?l(e[0]):Promise.all(n).then(function(){return l(e[0])}):0<n.length?Promise.all(n):null}function d(e){var t=globalThis.__next_require__(e[0]);if(4===e.length&&"function"==typeof t.then){if("fulfilled"===t.status)t=t.value;else throw t.reason}return"*"===e[2]?t:""===e[2]?t.__esModule?t.default:t:t[e[2]]}function h(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var i=r,s=f.d,a=s.X,o=e.prefix+t[n],l=e.crossOrigin;l="string"==typeof l?"use-credentials"===l?l:"":void 0,a.call(s,o,{crossOrigin:l,nonce:i})}}var f=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,p=Symbol.for("react.transitional.element"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}var v=Symbol.asyncIterator,b=Array.isArray,_=Object.getPrototypeOf,S=Object.prototype,w=new WeakMap;function T(e){return Number.isFinite(e)?0===e&&-1/0==1/e?"$-0":e:1/0===e?"$Infinity":-1/0===e?"$-Infinity":"$NaN"}function E(e,t,r,n,i){function s(e,r){r=new Blob([new Uint8Array(r.buffer,r.byteOffset,r.byteLength)]);var n=h++;return null===g&&(g=new FormData),g.append(t+n,r),"$"+e+n.toString(16)}function a(e){function r(l){l.done?(l=h++,s.append(t+l,new Blob(o)),s.append(t+a,'"$o'+l.toString(16)+'"'),s.append(t+a,"C"),0==--f&&n(s)):(o.push(l.value),e.read(new Uint8Array(1024)).then(r,i))}null===g&&(g=new FormData);var s=g;f++;var a=h++,o=[];return e.read(new Uint8Array(1024)).then(r,i),"$r"+a.toString(16)}function o(e){function r(o){if(o.done)s.append(t+a,"C"),0==--f&&n(s);else try{var l=JSON.stringify(o.value,c);s.append(t+a,l),e.read().then(r,i)}catch(e){i(e)}}null===g&&(g=new FormData);var s=g;f++;var a=h++;return e.read().then(r,i),"$R"+a.toString(16)}function l(e){try{var t=e.getReader({mode:"byob"})}catch(t){return o(e.getReader())}return a(t)}function u(e,r){function s(e){if(e.done){if(void 0===e.value)a.append(t+o,"C");else try{var l=JSON.stringify(e.value,c);a.append(t+o,"C"+l)}catch(e){i(e);return}0==--f&&n(a)}else try{var u=JSON.stringify(e.value,c);a.append(t+o,u),r.next().then(s,i)}catch(e){i(e)}}null===g&&(g=new FormData);var a=g;f++;var o=h++;return e=e===r,r.next().then(s,i),"$"+(e?"x":"X")+o.toString(16)}function c(e,a){if(null===a)return null;if("object"==typeof a){switch(a.$$typeof){case p:if(void 0!==r&&-1===e.indexOf(":")){var o=E.get(this);if(void 0!==o)return r.set(o+":"+e,a),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case m:o=a._payload;var x=a._init;null===g&&(g=new FormData),f++;try{var I=x(o),k=h++,R=d(I,k);return g.append(t+k,R),"$"+k.toString(16)}catch(e){if("object"==typeof e&&null!==e&&"function"==typeof e.then){f++;var A=h++;return o=function(){try{var e=d(a,A),r=g;r.append(t+A,e),f--,0===f&&n(r)}catch(e){i(e)}},e.then(o,o),"$"+A.toString(16)}return i(e),null}finally{f--}}if("function"==typeof a.then){null===g&&(g=new FormData),f++;var N=h++;return a.then(function(e){try{var r=d(e,N);(e=g).append(t+N,r),f--,0===f&&n(e)}catch(e){i(e)}},i),"$@"+N.toString(16)}if(void 0!==(o=E.get(a))){if(C!==a)return o;C=null}else -1===e.indexOf(":")&&void 0!==(o=E.get(this))&&(e=o+":"+e,E.set(a,e),void 0!==r&&r.set(e,a));if(b(a))return a;if(a instanceof FormData){null===g&&(g=new FormData);var O=g,D=t+(e=h++)+"_";return a.forEach(function(e,t){O.append(D+t,e)}),"$K"+e.toString(16)}if(a instanceof Map)return e=h++,o=d(Array.from(a),e),null===g&&(g=new FormData),g.append(t+e,o),"$Q"+e.toString(16);if(a instanceof Set)return e=h++,o=d(Array.from(a),e),null===g&&(g=new FormData),g.append(t+e,o),"$W"+e.toString(16);if(a instanceof ArrayBuffer)return e=new Blob([a]),o=h++,null===g&&(g=new FormData),g.append(t+o,e),"$A"+o.toString(16);if(a instanceof Int8Array)return s("O",a);if(a instanceof Uint8Array)return s("o",a);if(a instanceof Uint8ClampedArray)return s("U",a);if(a instanceof Int16Array)return s("S",a);if(a instanceof Uint16Array)return s("s",a);if(a instanceof Int32Array)return s("L",a);if(a instanceof Uint32Array)return s("l",a);if(a instanceof Float32Array)return s("G",a);if(a instanceof Float64Array)return s("g",a);if(a instanceof BigInt64Array)return s("M",a);if(a instanceof BigUint64Array)return s("m",a);if(a instanceof DataView)return s("V",a);if("function"==typeof Blob&&a instanceof Blob)return null===g&&(g=new FormData),e=h++,g.append(t+e,a),"$B"+e.toString(16);if(e=y(a))return(o=e.call(a))===a?(e=h++,o=d(Array.from(o),e),null===g&&(g=new FormData),g.append(t+e,o),"$i"+e.toString(16)):Array.from(o);if("function"==typeof ReadableStream&&a instanceof ReadableStream)return l(a);if("function"==typeof(e=a[v]))return u(a,e.call(a));if((e=_(a))!==S&&(null===e||null!==_(e))){if(void 0===r)throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return"$T"}return a}if("string"==typeof a)return"Z"===a[a.length-1]&&this[e]instanceof Date?"$D"+a:e="$"===a[0]?"$"+a:a;if("boolean"==typeof a)return a;if("number"==typeof a)return T(a);if(void 0===a)return"$undefined";if("function"==typeof a){if(void 0!==(o=w.get(a)))return e=JSON.stringify(o,c),null===g&&(g=new FormData),o=h++,g.set(t+o,e),"$F"+o.toString(16);if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(o=E.get(this)))return r.set(o+":"+e,a),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof a){if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(o=E.get(this)))return r.set(o+":"+e,a),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof a)return"$n"+a.toString(10);throw Error("Type "+typeof a+" is not supported as an argument to a Server Function.")}function d(e,t){return"object"==typeof e&&null!==e&&(t="$"+t.toString(16),E.set(e,t),void 0!==r&&r.set(t,e)),C=e,JSON.stringify(e,c)}var h=1,f=0,g=null,E=new WeakMap,C=e,x=d(e,0);return null===g?n(x):(g.set(t+"0",x),0===f&&n(g)),function(){0<f&&(f=0,null===g?n(x):n(g))}}var C=new WeakMap;function x(e){var t,r,n=new Promise(function(e,n){t=e,r=n});return E(e,"",void 0,function(e){if("string"==typeof e){var r=new FormData;r.append("0",e),e=r}n.status="fulfilled",n.value=e,t(e)},function(e){n.status="rejected",n.reason=e,r(e)}),n}function I(e){var t=w.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=C.get(t))||(r=x(t),C.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n=new FormData;t.forEach(function(t,r){n.append("$ACTION_"+e+":"+r,t)}),r=n,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function k(e,t){var r=w.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function R(e,t,r){Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===r?I:function(){var e=w.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),r(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:k},bind:{value:O}}),w.set(e,t)}var A=Function.prototype.bind,N=Array.prototype.slice;function O(){var e=A.apply(this,arguments),t=w.get(this);if(t){var r=N.call(arguments,1),n=null;n=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),Object.defineProperties(e,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:k},bind:{value:O}}),w.set(e,{id:t.id,bound:n})}return e}function D(e,t,r){function n(){var e=Array.prototype.slice.call(arguments);return s?"fulfilled"===s.status?t(i,s.value.concat(e)):Promise.resolve(s).then(function(r){return t(i,r.concat(e))}):t(i,e)}var i=e.id,s=e.bound;return R(n,{id:i,bound:s},r),n}function P(e,t,r){function n(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return R(n,{id:e,bound:null},r),n}function M(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function L(e){switch(e.status){case"resolved_model":K(e);break;case"resolved_module":H(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":throw e;default:throw e.reason}}function j(e){return new M("pending",null,null,e)}function F(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function B(e,t,r){switch(e.status){case"fulfilled":F(t,e.value);break;case"pending":case"blocked":if(e.value)for(var n=0;n<t.length;n++)e.value.push(t[n]);else e.value=t;if(e.reason){if(r)for(t=0;t<r.length;t++)e.reason.push(r[t])}else e.reason=r;break;case"rejected":r&&F(r,e.reason)}}function U(e,t){if("pending"!==e.status&&"blocked"!==e.status)e.reason.error(t);else{var r=e.reason;e.status="rejected",e.reason=t,null!==r&&F(r,t)}}function V(e,t,r){return new M("resolved_model",(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}",null,e)}function z(e,t,r){q(e,(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}")}function q(e,t){if("pending"!==e.status)e.reason.enqueueModel(t);else{var r=e.value,n=e.reason;e.status="resolved_model",e.value=t,null!==r&&(K(e),B(e,r,n))}}function $(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&(H(e),B(e,r,n))}}M.prototype=Object.create(Promise.prototype),M.prototype.then=function(e,t){switch(this.status){case"resolved_model":K(this);break;case"resolved_module":H(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t&&t(this.reason)}};var W=null;function K(e){var t=W;W=null;var r=e.value;e.status="blocked",e.value=null,e.reason=null;try{var n=JSON.parse(r,e._response._fromJSON),i=e.value;if(null!==i&&(e.value=null,e.reason=null,F(i,n)),null!==W){if(W.errored)throw W.value;if(0<W.deps){W.value=n,W.chunk=e;return}}e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}finally{W=t}}function H(e){try{var t=d(e.value);e.status="fulfilled",e.value=t}catch(t){e.status="rejected",e.reason=t}}function G(e,t){e._chunks.forEach(function(e){"pending"===e.status&&U(e,t)})}function Z(e){return{$$typeof:m,_payload:e,_init:L}}function Q(e,t){var r=e._chunks,n=r.get(t);return n||(n=j(e),r.set(t,n)),n}function Y(e,t,r,n,i,s){function a(e){for(var u=1;u<s.length;u++){for(;e.$$typeof===m;)if((e=e._payload)===l.chunk)e=l.value;else if("fulfilled"===e.status)e=e.value;else{s.splice(0,u-1),e.then(a,o);return}e=e[s[u]]}u=i(n,e,t,r),t[r]=u,""===r&&null===l.value&&(l.value=u),t[0]===p&&"object"==typeof l.value&&null!==l.value&&l.value.$$typeof===p&&(e=l.value,"3"===r)&&(e.props=u),l.deps--,0===l.deps&&null!==(u=l.chunk)&&"blocked"===u.status&&(e=u.value,u.status="fulfilled",u.value=l.value,null!==e&&F(e,l.value))}function o(e){if(!l.errored){l.errored=!0,l.value=e;var t=l.chunk;null!==t&&"blocked"===t.status&&U(t,e)}}if(W){var l=W;l.deps++}else l=W={parent:null,chunk:null,value:null,deps:1,errored:!1};return e.then(a,o),null}function X(e,t,r,n){if(!e._serverReferenceConfig)return D(t,e._callServer,e._encodeFormAction);var i=a(e._serverReferenceConfig,t.id);if(e=c(i))t.bound&&(e=Promise.all([e,t.bound]));else{if(!t.bound)return d(i);e=Promise.resolve(t.bound)}if(W){var s=W;s.deps++}else s=W={parent:null,chunk:null,value:null,deps:1,errored:!1};return e.then(function(){var e=d(i);if(t.bound){var a=t.bound.value.slice(0);a.unshift(null),e=e.bind.apply(e,a)}r[n]=e,""===n&&null===s.value&&(s.value=e),r[0]===p&&"object"==typeof s.value&&null!==s.value&&s.value.$$typeof===p&&(a=s.value,"3"===n)&&(a.props=e),s.deps--,0===s.deps&&null!==(e=s.chunk)&&"blocked"===e.status&&(a=e.value,e.status="fulfilled",e.value=s.value,null!==a&&F(a,s.value))},function(e){if(!s.errored){s.errored=!0,s.value=e;var t=s.chunk;null!==t&&"blocked"===t.status&&U(t,e)}}),null}function J(e,t,r,n,i){var s=parseInt((t=t.split(":"))[0],16);switch((s=Q(e,s)).status){case"resolved_model":K(s);break;case"resolved_module":H(s)}switch(s.status){case"fulfilled":var a=s.value;for(s=1;s<t.length;s++){for(;a.$$typeof===m;)if("fulfilled"!==(a=a._payload).status)return Y(a,r,n,e,i,t.slice(s-1));else a=a.value;a=a[t[s]]}return i(e,a,r,n);case"pending":case"blocked":return Y(s,r,n,e,i,t);default:return W?(W.errored=!0,W.value=s.reason):W={parent:null,chunk:null,value:s.reason,deps:0,errored:!0},null}}function ee(e,t){return new Map(t)}function et(e,t){return new Set(t)}function er(e,t){return new Blob(t.slice(1),{type:t[0]})}function en(e,t){e=new FormData;for(var r=0;r<t.length;r++)e.append(t[r][0],t[r][1]);return e}function ei(e,t){return t[Symbol.iterator]()}function es(e,t){return t}function ea(e,t,r,n){if("$"===n[0]){if("$"===n)return null!==W&&"0"===r&&(W={parent:W,chunk:null,value:null,deps:0,errored:!1}),p;switch(n[1]){case"$":return n.slice(1);case"L":return Z(e=Q(e,t=parseInt(n.slice(2),16)));case"@":if(2===n.length)return new Promise(function(){});return Q(e,t=parseInt(n.slice(2),16));case"S":return Symbol.for(n.slice(2));case"F":return J(e,n=n.slice(2),t,r,X);case"T":if(t="$"+n.slice(2),null==(e=e._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return e.get(t);case"Q":return J(e,n=n.slice(2),t,r,ee);case"W":return J(e,n=n.slice(2),t,r,et);case"B":return J(e,n=n.slice(2),t,r,er);case"K":return J(e,n=n.slice(2),t,r,en);case"Z":return eg();case"i":return J(e,n=n.slice(2),t,r,ei);case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2));default:return J(e,n=n.slice(1),t,r,es)}}return n}function eo(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function el(e,t,r,n,i,s,a){var o=new Map;this._bundlerConfig=e,this._serverReferenceConfig=t,this._moduleLoading=r,this._callServer=void 0!==n?n:eo,this._encodeFormAction=i,this._nonce=s,this._chunks=o,this._stringDecoder=new TextDecoder,this._fromJSON=null,this._rowLength=this._rowTag=this._rowID=this._rowState=0,this._buffer=[],this._tempRefs=a,this._fromJSON=e_(this)}function eu(e,t,r){var n=e._chunks,i=n.get(t);i&&"pending"!==i.status?i.reason.enqueueValue(r):n.set(t,new M("fulfilled",r,null,e))}function ec(e,t,r){var n=e._chunks,i=n.get(t);r=JSON.parse(r,e._fromJSON);var a=s(e._bundlerConfig,r);if(h(e._moduleLoading,r[1],e._nonce),r=c(a)){if(i){var o=i;o.status="blocked"}else o=new M("blocked",null,null,e),n.set(t,o);r.then(function(){return $(o,a)},function(e){return U(o,e)})}else i?$(i,a):n.set(t,new M("resolved_module",a,null,e))}function ed(e,t,r,n){var i=e._chunks,s=i.get(t);s?"pending"===s.status&&(e=s.value,s.status="fulfilled",s.value=r,s.reason=n,null!==e&&F(e,s.value)):i.set(t,new M("fulfilled",r,n,e))}function eh(e,t,r){var n=null;r=new ReadableStream({type:r,start:function(e){n=e}});var i=null;ed(e,t,r,{enqueueValue:function(e){null===i?n.enqueue(e):i.then(function(){n.enqueue(e)})},enqueueModel:function(t){if(null===i){var r=new M("resolved_model",t,null,e);K(r),"fulfilled"===r.status?n.enqueue(r.value):(r.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=r)}else{r=i;var s=j(e);s.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=s,r.then(function(){i===s&&(i=null),q(s,t)})}},close:function(){if(null===i)n.close();else{var e=i;i=null,e.then(function(){return n.close()})}},error:function(e){if(null===i)n.error(e);else{var t=i;i=null,t.then(function(){return n.error(e)})}}})}function ef(){return this}function ep(e){return(e={next:e})[v]=ef,e}function em(e,t,r){var n=[],i=!1,s=0,a={};a[v]=function(){var t=0;return ep(function(r){if(void 0!==r)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(t===n.length){if(i)return new M("fulfilled",{done:!0,value:void 0},null,e);n[t]=j(e)}return n[t++]})},ed(e,t,r?a[v]():a,{enqueueValue:function(t){if(s===n.length)n[s]=new M("fulfilled",{done:!1,value:t},null,e);else{var r=n[s],i=r.value,a=r.reason;r.status="fulfilled",r.value={done:!1,value:t},null!==i&&B(r,i,a)}s++},enqueueModel:function(t){s===n.length?n[s]=V(e,t,!1):z(n[s],t,!1),s++},close:function(t){for(i=!0,s===n.length?n[s]=V(e,t,!0):z(n[s],t,!0),s++;s<n.length;)z(n[s++],'"$undefined"',!0)},error:function(t){for(i=!0,s===n.length&&(n[s]=j(e));s<n.length;)U(n[s++],t)}})}function eg(){var e=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return e.stack="Error: "+e.message,e}function ey(e,t){for(var r=e.length,n=t.length,i=0;i<r;i++)n+=e[i].byteLength;n=new Uint8Array(n);for(var s=i=0;s<r;s++){var a=e[s];n.set(a,i),i+=a.byteLength}return n.set(t,i),n}function ev(e,t,r,n,i,s){eu(e,t,i=new i((r=0===r.length&&0==n.byteOffset%s?n:ey(r,n)).buffer,r.byteOffset,r.byteLength/s))}function eb(e,t,r,n,s){switch(r){case 65:eu(e,t,ey(n,s).buffer);return;case 79:ev(e,t,n,s,Int8Array,1);return;case 111:eu(e,t,0===n.length?s:ey(n,s));return;case 85:ev(e,t,n,s,Uint8ClampedArray,1);return;case 83:ev(e,t,n,s,Int16Array,2);return;case 115:ev(e,t,n,s,Uint16Array,2);return;case 76:ev(e,t,n,s,Int32Array,4);return;case 108:ev(e,t,n,s,Uint32Array,4);return;case 71:ev(e,t,n,s,Float32Array,4);return;case 103:ev(e,t,n,s,Float64Array,8);return;case 77:ev(e,t,n,s,BigInt64Array,8);return;case 109:ev(e,t,n,s,BigUint64Array,8);return;case 86:ev(e,t,n,s,DataView,1);return}for(var a=e._stringDecoder,o="",l=0;l<n.length;l++)o+=a.decode(n[l],i);switch(n=o+=a.decode(s),r){case 73:ec(e,t,n);break;case 72:switch(t=n[0],e=JSON.parse(n=n.slice(1),e._fromJSON),n=f.d,t){case"D":n.D(e);break;case"C":"string"==typeof e?n.C(e):n.C(e[0],e[1]);break;case"L":t=e[0],r=e[1],3===e.length?n.L(t,r,e[2]):n.L(t,r);break;case"m":"string"==typeof e?n.m(e):n.m(e[0],e[1]);break;case"X":"string"==typeof e?n.X(e):n.X(e[0],e[1]);break;case"S":"string"==typeof e?n.S(e):n.S(e[0],0===e[1]?void 0:e[1],3===e.length?e[2]:void 0);break;case"M":"string"==typeof e?n.M(e):n.M(e[0],e[1])}break;case 69:r=JSON.parse(n),(n=eg()).digest=r.digest,(s=(r=e._chunks).get(t))?U(s,n):r.set(t,new M("rejected",null,n,e));break;case 84:(s=(r=e._chunks).get(t))&&"pending"!==s.status?s.reason.enqueueValue(n):r.set(t,new M("fulfilled",n,null,e));break;case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:eh(e,t,void 0);break;case 114:eh(e,t,"bytes");break;case 88:em(e,t,!1);break;case 120:em(e,t,!0);break;case 67:(e=e._chunks.get(t))&&"fulfilled"===e.status&&e.reason.close(""===n?'"$undefined"':n);break;default:(s=(r=e._chunks).get(t))?q(s,n):r.set(t,new M("resolved_model",n,null,e))}}function e_(e){return function(t,r){if("string"==typeof r)return ea(e,this,t,r);if("object"==typeof r&&null!==r){if(r[0]===p){if(t={$$typeof:p,type:r[1],key:r[2],ref:null,props:r[3]},null!==W){if(W=(r=W).parent,r.errored)t=Z(t=new M("rejected",null,r.value,e));else if(0<r.deps){var n=new M("blocked",null,null,e);r.value=t,r.chunk=n,t=Z(n)}}}else t=r;return t}return r}}function eS(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function ew(e){return new el(e.serverConsumerManifest.moduleMap,e.serverConsumerManifest.serverModuleMap,e.serverConsumerManifest.moduleLoading,eS,e.encodeFormAction,"string"==typeof e.nonce?e.nonce:void 0,e&&e.temporaryReferences?e.temporaryReferences:void 0)}function eT(e,t){function r(t){var s=t.value;if(t.done)G(e,Error("Connection closed."));else{var a=0,o=e._rowState;t=e._rowID;for(var l=e._rowTag,u=e._rowLength,c=e._buffer,d=s.length;a<d;){var h=-1;switch(o){case 0:58===(h=s[a++])?o=1:t=t<<4|(96<h?h-87:h-48);continue;case 1:84===(o=s[a])||65===o||79===o||111===o||85===o||83===o||115===o||76===o||108===o||71===o||103===o||77===o||109===o||86===o?(l=o,o=2,a++):64<o&&91>o||35===o||114===o||120===o?(l=o,o=3,a++):(l=0,o=3);continue;case 2:44===(h=s[a++])?o=4:u=u<<4|(96<h?h-87:h-48);continue;case 3:h=s.indexOf(10,a);break;case 4:(h=a+u)>s.length&&(h=-1)}var f=s.byteOffset+a;if(-1<h)eb(e,t,l,c,u=new Uint8Array(s.buffer,f,h-a)),a=h,3===o&&a++,u=t=l=o=0,c.length=0;else{s=new Uint8Array(s.buffer,f,s.byteLength-a),c.push(s),u-=s.byteLength;break}}return e._rowState=o,e._rowID=t,e._rowTag=l,e._rowLength=u,i.read().then(r).catch(n)}}function n(t){G(e,t)}var i=t.getReader();i.read().then(r).catch(n)}t.createFromFetch=function(e,t){var r=ew(t);return e.then(function(e){eT(r,e.body)},function(e){G(r,e)}),Q(r,0)},t.createFromReadableStream=function(e,t){return eT(t=ew(t),e),Q(t,0)},t.createServerReference=function(e){return P(e,eS)},t.createTemporaryReferenceSet=function(){return new Map},t.encodeReply=function(e,t){return new Promise(function(r,n){var i=E(e,"",t&&t.temporaryReferences?t.temporaryReferences:void 0,r,n);if(t&&t.signal){var s=t.signal;if(s.aborted)i(s.reason);else{var a=function(){i(s.reason),s.removeEventListener("abort",a)};s.addEventListener("abort",a)}}})}},8301:(e,t,r)=>{"use strict";e.exports=r(5759)},771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fillMetadataSegment:function(){return h},normalizeMetadataPageToRoute:function(){return p},normalizeMetadataRoute:function(){return f}});let n=r(5847),i=c(r(2002)),s=r(9922),a=r(7716),o=r(7450),l=r(7613),u=r(9964);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){let t="";return(e.includes("(")&&e.includes(")")||e.includes("@"))&&(t=(0,o.djb2Hash)(e).toString(36).slice(0,6)),t}function h(e,t,r){let n=(0,l.normalizeAppPath)(e),o=(0,a.getNamedRouteRegex)(n,!1),c=(0,s.interpolateDynamicPath)(n,t,o),h=d(e),f=h?`-${h}`:"",{name:p,ext:m}=i.default.parse(r);return(0,u.normalizePathSep)(i.default.join(c,`${p}${f}${m}`))}function f(e){if(!(0,n.isMetadataRoute)(e))return e;let t=e,r="";if("/robots"===e?t+=".txt":"/manifest"===e?t+=".webmanifest":r=d(e.slice(0,-(i.default.basename(e).length+1))),!t.endsWith("/route")){let{dir:e,name:n,ext:s}=i.default.parse(t);t=i.default.posix.join(e,`${n}${r?`-${r}`:""}${s}`,"route")}return t}function p(e,t){let r=e.endsWith("/route"),n=r?e.slice(0,-6):e,i=n.endsWith("/sitemap")?".xml":"";return(t?`${n}/[__metadata_id__]`:`${n}${i}`)+(r?"/route":"")}},5847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{STATIC_METADATA_IMAGES:function(){return i},getExtensionRegexString:function(){return a},isMetadataRoute:function(){return c},isMetadataRouteFile:function(){return o},isStaticMetadataRoute:function(){return u},isStaticMetadataRouteFile:function(){return l}});let n=r(9964),i={icon:{filename:"icon",extensions:["ico","jpg","jpeg","png","svg"]},apple:{filename:"apple-icon",extensions:["jpg","jpeg","png"]},favicon:{filename:"favicon",extensions:["ico"]},openGraph:{filename:"opengraph-image",extensions:["jpg","jpeg","png","gif"]},twitter:{filename:"twitter-image",extensions:["jpg","jpeg","png","gif"]}},s=["js","jsx","ts","tsx"],a=(e,t)=>t?`(?:\\.(${e.join("|")})|((\\[\\])?\\.(${t.join("|")})))`:`\\.(?:${e.join("|")})`;function o(e,t,r){let s=[RegExp(`^[\\\\/]robots${r?`${a(t.concat("txt"),null)}$`:""}`),RegExp(`^[\\\\/]manifest${r?`${a(t.concat("webmanifest","json"),null)}$`:""}`),RegExp("^[\\\\/]favicon\\.ico$"),RegExp(`[\\\\/]sitemap${r?`${a(["xml"],t)}$`:""}`),RegExp(`[\\\\/]${i.icon.filename}\\d?${r?`${a(i.icon.extensions,t)}$`:""}`),RegExp(`[\\\\/]${i.apple.filename}\\d?${r?`${a(i.apple.extensions,t)}$`:""}`),RegExp(`[\\\\/]${i.openGraph.filename}\\d?${r?`${a(i.openGraph.extensions,t)}$`:""}`),RegExp(`[\\\\/]${i.twitter.filename}\\d?${r?`${a(i.twitter.extensions,t)}$`:""}`)],o=(0,n.normalizePathSep)(e);return s.some(e=>e.test(o))}function l(e){return o(e,[],!0)}function u(e){return"/robots"===e||"/manifest"===e||l(e)}function c(e){let t=e.replace(/^\/?app\//,"").replace(/\/route$/,"");return"/"!==t[0]&&(t="/"+t),!t.endsWith("/page")&&o(t,s,!1)}},304:(e,t,r)=>{"use strict";function n(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:n}=r(2379);return n(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return n}})},9067:(e,t)=>{"use strict";let r;function n(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function i(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function s(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function a(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return n},decrypt:function(){return a},encrypt:function(){return s},getActionEncryptionKey:function(){return d},getClientReferenceManifestSingleton:function(){return c},getServerModuleMap:function(){return u},setReferenceManifestsSingleton:function(){return l},stringToUint8Array:function(){return i}});let o=Symbol.for("next.server.action-manifests");function l({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}){globalThis[o]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}}function u(){let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function c(){let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function d(){if(r)return r;let e=globalThis[o];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return r=await crypto.subtle.importKey("raw",i(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return f},encryptActionBoundArgs:function(){return h}}),r(4625);let n=r(8093),i=r(8301),s=r(3415),a=r(9067),o=!1,l=new TextEncoder,u=new TextDecoder;async function c(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),i=n.slice(0,16),s=n.slice(16),o=u.decode(await (0,a.decrypt)(r,(0,a.stringToUint8Array)(i),(0,a.stringToUint8Array)(s)));if(!o.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return o.slice(e.length)}async function d(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);crypto.getRandomValues(n);let i=(0,a.arrayBufferToString)(n.buffer),s=await (0,a.encrypt)(r,n,l.encode(e+t));return btoa(i+(0,a.arrayBufferToString)(s))}async function h(e,t){let r=(0,a.getClientReferenceManifestSingleton)(),i=await (0,s.streamToString)((0,n.renderToReadableStream)(t,r.clientModules));return await d(e,i)}async function f(e,t){let r=(0,a.getClientReferenceManifestSingleton)(),n=await c(e,await t);return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(l.encode(n)),e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:o?r.edgeRscModuleMapping:r.rscModuleMapping,serverModuleMap:(0,a.getServerModuleMap)()}})}},666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},extractInterceptionRouteInformation:function(){return a},isInterceptionRouteAppPath:function(){return s}});let n=r(7613),i=["(..)(..)","(.)","(..)","(...)"];function s(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function a(e){let t,r,s;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,s]=e.split(r,2);break}if(!t||!r||!s)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":s="/"===t?`/${s}`:t+"/"+s;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);s=t.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);s=a.slice(0,-2).concat(s).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:s}}},9922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getUtils:function(){return m},interpolateDynamicPath:function(){return f},normalizeDynamicRouteParams:function(){return p},normalizeVercelUrl:function(){return h}});let n=r(7360),i=r(934),s=r(9200),a=r(7716),o=r(4398),l=r(5442),u=r(7175),c=r(7613),d=r(4674);function h(e,t,r,i,s){if(i&&t&&s){let t=(0,n.parse)(e.url,!0);for(let e of(delete t.search,Object.keys(t.query))){let n=e!==d.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(d.NEXT_QUERY_PARAM_PREFIX),i=e!==d.NEXT_INTERCEPTION_MARKER_PREFIX&&e.startsWith(d.NEXT_INTERCEPTION_MARKER_PREFIX);(n||i||(r||Object.keys(s.groups)).includes(e))&&delete t.query[e]}e.url=(0,n.format)(t)}}function f(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let i;let{optional:s,repeat:a}=r.groups[n],o=`[${a?"...":""}${n}]`;s&&(o=`[${o}]`);let l=t[n];i=Array.isArray(l)?l.map(e=>e&&encodeURIComponent(e)).join("/"):l?encodeURIComponent(l):"",e=e.replaceAll(o,i)}return e}function p(e,t,r,n){let i=!0;return r?{params:e=Object.keys(r.groups).reduce((s,a)=>{let o=e[a];"string"==typeof o&&(o=(0,c.normalizeRscURL)(o)),Array.isArray(o)&&(o=o.map(e=>("string"==typeof e&&(e=(0,c.normalizeRscURL)(e)),e)));let l=n[a],u=r.groups[a].optional;return((Array.isArray(l)?l.some(e=>Array.isArray(o)?o.some(t=>t.includes(e)):null==o?void 0:o.includes(e)):null==o?void 0:o.includes(l))||void 0===o&&!(u&&t))&&(i=!1),u&&(!o||Array.isArray(o)&&1===o.length&&("index"===o[0]||o[0]===`[[...${a}]]`))&&(o=void 0,delete e[a]),o&&"string"==typeof o&&r.groups[a].repeat&&(o=o.split("/")),o&&(s[a]=o),s},{}),hasValidParams:i}:{params:e,hasValidParams:!1}}function m({page:e,i18n:t,basePath:r,rewrites:n,pageIsDynamic:c,trailingSlash:m,caseSensitive:g}){let y,v,b;function _(e,r,n){return(0,o.getRouteMatcher)(function(){let{groups:e,routeKeys:i}=y;return{re:{exec:s=>{let a=Object.fromEntries(new URLSearchParams(s)),o=t&&n&&a["1"]===n;for(let e of Object.keys(a)){let t=a[e];e!==d.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(d.NEXT_QUERY_PARAM_PREFIX)&&(a[e.substring(d.NEXT_QUERY_PARAM_PREFIX.length)]=t,delete a[e])}let l=Object.keys(i||{}),u=e=>{if(t){let i=Array.isArray(e),s=i?e[0]:e;if("string"==typeof s&&t.locales.some(e=>e.toLowerCase()===s.toLowerCase()&&(n=e,r.locale=n,!0)))return i&&e.splice(0,1),!i||0===e.length}return!1};return l.every(e=>a[e])?l.reduce((t,r)=>{let n=null==i?void 0:i[r];return n&&!u(a[r])&&(t[e[n].pos]=a[r]),t},{}):Object.keys(a).reduce((e,t)=>{if(!u(a[t])){let r=t;return o&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:a[t]})}return e},{})}},groups:e}}())(e.headers["x-now-route-matches"])}return c&&(y=(0,a.getNamedRouteRegex)(e,!1),b=(v=(0,o.getRouteMatcher)(y))(e)),{handleRewrites:function(a,o){let d={},h=o.pathname,f=()=>{let t=(0,u.removeTrailingSlash)(h||"");return t===(0,u.removeTrailingSlash)(e)||(null==v?void 0:v(t))},p=n=>{let u=(0,s.getPathMatch)(n.source+(m?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!g})(o.pathname);if((n.has||n.missing)&&u){let e=(0,l.matchHas)(a,o.query,n.has,n.missing);e?Object.assign(u,e):u=!1}if(u){let{parsedDestination:s,destQuery:a}=(0,l.prepareDestination)({appendParamsToQuery:!0,destination:n.destination,params:u,query:o.query});if(s.protocol)return!0;if(Object.assign(d,a,u),Object.assign(o.query,s.query),delete s.query,Object.assign(o,s),h=o.pathname,r&&(h=h.replace(RegExp(`^${r}`),"")||"/"),t){let e=(0,i.normalizeLocalePath)(h,t.locales);h=e.pathname,o.query.nextInternalLocale=e.detectedLocale||u.nextInternalLocale}if(h===e)return!0;if(c&&v){let e=v(h);if(e)return o.query={...o.query,...e},!0}}return!1};for(let e of n.beforeFiles||[])p(e);if(h!==e){let e=!1;for(let t of n.afterFiles||[])if(e=p(t))break;if(!e&&!f()){for(let t of n.fallback||[])if(e=p(t))break}}return d},defaultRouteRegex:y,dynamicRouteMatcher:v,defaultRouteMatches:b,getParamsFromRouteMatches:_,normalizeDynamicRouteParams:(e,t)=>p(e,t,y,b),normalizeVercelUrl:(e,t,r)=>h(e,t,r,c,y),interpolateDynamicPath:(e,t)=>f(e,t,y)}}},329:(e,t,r)=>{"use strict";var n;function i(e){throw Error("cacheLife() is only available with the experimental.dynamicIO config.")}n={value:!0},Object.defineProperty(t,"R",{enumerable:!0,get:function(){return i}}),r(9348),r(412)},9577:(e,t,r)=>{"use strict";var n;function i(...e){throw Error("cacheTag() is only available with the experimental.dynamicIO config.")}n={value:!0},Object.defineProperty(t,"H",{enumerable:!0,get:function(){return i}}),r(412),r(4147)},7018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return c},revalidateTag:function(){return u}});let n=r(3887),i=r(8274),s=r(4674),a=r(9348),o=r(412),l=r(1513);function u(e){return d(e,`revalidateTag ${e}`)}function c(e,t){if(e.length>s.NEXT_CACHE_SOFT_TAG_MAX_LENGTH){console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${s.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);return}let r=`${s.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,i.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),d(r,`revalidatePath ${e}`)}function d(e,t){let r=a.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Error(`Invariant: static generation store missing in ${t}`);let i=o.workUnitAsyncStorage.getStore();if(i){if("cache"===i.type)throw Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("unstable-cache"===i.type)throw Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("render"===i.phase)throw Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if("prerender"===i.type){let e=Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`);(0,n.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,i)}else if("prerender-ppr"===i.type)(0,n.postponeWithTracking)(r.route,t,i.dynamicTracking);else if("prerender-legacy"===i.type){i.revalidate=0;let e=new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}r.revalidatedTags||(r.revalidatedTags=[]),r.revalidatedTags.includes(e)||r.revalidatedTags.push(e),r.pathWasRevalidated=!0}},753:(e,t,r)=>{"use strict";var n;n={value:!0},Object.defineProperty(t,"A",{enumerable:!0,get:function(){return d}});let i=r(4674),s=r(4147),a=r(9348),o=r(412),l=r(8782),u=0;async function c(e,t,r,n,s,a,o){await t.set(r,{kind:l.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof s?i.CACHE_ONE_YEAR:s},{revalidate:s,fetchCache:!0,tags:n,fetchIdx:a,fetchUrl:o})}function d(e,t,r={}){if(0===r.revalidate)throw Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`);let n=r.tags?(0,s.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,s.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let i=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let s=a.workAsyncStorage.getStore(),d=o.workUnitAsyncStorage.getStore(),h=(null==s?void 0:s.incrementalCache)||globalThis.__incrementalCache;if(!h)throw Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`);let f=h,p=d&&"prerender"===d.type?d.cacheSignal:null;p&&p.beginRead();try{let a=d&&"request"===d.type?d:void 0,h=(null==a?void 0:a.url.pathname)??(null==s?void 0:s.route)??"",p=new URLSearchParams((null==a?void 0:a.url.search)??""),m=[...p.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${p.get(e)}`).join("&"),g=`${i}-${JSON.stringify(t)}`,y=await f.generateCacheKey(g),v=`unstable_cache ${h}${m.length?"?":""}${m} ${e.name?` ${e.name}`:y}`,b=(s?s.nextFetchId:u)??1;if(s){if(s.nextFetchId=b+1,d&&("cache"===d.type||"prerender"===d.type||"prerender-ppr"===d.type||"prerender-legacy"===d.type)){"number"==typeof r.revalidate&&(d.revalidate<r.revalidate||(d.revalidate=r.revalidate));let e=d.tags;if(null===e)d.tags=n.slice();else for(let t of n)e.includes(t)||e.push(t)}let i=d&&"unstable-cache"!==d.type?d.implicitTags:[];if(!(d&&"unstable-cache"===d.type)&&"force-no-store"!==s.fetchCache&&!s.isOnDemandRevalidate&&!f.isOnDemandRevalidate&&!s.isDraftMode){let a=await f.get(y,{kind:l.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,softTags:i,fetchIdx:b,fetchUrl:v,isFallback:!1});if(a&&a.value){if(a.value.kind!==l.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else{let i=void 0!==a.value.data.body?JSON.parse(a.value.data.body):void 0;if(a.isStale){s.pendingRevalidates||(s.pendingRevalidates={});let i={type:"unstable-cache",phase:"render"};s.pendingRevalidates[g]=o.workUnitAsyncStorage.run(i,e,...t).then(e=>c(e,f,y,n,r.revalidate,b,v)).catch(e=>console.error(`revalidating cache with key: ${g}`,e))}return i}}}let a={type:"unstable-cache",phase:"render"},u=await o.workUnitAsyncStorage.run(a,e,...t);return s.isDraftMode||c(u,f,y,n,r.revalidate,b,v),u}{if(u+=1,!f.isOnDemandRevalidate){let e=d&&"unstable-cache"!==d.type?d.implicitTags:[],t=await f.get(y,{kind:l.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,fetchIdx:b,fetchUrl:v,softTags:e,isFallback:!1});if(t&&t.value){if(t.value.kind!==l.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else if(!t.isStale)return void 0!==t.value.data.body?JSON.parse(t.value.data.body):void 0}}let i={type:"unstable-cache",phase:"render"},s=await o.workUnitAsyncStorage.run(i,e,...t);return c(s,f,y,n,r.revalidate,b,v),s}}finally{p&&p.endRead()}}}},5921:(e,t,r)=>{"use strict";var n;n={value:!0},Object.defineProperty(t,"P",{enumerable:!0,get:function(){return o}});let i=r(9348),s=r(412),a=r(3887);function o(){let e="unstable_noStore()",t=i.workAsyncStorage.getStore(),r=s.workUnitAsyncStorage.getStore();return t?t.forceStatic?void 0:void(t.isUnstableNoStore=!0,r&&"prerender"===r.type||(0,a.markCurrentScopeAsDynamic)(t,r,e)):void 0}},5316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},7450:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&0xffffffff;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},2531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},9964:(e,t)=>{"use strict";function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},7613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return a}});let n=r(2531),i=r(9154);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},8274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n.getSortedRouteObjects},getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return i.isDynamicRoute}});let n=r(9940),i=r(710)},710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(666),i=/\/\[[^/]+?\](?=\/|$)/;function s(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),i.test(e)}},1631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return i}}),r(8091);let n=r(5291);function i(e,t,r){void 0===r&&(r=!0);let i=new URL("http://n"),s=t?new URL(t,i):e.startsWith(".")?new URL("http://n"):i,{pathname:a,searchParams:o,search:l,hash:u,href:c,origin:d}=new URL(e,s);if(d!==i.origin)throw Error("invariant: invalid relative URL, router received "+e);return{pathname:a,query:r?(0,n.searchParamsToUrlQuery)(o):void 0,search:l,hash:u,href:c.slice(d.length)}}},7720:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return s}});let n=r(5291),i=r(1631);function s(e){if(e.startsWith("/"))return(0,i.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,n.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},9200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return i}});let n=r(1385);function i(e,t){let r=[],i=(0,n.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),s=(0,n.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(i.source),i.flags):i,r);return(e,n)=>{if("string"!=typeof e)return!1;let i=s(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete i.params[e.name];return{...n,...i.params}}}},5442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{compileNonPath:function(){return f},matchHas:function(){return h},prepareDestination:function(){return p}});let n=r(1385),i=r(5316),s=r(7720),a=r(666),o=r(2519),l=r(304);function u(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}function c(e,t){return e.replace(RegExp(":"+(0,i.escapeStringRegexp)(t),"g"),"__ESC_COLON_"+t)}function d(e){return e.replace(/__ESC_COLON_/gi,":")}function h(e,t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);let i={},s=r=>{let n;let s=r.key;switch(r.type){case"header":s=s.toLowerCase(),n=e.headers[s];break;case"cookie":n="cookies"in e?e.cookies[r.key]:(0,l.getCookieParser)(e.headers)()[r.key];break;case"query":n=t[s];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};n=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&n)return i[u(s)]=n,!0;if(n){let e=RegExp("^"+r.value+"$"),t=Array.isArray(n)?n.slice(-1)[0].match(e):n.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{i[e]=t.groups[e]}):"host"===r.type&&t[0]&&(i.host=t[0])),!0}return!1};return!!r.every(e=>s(e))&&!n.some(e=>s(e))&&i}function f(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,n.compile)("/"+e,{validate:!1})(t).slice(1)}function p(e){let t;let r=Object.assign({},e.query);delete r.__nextLocale,delete r.__nextDefaultLocale,delete r.__nextDataReq,delete r.__nextInferredLocaleFromDefault,delete r[o.NEXT_RSC_UNION_QUERY];let i=e.destination;for(let t of Object.keys({...e.params,...r}))i=t?c(i,t):i;let l=(0,s.parseUrl)(i),u=l.query,h=d(""+l.pathname+(l.hash||"")),p=d(l.hostname||""),m=[],g=[];(0,n.pathToRegexp)(h,m),(0,n.pathToRegexp)(p,g);let y=[];m.forEach(e=>y.push(e.name)),g.forEach(e=>y.push(e.name));let v=(0,n.compile)(h,{validate:!1}),b=(0,n.compile)(p,{validate:!1});for(let[t,r]of Object.entries(u))Array.isArray(r)?u[t]=r.map(t=>f(d(t),e.params)):"string"==typeof r&&(u[t]=f(d(r),e.params));let _=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!_.some(e=>y.includes(e)))for(let t of _)t in u||(u[t]=e.params[t]);if((0,a.isInterceptionRouteAppPath)(h))for(let t of h.split("/")){let r=a.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){"(..)(..)"===r?(e.params["0"]="(..)",e.params["1"]="(..)"):e.params["0"]=r;break}}try{let[r,n]=(t=v(e.params)).split("#",2);l.hostname=b(e.params),l.pathname=r,l.hash=(n?"#":"")+(n||""),delete l.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return l.query={...r,...l.query},{newUrl:t,destQuery:u,parsedDestination:l}}},5291:(e,t)=>{"use strict";function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function n(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,i]=e;Array.isArray(i)?i.forEach(e=>t.append(r,n(e))):t.set(r,n(i))}),t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return s},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i}})},4398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(8091);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new n.DecodeError("failed to decode param")}},a={};return Object.keys(r).forEach(e=>{let t=r[e],n=i[t.pos];void 0!==n&&(a[e]=~n.indexOf("/")?n.split("/").map(e=>s(e)):t.repeat?[s(n)]:s(n))}),a}}},7716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return g},getNamedRouteRegex:function(){return m},getRouteRegex:function(){return d},parseParameter:function(){return l}});let n=r(4674),i=r(666),s=r(5316),a=r(7175),o=/\[((?:\[.*\])|.+)\]/;function l(e){let t=e.match(o);return t?u(t[1]):u(e)}function u(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function c(e){let t=(0,a.removeTrailingSlash)(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=i.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),a=e.match(o);if(t&&a){let{key:e,optional:i,repeat:o}=u(a[1]);return r[e]={pos:n++,repeat:o,optional:i},"/"+(0,s.escapeStringRegexp)(t)+"([^/]+?)"}if(!a)return"/"+(0,s.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:i}=u(a[1]);return r[e]={pos:n++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function d(e){let{parameterizedRoute:t,groups:r}=c(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function h(){let e=0;return()=>{let t="",r=++e;for(;r>0;)t+=String.fromCharCode(97+(r-1)%26),r=Math.floor((r-1)/26);return t}}function f(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:i,keyPrefix:a}=e,{key:o,optional:l,repeat:c}=u(n),d=o.replace(/\W/g,"");a&&(d=""+a+d);let h=!1;(0===d.length||d.length>30)&&(h=!0),isNaN(parseInt(d.slice(0,1)))||(h=!0),h&&(d=r()),a?i[d]=""+a+o:i[d]=o;let f=t?(0,s.escapeStringRegexp)(t):"";return c?l?"(?:/"+f+"(?<"+d+">.+?))?":"/"+f+"(?<"+d+">.+?)":"/"+f+"(?<"+d+">[^/]+?)"}function p(e,t){let r=(0,a.removeTrailingSlash)(e).slice(1).split("/"),o=h(),l={};return{namedParameterizedRoute:r.map(e=>{let r=i.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),a=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&a){let[r]=e.split(a[0]);return f({getSafeRouteKey:o,interceptionMarker:r,segment:a[1],routeKeys:l,keyPrefix:t?n.NEXT_INTERCEPTION_MARKER_PREFIX:void 0})}return a?f({getSafeRouteKey:o,segment:a[1],routeKeys:l,keyPrefix:t?n.NEXT_QUERY_PARAM_PREFIX:void 0}):"/"+(0,s.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function m(e,t){let r=p(e,t);return{...d(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function g(e,t){let{parameterizedRoute:r}=c(e),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=p(e,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},9940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return i},getSortedRoutes:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let i=e[0];if(i.startsWith("[")&&i.endsWith("]")){let r=i.slice(1,-1),a=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),a=!0),r.startsWith("…"))throw Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?");if(r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function s(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===i.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(a){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');s(this.optionalRestSlugName,r),this.optionalRestSlugName=r,i="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');s(this.restSlugName,r),this.restSlugName=r,i="[...]"}}else{if(a)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');s(this.slugName,r),this.slugName=r,i="[]"}}this.children.has(i)||this.children.set(i,new r),this.children.get(i)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function i(e,t){let r={},i=[];for(let n=0;n<e.length;n++){let s=t(e[n]);r[s]=n,i[n]=s}return n(i).map(t=>e[r[t]])}},8091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return a},getURL:function(){return o},isAbsoluteUrl:function(){return s},isResSent:function(){return u},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return r||(r=!0,t=e(...i)),t}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function a(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=a();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},2802:(e,t,r)=>{"use strict";var n=r(8154);e.exports=t=n.descriptor=n.Root.fromJSON(r(4552)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,a=n.Enum,o=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,d=n.Service,h=n.Method;function f(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,h=0;h<e.nestedArray.length;++h)(c=e._nestedArray[h])instanceof o?u.messageType.push(c.toDescriptor(n)):c instanceof a?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof d?u.service.push(c.toDescriptor()):c instanceof i&&f(c,r,n);u.options=E(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(o.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(a.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var h=T(n.options,t.FileOptions);if(h){var f=Object.keys(h);for(u=0;u<f.length;++u)i.setOption(f[u],h[f[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return f(this,r.file,e),r};var p=0;o.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new o(e.name.length?e.name:"Type"+p++,T(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(o.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(a.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},o.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=w(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=w(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=11===c||14===c?this._fieldsArray[n].resolvedType&&C(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=E(this.options,t.MessageOptions),i};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:_(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var a=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(a.options=T(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var o=e.defaultValue;switch(o){case"true":case"TRUE":o=!0;break;case"false":case"FALSE":o=!1;break;default:m.exec(o)&&(o=parseInt(o))}a.setOption("default",o)}return S(e.type)&&("proto3"===r?e.options&&!e.options.packed&&a.setOption("packed",!1):e.options&&e.options.packed||a.setOption("packed",!1)),a},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=w(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?C(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=E(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;a.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new a(e.name&&e.name.length?e.name:"Enum"+g++,r,T(e.options,t.EnumOptions))},a.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:E(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,T(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:E(this.options,t.ServiceOptions)})};var b=0;function _(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function S(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function w(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return t.group?10:11;throw Error("illegal type: "+e)}function T(e,t){if(e){for(var r,i,s,o=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof a&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),o.push(x(i),s));return o.length?n.util.toObject(o):void 0}}function E(e,t){if(e){for(var r,i,s=[],a=0,o=Object.keys(e);a<o.length;++a)if(i=e[r=o[a]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function C(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),a=0,o=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;a<r.length&&o<l&&r[a]===n[o];){var u=t.lookup(r[a++],!0);if(null!==u&&u!==t)break;++o}else for(;a<r.length&&o<l&&r[a]===n[o];++a,++o);return n.slice(o).join(".")}function x(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,T(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:E(this.options,t.MethodOptions)})}},8154:(e,t,r)=>{"use strict";e.exports=r(5755)},6576:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},1910:(e,t,r)=>{"use strict";var n=t,i=r(4218),s=r(5612);function a(e,t,r,n){var s=!1;if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",n,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function o(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),l=s.safeProp(o.name);o.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(r,o,n,l+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(r,o,n,l+"[i]")("}")("}")):(o.resolvedType instanceof i||r("if(d%s!=null){",l),a(r,o,n,l),o.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?a:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),u=0;u<a.length;++u)r("d%s={}",s.safeProp(a[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],d=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,c.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){var c=t[u],p=e._fieldsArray.indexOf(c),d=s.safeProp(c.name);c.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),o(r,c,p,d+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),o(r,c,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,c.name),o(r,c,p,d),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},996:(e,t,r)=>{"use strict";e.exports=o;var n=r(4218),i=r(7902),s=r(5612);function a(e){return"missing required '"+e.name+"'"}function o(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof n?"int32":o.type,u="m"+s.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[o.keyType]?t("k=%j",i.defaults[o.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[o.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):o.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",a(c))}return t("return m")}},7543:(e,t,r)=>{"use strict";e.exports=o;var n=r(4218),i=r(7902),s=r(5612);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function o(e){for(var t,r,o=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];r="m"+s.safeProp(u.name),u.map?(o("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?o("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):o(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,r),o("}")("}")):u.repeated?(o("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[d]?o("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(o("for(var i=0;i<%s.length;++i)",r),void 0===h?a(o,u,c,r+"[i]"):o("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,r)),o("}")):(u.optional&&o("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===h?a(o,u,c,r):o("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,r))}return o("return w")}},4218:(e,t,r)=>{"use strict";e.exports=a;var n=r(6898);((a.prototype=Object.create(n.prototype)).constructor=a).className="Enum";var i=r(9810),s=r(5612);function a(e,t,r,i,s,a){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=a,this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},7036:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(6898);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(4218),a=r(7902),o=r(5612),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(o.isObject(n)?(c=s,u=n,n=s=void 0):o.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!o.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(i,s){o.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},6102:(e,t,r)=>{"use strict";var n=e.exports=r(7374);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(7543),n.decoder=r(996),n.verifier=r(1881),n.converter=r(1910),n.ReflectionObject=r(6898),n.Namespace=r(9810),n.Root=r(2544),n.Enum=r(4218),n.Type=r(5873),n.Field=r(7036),n.OneOf=r(5464),n.MapField=r(5167),n.Service=r(9088),n.Method=r(8018),n.Message=r(6651),n.wrappers=r(6086),n.types=r(7902),n.util=r(5612),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},7374:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(212),n.BufferWriter=r(8712),n.Reader=r(5720),n.BufferReader=r(3026),n.util=r(5114),n.rpc=r(9117),n.roots=r(7137),n.configure=i,i()},5755:(e,t,r)=>{"use strict";var n=e.exports=r(6102);n.build="full",n.tokenize=r(526),n.parse=r(7260),n.common=r(6576),n.Root._configure(n.Type,n.parse,n.common)},5167:(e,t,r)=>{"use strict";e.exports=a;var n=r(7036);((a.prototype=Object.create(n.prototype)).constructor=a).className="MapField";var i=r(7902),s=r(5612);function a(e,t,r,i,a,o){if(n.call(this,e,t,i,void 0,void 0,a,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new a(i,e,t,r))}}},6651:(e,t,r)=>{"use strict";e.exports=i;var n=r(5114);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},8018:(e,t,r)=>{"use strict";e.exports=s;var n=r(6898);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(5612);function s(e,t,r,s,a,o,l,u,c){if(i.isObject(a)?(l=a,a=o=void 0):i.isObject(o)&&(l=o,o=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=s,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},9810:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(6898);((d.prototype=Object.create(a.prototype)).constructor=d).className="Namespace";var o=r(7036),l=r(5612),u=r(5464);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=c,d.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},d.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},d.prototype.addJSON=function(e){var t=this;if(e)for(var r,a=Object.keys(e),l=0;l<a.length;++l)r=e[a[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?o.fromJSON:d.fromJSON)(a[l],r));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof n||e instanceof u||e instanceof s||e instanceof i||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(t instanceof d&&e instanceof d&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){n=e,i=t,s=r}},6898:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(5612);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var a=s[e];i.setProperty(a,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var o={};o[e]=t,n.push(o)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},5464:(e,t,r)=>{"use strict";e.exports=a;var n=r(6898);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var i=r(7036),s=r(5612);function a(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},7260:(e,t,r)=>{"use strict";e.exports=E,E.filename=null,E.defaults={keepCase:!1};var n=r(526),i=r(2544),s=r(5873),a=r(7036),o=r(5167),l=r(5464),u=r(4218),c=r(9088),d=r(8018),h=r(7902),f=r(5612),p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,w=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,T=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function E(e,t,r){t instanceof i||(r=t,t=new i),r||(r=E.defaults);var C,x,I,k,R,A=r.preferTrailingComment||!1,N=n(e,r.alternateCommentMode||!1),O=N.next,D=N.push,P=N.peek,M=N.skip,L=N.cmnt,j=!0,F=!1,B=t,U=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=E.filename;return r||(E.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+N.line+")")}function z(){var e,t=[];do{if('"'!==(e=O())&&"'"!==e)throw V(e);t.push(O()),M(e),e=P()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=O();switch(t){case"'":case'"':return D(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return W(t,!0)}catch(r){if(e&&w.test(t))return t;throw V(t,"value")}}function $(e,t){do t&&('"'===(r=P())||"'"===r)?e.push(z()):e.push([n=K(O()),M("to",!0)?K(O()):n]);while(M(",",!0));var r,n,i={options:void 0};i.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},Y(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)})}function W(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(_.test(e))return r*parseFloat(e);throw V(e,"number",t)}function K(e,t){switch(e){case"max":case"MAX":case"Max":return 0x1fffffff;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw V(e,"id")}function H(){if(void 0!==x)throw V("package");if(x=O(),!w.test(x))throw V(x,"name");B=B.define(x),M(";")}function G(){var e,t=P();switch(t){case"weak":e=k||(k=[]),O();break;case"public":O();default:e=I||(I=[])}t=z(),M(";"),e.push(t)}function Z(){if(M("="),!(F="proto3"===(R=z()))&&"proto2"!==R)throw V(R,"syntax");t.setOption("syntax",R),M(";")}function Q(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return X(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return eh(e,t),!0}return!1}function Y(e,t,r){var n,i=N.line;if(e&&("string"!=typeof e.comment&&(e.comment=L()),e.filename=E.filename),M("{",!0)){for(;"}"!==(n=O());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||A)&&(e.comment=L(i)||e.comment)}function X(e,t){if(!S.test(t=O()))throw V(t,"type name");var r=new s(t);Y(r,function(e){if(!Q(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":J(r,e);break;case"optional":F?J(r,"proto3_optional"):J(r,"optional");break;case"oneof":er(r,e);break;case"extensions":$(r.extensions||(r.extensions=[]));break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:if(!F||!w.test(e))throw V(e);D(e),J(r,"optional")}}),e.add(r)}function J(e,t,r){var n=O();if("group"===n){ee(e,t);return}for(;n.endsWith(".")||P().startsWith(".");)n+=O();if(!w.test(n))throw V(n,"type");var i=O();if(!S.test(i))throw V(i,"name");i=U(i),M("=");var s=new a(i,K(O()),n,t,r);if(Y(s,function(e){if("option"===e)es(s,e),M(";");else throw V(e)},function(){eu(s)}),"proto3_optional"===t){var o=new l("_"+i);s.setOption("proto3_optional",!0),o.add(s),e.add(o)}else e.add(s);!F&&s.repeated&&(void 0!==h.packed[n]||void 0===h.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=O();if(!S.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),M("=");var i=K(O()),o=new s(r);o.group=!0;var l=new a(n,i,r,t);l.filename=E.filename,Y(o,function(e){switch(e){case"option":es(o,e),M(";");break;case"required":case"repeated":J(o,e);break;case"optional":F?J(o,"proto3_optional"):J(o,"optional");break;case"message":X(o,e);break;case"enum":en(o,e);break;default:throw V(e)}}),e.add(o).add(l)}function et(e){M("<");var t=O();if(void 0===h.mapKey[t])throw V(t,"type");M(",");var r=O();if(!w.test(r))throw V(r,"type");M(">");var n=O();if(!S.test(n))throw V(n,"name");M("=");var i=new o(U(n),K(O()),t,r);Y(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!S.test(t=O()))throw V(t,"name");var r=new l(U(t));Y(r,function(e){"option"===e?(es(r,e),M(";")):(D(e),J(r,"optional"))}),e.add(r)}function en(e,t){if(!S.test(t=O()))throw V(t,"name");var r=new u(t);Y(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!S.test(t))throw V(t,"name");M("=");var r=K(O(),!0),n={options:void 0};n.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},Y(n,function(e){if("option"===e)es(n,e),M(";");else throw V(e)},function(){eu(n)}),e.add(t,r,n.comment,n.options)}function es(e,t){var r,n=M("(",!0);if(!w.test(t=O()))throw V(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=P(),T.test(t)&&(r=t.slice(1),i+=t,O())),M("=");var a=ea(e,i);el(e,s,a,r)}function ea(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!S.test(C=O()))throw V(C,"name");if(null===C)throw V(C,"end of input");var n,i,s=C;if(M(":",!0),"{"===P())n=ea(e,t+"."+C);else if("["===P()){if(n=[],M("[",!0)){do i=q(!0),n.push(i);while(M(",",!0));M("]"),void 0!==i&&eo(e,t+"."+C,i)}}else n=q(!0),eo(e,t+"."+C,n);var a=r[s];a&&(n=[].concat(a).concat(n)),r[s]=n,M(",",!0),M(";",!0)}return r}var o=q(!0);return eo(e,t,o),o}function eo(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!S.test(t=O()))throw V(t,"service name");var r=new c(t);Y(r,function(e){if(!Q(r,e)){if("rpc"===e)ed(r,e);else throw V(e)}}),e.add(r)}function ed(e,t){var r=L(),n=t;if(!S.test(t=O()))throw V(t,"name");var i,s,a,o,l=t;if(M("("),M("stream",!0)&&(s=!0),!w.test(t=O())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(o=!0),!w.test(t=O())))throw V(t);a=t,M(")");var u=new d(l,n,i,a,s,o);u.comment=r,Y(u,function(e){if("option"===e)es(u,e),M(";");else throw V(e)}),e.add(u)}function eh(e,t){if(!w.test(t=O()))throw V(t,"reference");var r=t;Y(null,function(t){switch(t){case"required":case"repeated":J(e,t,r);break;case"optional":F?J(e,"proto3_optional",r):J(e,"optional",r);break;default:if(!F||!w.test(t))throw V(t);D(t),J(e,"optional",r)}})}for(;null!==(C=O());)switch(C){case"package":if(!j)throw V(C);H();break;case"import":if(!j)throw V(C);G();break;case"syntax":if(!j)throw V(C);Z();break;case"option":es(B,C),M(";");break;default:if(Q(B,C)){j=!1;continue}throw V(C)}return E.filename=null,{package:x,imports:I,weakImports:k,syntax:R,root:t}}},5720:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(5114),s=i.LongBits,a=i.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=0xffffffff;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do if(this.pos>=this.len)throw o(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},3026:(e,t,r)=>{"use strict";e.exports=s;var n=r(5720);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(5114);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},2544:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(9810);((d.prototype=Object.create(a.prototype)).constructor=d).className="Root";var o=r(7036),l=r(4218),u=r(5464),c=r(5612);function d(e){a.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=c.path.resolve,d.prototype.fetch=c.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var a=this;if(!n)return c.asPromise(e,a,t,r);var o=n===h;function l(e,t){if(n){if(o)throw e;var r=n;n=null,r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,a,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||a.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||a.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||p||l(null,a)}function f(e,t){if(e=u(e)||e,!(a.files.indexOf(e)>-1)){if(a.files.push(e),e in s){o?d(e,s[e]):(++p,setTimeout(function(){--p,d(e,s[e])}));return}if(o){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}d(e,r)}else++p,a.fetch(e,function(r,i){if(--p,n){if(r){t?p||l(null,a):l(r);return}d(e,i)}})}}var p=0;c.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=a.resolvePath("",t[g]))&&f(m);if(o)return a;p||l(null,a)},d.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n),!0)}return!1}d.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend){if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){n=e,i=t,s=r}},7137:e=>{"use strict";e.exports={}},9117:(e,t,r)=>{"use strict";t.Service=r(9049)},9049:(e,t,r)=>{"use strict";e.exports=i;var n=r(5114);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return n.asPromise(e,o,t,r,i,s);if(!o.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return o.emit("error",e,t),a(e);if(null===r){o.end(!0);return}if(!(r instanceof i))try{r=i[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",r,t),a(null,r)})}catch(e){o.emit("error",e,t),setTimeout(function(){a(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9088:(e,t,r)=>{"use strict";e.exports=o;var n=r(9810);((o.prototype=Object.create(n.prototype)).constructor=o).className="Service";var i=r(8018),s=r(5612),a=r(9117);function o(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},o.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var n,i=new a.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var l=s.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},526:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function d(e,l){e=e.toString();var u=0,d=e.length,h=1,f=0,p={},m=[],g=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(){var t="'"===g?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,E(g),g=null,c(i[1])}function b(t){return e.charAt(t)}function _(t,r,n){var o,u,c={type:e.charAt(t++),lineEmpty:!1,leading:n},d=t-(o=l?2:3);do if(--d<0||"\n"===(u=e.charAt(d))){c.lineEmpty=!0;break}while(" "===u||"	"===u);for(var m=e.substring(t,r).split(a),g=0;g<m.length;++g)m[g]=m[g].replace(l?s:i,"").trim();c.text=m.join("\n").trim(),p[h]=c,f=h}function S(t){var r=w(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function w(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function T(){if(m.length>0)return m.shift();if(g)return v();var r,n,i,s,a,c=0===u;do{if(u===d)return null;for(r=!1;o.test(i=b(u));)if("\n"===i&&(c=!0,++h),++u===d)return null;if("/"===b(u)){if(++u===d)throw y("comment");if("/"===b(u)){if(l){if(s=u,a=!1,S(u-1)){a=!0;do if((u=w(u))===d||(u++,!c))break;while(S(u))}else u=Math.min(d,w(u)+1);a&&(_(s,u,c),c=!0),h++,r=!0}else{for(a="/"===b(s=u+1);"\n"!==b(++u);)if(u===d)return null;++u,a&&(_(s,u-1,c),c=!0),++h,r=!0}}else{if("*"!==(i=b(u)))return"/";s=u+1,a=l||"*"===b(s);do{if("\n"===i&&++h,++u===d)throw y("comment");n=i,i=b(u)}while("*"!==n||"/"!==i);++u,a&&(_(s,u-2,c),c=!0),r=!0}}}while(r);var f=u;if(t.lastIndex=0,!t.test(b(f++)))for(;f<d&&!t.test(b(f));)++f;var p=e.substring(u,u=f);return('"'===p||"'"===p)&&(g=p),p}function E(e){m.push(e)}function C(){if(!m.length){var e=T();if(null===e)return null;E(e)}return m[0]}function x(e,t){var r=C();if(r===e)return T(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function I(e){var t,r=null;return void 0===e?(t=p[h-1],delete p[h-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(f<e&&C(),t=p[e],delete p[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:T,peek:C,push:E,skip:x,cmnt:I},"line",{get:function(){return h}})}d.unescape=c},5873:(e,t,r)=>{"use strict";e.exports=v;var n=r(9810);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(4218),s=r(5464),a=r(7036),o=r(5167),l=r(9088),u=r(6651),c=r(5720),d=r(212),h=r(5612),f=r(7543),p=r(996),m=r(1881),g=r(1910),y=r(6086);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?o.fromJSON:a.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var d=t.nested[u[c]];r.add((void 0!==d.id?a.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?l.fromJSON:n.fromJSON)(u[c],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:c,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},7902:(e,t,r)=>{"use strict";var n=t,i=r(5612),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},5612:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(5114),a=r(7137);s.codegen=r(332),s.fetch=r(6660),s.path=r(1265),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var o=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(5873));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(4218));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(2544)))}})},5113:(e,t,r)=>{"use strict";e.exports=i;var n=r(5114);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+0x100000000*r)}return this.lo+0x100000000*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var o=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?s:new i((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},5114:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(6362),n.base64=r(7406),n.EventEmitter=r(1740),n.float=r(3614),n.inquire=r(3822),n.utf8=r(3130),n.pool=r(697),n.LongBits=r(5113),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},1881:(e,t,r)=>{"use strict";e.exports=l;var n=r(4218),i=r(5612);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),o(t,u,"k[i]"),a(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),a(t,u,l,c+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}a(t,u,l,c)}u.optional&&t("}")}return t("return null")}},6086:(e,t,r)=>{"use strict";var n=t,i=r(6651);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+l,o["@type"]=s,o}return this.toObject(e,t)}}},212:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(5114),s=i.LongBits,a=i.base64,o=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},m.prototype=Object.create(l.prototype),m.prototype.fn=p,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},8712:(e,t,r)=>{"use strict";e.exports=s;var n=r(212);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(5114);function s(){n.call(this)}function a(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},s._configure()},5852:(e,t,r)=>{"use strict";let n,i,s,a,o,l;r.r(t),r.d(t,{addFeedbackAction:()=>wy,getIdeasAction:()=>wg,submitIdeaAction:()=>wm});var u,c,d,h,f,p,m,g,y,v,b,_=r(1999);r(690),function(e){function t(e){}function r(e){throw Error()}function n(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)}e.assertEqual=e=>e,e.assertIs=t,e.assertNever=r,e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=n,e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(u||(u={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(c||(c={}));let S=u.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),w=e=>{switch(typeof e){case"undefined":return S.undefined;case"string":return S.string;case"number":return isNaN(e)?S.nan:S.number;case"boolean":return S.boolean;case"function":return S.function;case"bigint":return S.bigint;case"symbol":return S.symbol;case"object":if(Array.isArray(e))return S.array;if(null===e)return S.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return S.promise;if("undefined"!=typeof Map&&e instanceof Map)return S.map;if("undefined"!=typeof Set&&e instanceof Set)return S.set;if("undefined"!=typeof Date&&e instanceof Date)return S.date;return S.object;default:return S.unknown}},T=u.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),E=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class C extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof C))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,u.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}C.create=e=>new C(e);let x=(e,t)=>{let r;switch(e.code){case T.invalid_type:r=e.received===S.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case T.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,u.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:r=`Unrecognized key(s) in object: ${u.joinValues(e.keys,", ")}`;break;case T.invalid_union:r="Invalid input";break;case T.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${u.joinValues(e.options)}`;break;case T.invalid_enum_value:r=`Invalid enum value. Expected ${u.joinValues(e.options)}, received '${e.received}'`;break;case T.invalid_arguments:r="Invalid function arguments";break;case T.invalid_return_type:r="Invalid function return type";break;case T.invalid_date:r="Invalid date";break;case T.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:u.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case T.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case T.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case T.custom:r="Invalid input";break;case T.invalid_intersection_types:r="Intersection results could not be merged";break;case T.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case T.not_finite:r="Number must be finite";break;default:r=t.defaultError,u.assertNever(e)}return{message:r}},I=x;function k(e){I=e}function R(){return I}let A=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},N=[];function O(e,t){let r=R(),n=A({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===x?void 0:x].filter(e=>!!e)});e.common.issues.push(n)}class D{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return P;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return D.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return P;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let P=Object.freeze({status:"aborted"}),M=e=>({status:"dirty",value:e}),L=e=>({status:"valid",value:e}),j=e=>"aborted"===e.status,F=e=>"dirty"===e.status,B=e=>"valid"===e.status,U=e=>"undefined"!=typeof Promise&&e instanceof Promise;function V(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function z(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(d||(d={}));class q{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let $=(e,t)=>{if(B(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new C(e.common.issues);return this._error=t,this._error}}};function W(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,a;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!==(s=null!=o?o:n)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=null!=o?o:r)&&void 0!==a?a:i.defaultError}},description:i}}class K{get description(){return this._def.description}_getType(e){return w(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:w(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new D,ctx:{common:e.parent.common,data:e.data,parsedType:w(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(U(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)},i=this._parseSync({data:e,path:n.path,parent:n});return $(n,i)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return B(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>B(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:w(e)},n=this._parse({data:e,path:r.path,parent:r});return $(r,await (U(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),s=()=>n.addIssue({code:T.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eG({schema:this,typeName:p.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eZ.create(this,this._def)}nullable(){return eQ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eR.create(this)}promise(){return eH.create(this,this._def)}or(e){return eO.create([this,e],this._def)}and(e){return eL.create(this,e,this._def)}transform(e){return new eG({...W(this._def),schema:this,typeName:p.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new eY({...W(this._def),innerType:this,defaultValue:t,typeName:p.ZodDefault})}brand(){return new e1({typeName:p.ZodBranded,type:this,...W(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new eX({...W(this._def),innerType:this,catchValue:t,typeName:p.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return e2.create(this,e)}readonly(){return e3.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let H=/^c[^\s-]{8,}$/i,G=/^[0-9a-z]+$/,Z=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Q=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Y=/^[a-z0-9_-]{21}$/i,X=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,J=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,et="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",er=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,en=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ei=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,es=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ea=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eo=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,el="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eu=RegExp(`^${el}$`);function ec(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function ed(e){return RegExp(`^${ec(e)}$`)}function eh(e){let t=`${el}T${ec(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}function ef(e,t){return!!(("v4"===t||!t)&&er.test(e)||("v6"===t||!t)&&ei.test(e))}function ep(e,t){if(!X.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)return!1;return!0}catch(e){return!1}}function em(e,t){return!!(("v4"===t||!t)&&en.test(e)||("v6"===t||!t)&&es.test(e))}class eg extends K{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==S.string){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.string,received:t.parsedType}),P}let r=new D;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("max"===i.kind)e.data.length>i.value&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("length"===i.kind){let n=e.data.length>i.value,s=e.data.length<i.value;(n||s)&&(t=this._getOrReturnCtx(e,t),n?O(t,{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&O(t,{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if("email"===i.kind)ee.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"email",code:T.invalid_string,message:i.message}),r.dirty());else if("emoji"===i.kind)n||(n=RegExp(et,"u")),n.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:T.invalid_string,message:i.message}),r.dirty());else if("uuid"===i.kind)Q.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:T.invalid_string,message:i.message}),r.dirty());else if("nanoid"===i.kind)Y.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"nanoid",code:T.invalid_string,message:i.message}),r.dirty());else if("cuid"===i.kind)H.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:T.invalid_string,message:i.message}),r.dirty());else if("cuid2"===i.kind)G.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:T.invalid_string,message:i.message}),r.dirty());else if("ulid"===i.kind)Z.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:T.invalid_string,message:i.message}),r.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(n){O(t=this._getOrReturnCtx(e,t),{validation:"url",code:T.invalid_string,message:i.message}),r.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"regex",code:T.invalid_string,message:i.message}),r.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):"datetime"===i.kind?eh(i).test(e.data)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:"datetime",message:i.message}),r.dirty()):"date"===i.kind?eu.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:"date",message:i.message}),r.dirty()):"time"===i.kind?ed(i).test(e.data)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_string,validation:"time",message:i.message}),r.dirty()):"duration"===i.kind?J.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"duration",code:T.invalid_string,message:i.message}),r.dirty()):"ip"===i.kind?ef(e.data,i.version)||(O(t=this._getOrReturnCtx(e,t),{validation:"ip",code:T.invalid_string,message:i.message}),r.dirty()):"jwt"===i.kind?ep(e.data,i.alg)||(O(t=this._getOrReturnCtx(e,t),{validation:"jwt",code:T.invalid_string,message:i.message}),r.dirty()):"cidr"===i.kind?em(e.data,i.version)||(O(t=this._getOrReturnCtx(e,t),{validation:"cidr",code:T.invalid_string,message:i.message}),r.dirty()):"base64"===i.kind?ea.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"base64",code:T.invalid_string,message:i.message}),r.dirty()):"base64url"===i.kind?eo.test(e.data)||(O(t=this._getOrReturnCtx(e,t),{validation:"base64url",code:T.invalid_string,message:i.message}),r.dirty()):u.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:T.invalid_string,...d.errToObj(r)})}_addCheck(e){return new eg({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...d.errToObj(e)})}url(e){return this._addCheck({kind:"url",...d.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...d.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...d.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...d.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...d.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...d.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...d.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...d.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...d.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...d.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...d.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...d.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...d.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...d.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...d.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...d.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...d.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...d.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...d.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...d.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...d.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...d.errToObj(t)})}nonempty(e){return this.min(1,d.errToObj(e))}trim(){return new eg({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new eg({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new eg({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ey(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}eg.create=e=>{var t;return new eg({checks:[],typeName:p.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...W(e)})};class ev extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==S.number){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.number,received:t.parsedType}),P}let r=new D;for(let n of this._def.checks)"int"===n.kind?u.isInteger(e.data)||(O(t=this._getOrReturnCtx(e,t),{code:T.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==ey(e.data,n.value)&&(O(t=this._getOrReturnCtx(e,t),{code:T.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(O(t=this._getOrReturnCtx(e,t),{code:T.not_finite,message:n.message}),r.dirty()):u.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,d.toString(t))}gt(e,t){return this.setLimit("min",e,!1,d.toString(t))}lte(e,t){return this.setLimit("max",e,!0,d.toString(t))}lt(e,t){return this.setLimit("max",e,!1,d.toString(t))}setLimit(e,t,r,n){return new ev({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:d.toString(n)}]})}_addCheck(e){return new ev({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:d.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:d.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:d.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:d.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:d.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:d.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:d.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:d.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:d.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&u.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ev.create=e=>new ev({checks:[],typeName:p.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...W(e)});class eb extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==S.bigint)return this._getInvalidInput(e);let r=new D;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(O(t=this._getOrReturnCtx(e,t),{code:T.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):u.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.bigint,received:t.parsedType}),P}gte(e,t){return this.setLimit("min",e,!0,d.toString(t))}gt(e,t){return this.setLimit("min",e,!1,d.toString(t))}lte(e,t){return this.setLimit("max",e,!0,d.toString(t))}lt(e,t){return this.setLimit("max",e,!1,d.toString(t))}setLimit(e,t,r,n){return new eb({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:d.toString(n)}]})}_addCheck(e){return new eb({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:d.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:d.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:d.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:d.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:d.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eb.create=e=>{var t;return new eb({checks:[],typeName:p.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...W(e)})};class e_ extends K{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==S.boolean){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.boolean,received:t.parsedType}),P}return L(e.data)}}e_.create=e=>new e_({typeName:p.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...W(e)});class eS extends K{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==S.date){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.date,received:t.parsedType}),P}if(isNaN(e.data.getTime()))return O(this._getOrReturnCtx(e),{code:T.invalid_date}),P;let r=new D;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(O(t=this._getOrReturnCtx(e,t),{code:T.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):u.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eS({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:d.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:d.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eS.create=e=>new eS({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:p.ZodDate,...W(e)});class ew extends K{_parse(e){if(this._getType(e)!==S.symbol){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.symbol,received:t.parsedType}),P}return L(e.data)}}ew.create=e=>new ew({typeName:p.ZodSymbol,...W(e)});class eT extends K{_parse(e){if(this._getType(e)!==S.undefined){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.undefined,received:t.parsedType}),P}return L(e.data)}}eT.create=e=>new eT({typeName:p.ZodUndefined,...W(e)});class eE extends K{_parse(e){if(this._getType(e)!==S.null){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.null,received:t.parsedType}),P}return L(e.data)}}eE.create=e=>new eE({typeName:p.ZodNull,...W(e)});class eC extends K{constructor(){super(...arguments),this._any=!0}_parse(e){return L(e.data)}}eC.create=e=>new eC({typeName:p.ZodAny,...W(e)});class ex extends K{constructor(){super(...arguments),this._unknown=!0}_parse(e){return L(e.data)}}ex.create=e=>new ex({typeName:p.ZodUnknown,...W(e)});class eI extends K{_parse(e){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.never,received:t.parsedType}),P}}eI.create=e=>new eI({typeName:p.ZodNever,...W(e)});class ek extends K{_parse(e){if(this._getType(e)!==S.undefined){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.void,received:t.parsedType}),P}return L(e.data)}}ek.create=e=>new ek({typeName:p.ZodVoid,...W(e)});class eR extends K{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==S.array)return O(t,{code:T.invalid_type,expected:S.array,received:t.parsedType}),P;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(O(t,{code:e?T.too_big:T.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(O(t,{code:T.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(O(t,{code:T.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new q(t,e,t.path,r)))).then(e=>D.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new q(t,e,t.path,r)));return D.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new eR({...this._def,minLength:{value:e,message:d.toString(t)}})}max(e,t){return new eR({...this._def,maxLength:{value:e,message:d.toString(t)}})}length(e,t){return new eR({...this._def,exactLength:{value:e,message:d.toString(t)}})}nonempty(e){return this.min(1,e)}}function eA(e){if(e instanceof eN){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=eZ.create(eA(n))}return new eN({...e._def,shape:()=>t})}return e instanceof eR?new eR({...e._def,type:eA(e.element)}):e instanceof eZ?eZ.create(eA(e.unwrap())):e instanceof eQ?eQ.create(eA(e.unwrap())):e instanceof ej?ej.create(e.items.map(e=>eA(e))):e}eR.create=(e,t)=>new eR({type:e,minLength:null,maxLength:null,exactLength:null,typeName:p.ZodArray,...W(t)});class eN extends K{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=u.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==S.object){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.object,received:t.parsedType}),P}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof eI&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let a=[];for(let e of i){let t=n[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new q(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof eI){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(O(r,{code:T.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new q(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>D.mergeObjectSync(t,e)):D.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return d.errToObj,new eN({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,a;let o=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=d.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new eN({...this._def,unknownKeys:"strip"})}passthrough(){return new eN({...this._def,unknownKeys:"passthrough"})}extend(e){return new eN({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eN({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:p.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eN({...this._def,catchall:e})}pick(e){let t={};return u.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new eN({...this._def,shape:()=>t})}omit(e){let t={};return u.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new eN({...this._def,shape:()=>t})}deepPartial(){return eA(this)}partial(e){let t={};return u.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new eN({...this._def,shape:()=>t})}required(e){let t={};return u.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eZ;)e=e._def.innerType;t[r]=e}}),new eN({...this._def,shape:()=>t})}keyof(){return e$(u.objectKeys(this.shape))}}eN.create=(e,t)=>new eN({shape:()=>e,unknownKeys:"strip",catchall:eI.create(),typeName:p.ZodObject,...W(t)}),eN.strictCreate=(e,t)=>new eN({shape:()=>e,unknownKeys:"strict",catchall:eI.create(),typeName:p.ZodObject,...W(t)}),eN.lazycreate=(e,t)=>new eN({shape:e,unknownKeys:"strip",catchall:eI.create(),typeName:p.ZodObject,...W(t)});class eO extends K{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new C(e.ctx.common.issues));return O(t,{code:T.invalid_union,unionErrors:r}),P}if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(n);{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new C(e));return O(t,{code:T.invalid_union,unionErrors:i}),P}}get options(){return this._def.options}}eO.create=(e,t)=>new eO({options:e,typeName:p.ZodUnion,...W(t)});let eD=e=>{if(e instanceof ez)return eD(e.schema);if(e instanceof eG)return eD(e.innerType());if(e instanceof eq)return[e.value];if(e instanceof eW)return e.options;if(e instanceof eK)return u.objectValues(e.enum);if(e instanceof eY)return eD(e._def.innerType);if(e instanceof eT)return[void 0];else if(e instanceof eE)return[null];else if(e instanceof eZ)return[void 0,...eD(e.unwrap())];else if(e instanceof eQ)return[null,...eD(e.unwrap())];else if(e instanceof e1)return eD(e.unwrap());else if(e instanceof e3)return eD(e.unwrap());else if(e instanceof eX)return eD(e._def.innerType);else return[]};class eP extends K{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==S.object)return O(t,{code:T.invalid_type,expected:S.object,received:t.parsedType}),P;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(O(t,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),P)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=eD(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new eP({typeName:p.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...W(r)})}}function eM(e,t){let r=w(e),n=w(t);if(e===t)return{valid:!0,data:e};if(r===S.object&&n===S.object){let r=u.objectKeys(t),n=u.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=eM(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===S.array&&n===S.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=eM(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===S.date&&n===S.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class eL extends K{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(j(e)||j(n))return P;let i=eM(e.value,n.value);return i.valid?((F(e)||F(n))&&t.dirty(),{status:t.value,value:i.data}):(O(r,{code:T.invalid_intersection_types}),P)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eL.create=(e,t,r)=>new eL({left:e,right:t,typeName:p.ZodIntersection,...W(r)});class ej extends K{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==S.array)return O(r,{code:T.invalid_type,expected:S.array,received:r.parsedType}),P;if(r.data.length<this._def.items.length)return O(r,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),P;!this._def.rest&&r.data.length>this._def.items.length&&(O(r,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new q(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>D.mergeArray(t,e)):D.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ej({...this._def,rest:e})}}ej.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ej({items:e,typeName:p.ZodTuple,rest:null,...W(t)})};class eF extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==S.object)return O(r,{code:T.invalid_type,expected:S.object,received:r.parsedType}),P;let n=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new q(r,e,r.path,e)),value:s._parse(new q(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?D.mergeObjectAsync(t,n):D.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eF(t instanceof K?{keyType:e,valueType:t,typeName:p.ZodRecord,...W(r)}:{keyType:eg.create(),valueType:e,typeName:p.ZodRecord,...W(t)})}}class eB extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==S.map)return O(r,{code:T.invalid_type,expected:S.map,received:r.parsedType}),P;let n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new q(r,e,r.path,[s,"key"])),value:i._parse(new q(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return P;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return P;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}eB.create=(e,t,r)=>new eB({valueType:t,keyType:e,typeName:p.ZodMap,...W(r)});class eU extends K{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==S.set)return O(r,{code:T.invalid_type,expected:S.set,received:r.parsedType}),P;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(O(r,{code:T.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(O(r,{code:T.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return P;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>i._parse(new q(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>s(e)):s(a)}min(e,t){return new eU({...this._def,minSize:{value:e,message:d.toString(t)}})}max(e,t){return new eU({...this._def,maxSize:{value:e,message:d.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eU.create=(e,t)=>new eU({valueType:e,minSize:null,maxSize:null,typeName:p.ZodSet,...W(t)});class eV extends K{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==S.function)return O(t,{code:T.invalid_type,expected:S.function,received:t.parsedType}),P;function r(e,r){return A({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,R(),x].filter(e=>!!e),issueData:{code:T.invalid_arguments,argumentsError:r}})}function n(e,r){return A({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,R(),x].filter(e=>!!e),issueData:{code:T.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eH){let e=this;return L(async function(...t){let a=new C([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(r(t,e)),a}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return L(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new C([r(t,a.error)]);let o=Reflect.apply(s,this,a.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new C([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eV({...this._def,args:ej.create(e).rest(ex.create())})}returns(e){return new eV({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eV({args:e||ej.create([]).rest(ex.create()),returns:t||ex.create(),typeName:p.ZodFunction,...W(r)})}}class ez extends K{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ez.create=(e,t)=>new ez({getter:e,typeName:p.ZodLazy,...W(t)});class eq extends K{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return O(t,{received:t.data,code:T.invalid_literal,expected:this._def.value}),P}return{status:"valid",value:e.data}}get value(){return this._def.value}}function e$(e,t){return new eW({values:e,typeName:p.ZodEnum,...W(t)})}eq.create=(e,t)=>new eq({value:e,typeName:p.ZodLiteral,...W(t)});class eW extends K{constructor(){super(...arguments),h.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return O(t,{expected:u.joinValues(r),received:t.parsedType,code:T.invalid_type}),P}if(V(this,h,"f")||z(this,h,new Set(this._def.values),"f"),!V(this,h,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return O(t,{received:t.data,code:T.invalid_enum_value,options:r}),P}return L(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eW.create(e,{...this._def,...t})}exclude(e,t=this._def){return eW.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}h=new WeakMap,eW.create=e$;class eK extends K{constructor(){super(...arguments),f.set(this,void 0)}_parse(e){let t=u.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==S.string&&r.parsedType!==S.number){let e=u.objectValues(t);return O(r,{expected:u.joinValues(e),received:r.parsedType,code:T.invalid_type}),P}if(V(this,f,"f")||z(this,f,new Set(u.getValidEnumValues(this._def.values)),"f"),!V(this,f,"f").has(e.data)){let e=u.objectValues(t);return O(r,{received:r.data,code:T.invalid_enum_value,options:e}),P}return L(e.data)}get enum(){return this._def.values}}f=new WeakMap,eK.create=(e,t)=>new eK({values:e,typeName:p.ZodNativeEnum,...W(t)});class eH extends K{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==S.promise&&!1===t.common.async?(O(t,{code:T.invalid_type,expected:S.promise,received:t.parsedType}),P):L((t.parsedType===S.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eH.create=(e,t)=>new eH({type:e,typeName:p.ZodPromise,...W(t)});class eG extends K{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===p.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{O(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return P;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?P:"dirty"===n.status||"dirty"===t.value?M(n.value):n});{if("aborted"===t.value)return P;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?P:"dirty"===n.status||"dirty"===t.value?M(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?P:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?P:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>B(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!B(e))return e;let s=n.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}u.assertNever(n)}}eG.create=(e,t,r)=>new eG({schema:e,typeName:p.ZodEffects,effect:t,...W(r)}),eG.createWithPreprocess=(e,t,r)=>new eG({schema:t,effect:{type:"preprocess",transform:e},typeName:p.ZodEffects,...W(r)});class eZ extends K{_parse(e){return this._getType(e)===S.undefined?L(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eZ.create=(e,t)=>new eZ({innerType:e,typeName:p.ZodOptional,...W(t)});class eQ extends K{_parse(e){return this._getType(e)===S.null?L(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eQ.create=(e,t)=>new eQ({innerType:e,typeName:p.ZodNullable,...W(t)});class eY extends K{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===S.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eY.create=(e,t)=>new eY({innerType:e,typeName:p.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...W(t)});class eX extends K{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return U(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new C(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new C(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eX.create=(e,t)=>new eX({innerType:e,typeName:p.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...W(t)});class eJ extends K{_parse(e){if(this._getType(e)!==S.nan){let t=this._getOrReturnCtx(e);return O(t,{code:T.invalid_type,expected:S.nan,received:t.parsedType}),P}return{status:"valid",value:e.data}}}eJ.create=e=>new eJ({typeName:p.ZodNaN,...W(e)});let e0=Symbol("zod_brand");class e1 extends K{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class e2 extends K{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?P:"dirty"===e.status?(t.dirty(),M(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?P:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new e2({in:e,out:t,typeName:p.ZodPipeline})}}class e3 extends K{_parse(e){let t=this._def.innerType._parse(e),r=e=>(B(e)&&(e.value=Object.freeze(e.value)),e);return U(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function e4(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function e6(e,t={},r){return e?eC.create().superRefine((n,i)=>{var s,a;let o=e(n);if(o instanceof Promise)return o.then(e=>{var s,a;if(!e){let e=e4(t,n),o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=e4(t,n),o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:o})}}):eC.create()}e3.create=(e,t)=>new e3({innerType:e,typeName:p.ZodReadonly,...W(t)});let e5={object:eN.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(p||(p={}));let e8=(e,t={message:`Input not instance of ${e.name}`})=>e6(t=>t instanceof e,t),e9=eg.create,e7=ev.create,te=eJ.create,tt=eb.create,tr=e_.create,tn=eS.create,ti=ew.create,ts=eT.create,ta=eE.create,to=eC.create,tl=ex.create,tu=eI.create,tc=ek.create,td=eR.create,th=eN.create,tf=eN.strictCreate,tp=eO.create,tm=eP.create,tg=eL.create,ty=ej.create,tv=eF.create,tb=eB.create,t_=eU.create,tS=eV.create,tw=ez.create,tT=eq.create,tE=eW.create,tC=eK.create,tx=eH.create,tI=eG.create,tk=eZ.create,tR=eQ.create,tA=eG.createWithPreprocess,tN=e2.create,tO=()=>e7().optional(),tD=()=>tr().optional(),tP={string:e=>eg.create({...e,coerce:!0}),number:e=>ev.create({...e,coerce:!0}),boolean:e=>e_.create({...e,coerce:!0}),bigint:e=>eb.create({...e,coerce:!0}),date:e=>eS.create({...e,coerce:!0})},tM=P;var tL=Object.freeze({__proto__:null,defaultErrorMap:x,setErrorMap:k,getErrorMap:R,makeIssue:A,EMPTY_PATH:N,addIssueToContext:O,ParseStatus:D,INVALID:P,DIRTY:M,OK:L,isAborted:j,isDirty:F,isValid:B,isAsync:U,get util(){return u},get objectUtil(){return c},ZodParsedType:S,getParsedType:w,ZodType:K,datetimeRegex:eh,ZodString:eg,ZodNumber:ev,ZodBigInt:eb,ZodBoolean:e_,ZodDate:eS,ZodSymbol:ew,ZodUndefined:eT,ZodNull:eE,ZodAny:eC,ZodUnknown:ex,ZodNever:eI,ZodVoid:ek,ZodArray:eR,ZodObject:eN,ZodUnion:eO,ZodDiscriminatedUnion:eP,ZodIntersection:eL,ZodTuple:ej,ZodRecord:eF,ZodMap:eB,ZodSet:eU,ZodFunction:eV,ZodLazy:ez,ZodLiteral:eq,ZodEnum:eW,ZodNativeEnum:eK,ZodPromise:eH,ZodEffects:eG,ZodTransformer:eG,ZodOptional:eZ,ZodNullable:eQ,ZodDefault:eY,ZodCatch:eX,ZodNaN:eJ,BRAND:e0,ZodBranded:e1,ZodPipeline:e2,ZodReadonly:e3,custom:e6,Schema:K,ZodSchema:K,late:e5,get ZodFirstPartyTypeKind(){return p},coerce:tP,any:to,array:td,bigint:tt,boolean:tr,date:tn,discriminatedUnion:tm,effect:tI,enum:tE,function:tS,instanceof:e8,intersection:tg,lazy:tw,literal:tT,map:tb,nan:te,nativeEnum:tC,never:tu,null:ta,nullable:tR,number:e7,object:th,oboolean:tD,onumber:tO,optional:tk,ostring:()=>e9().optional(),pipeline:tN,preprocess:tA,promise:tx,record:tv,set:t_,strictObject:tf,string:e9,symbol:ti,transformer:tI,tuple:ty,undefined:ts,union:tp,unknown:tl,void:tc,NEVER:tM,ZodIssueCode:T,quotelessJson:E,ZodError:C});let tj=tL.object({ideaText:tL.string().min(20,{message:"Your idea should be at least 20 characters long."}).max(500,{message:"Keep your idea concise (max 500 characters)."})}),tF=tL.object({feedbackText:tL.string().min(5,{message:"Feedback should be at least 5 characters long."}).max(500,{message:"Keep your feedback concise (max 500 characters)."}),ideaId:tL.string()});var tB=r(1973);let tU=()=>void 0,tV={NODE_CLIENT:!1,SDK_VERSION:"${JSCORE_VERSION}"},tz=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},tq=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},t$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),n.push(r[u],r[c],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tz(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tq(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new tW;let l=i<<2|s>>4;if(n.push(l),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==o){let e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class tW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let tK=function(e){let t=tz(e);return t$.encodeByteArray(t,!0)},tH=function(e){return tK(e).replace(/\./g,"")},tG=function(e){try{return t$.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tZ(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}let tQ=()=>tZ().__FIREBASE_DEFAULTS__,tY=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},tX=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&tG(e[1]);return t&&JSON.parse(t)},tJ=()=>{try{return tU()||tQ()||tY()||tX()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},t0=e=>{var t,r;return null===(r=null===(t=tJ())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},t1=e=>{let t=t0(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},t2=()=>{var e;return null===(e=tJ())||void 0===e?void 0:e.config};class t3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function t4(e){return e.endsWith(".cloudworkstations.dev")}async function t6(e){return(await fetch(e,{credentials:"include"})).ok}function t5(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[tH(JSON.stringify(r)),tH(JSON.stringify(a)),o].join(".")}let t8={};function t9(){let e={prod:[],emulator:[]};for(let t of Object.keys(t8))t8[t]?e.emulator.push(t):e.prod.push(t);return e}function t7(e){let t=document.getElementById(e),r=!1;return t||((t=document.createElement("div")).setAttribute("id",e),r=!0),{created:r,element:t}}let re=!1;function rt(e,t){if("undefined"==typeof window||"undefined"==typeof document||!t4(window.location.host)||t8[e]===t||t8[e]||re)return;function r(e){return`__firebase__banner__${e}`}t8[e]=t;let n="__firebase__banner",i=t9().prod.length>0;function s(){let e=document.getElementById(n);e&&e.remove()}function a(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}function o(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}function l(){let e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{re=!0,s()},e}function u(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}function c(){let e=t7(n),t=r("text"),s=document.getElementById(t)||document.createElement("span"),c=r("learnmore"),d=document.getElementById(c)||document.createElement("a"),h=r("preprendIcon"),f=document.getElementById(h)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){let t=e.element;a(t),u(d,c);let r=l();o(f,h),t.append(f,s,d,r),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",f.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(f.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",c):c()}function rr(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rn(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rr())}function ri(){var e;let t=null===(e=tJ())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function rs(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function ra(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function ro(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rl(){return!ri()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ru(){try{return"object"==typeof indexedDB}catch(e){return!1}}function rc(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}let rd="FirebaseError";class rh extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rd,Object.setPrototypeOf(this,rh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rf.prototype.create)}}class rf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?rp(i,r):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new rh(n,a,r)}}function rp(e,t){return e.replace(rm,(e,r)=>{let n=t[r];return null!=n?String(n):`<${r}?>`})}let rm=/\{\$([^}]+)}/g;function rg(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(ry(r)&&ry(s)){if(!rg(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function ry(e){return null!==e&&"object"==typeof e}function rv(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function rb(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function r_(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function rS(e,t){let r=new rw(e,t);return r.subscribe.bind(r)}class rw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=rT(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(n.next=rE),void 0===n.error&&(n.error=rE),void 0===n.complete&&(n.complete=rE);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rT(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}function rE(){}function rC(e){return e&&e._delegate?e._delegate:e}tV.NODE_CLIENT=!0;class rx{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let rI="[DEFAULT]";class rk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new t3;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(rA(e))try{this.getOrInitializeService({instanceIdentifier:rI})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=rI){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=rI){return this.instances.has(e)}getOptions(e=rI){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=rI){return this.component?this.component.multipleInstances?e:rI:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function rR(e){return e===rI?void 0:e}function rA(e){return"EAGER"===e.instantiationMode}class rN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let rO=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(m||(m={}));let rD={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},rP=m.INFO,rM={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},rL=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=rM[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rj{constructor(e){this.name=e,this._logLevel=rP,this._logHandler=rL,this._userLogHandler=null,rO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}}let rF=(e,t)=>t.some(t=>e instanceof t);function rB(){return i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rU(){return s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let rV=new WeakMap,rz=new WeakMap,rq=new WeakMap,r$=new WeakMap,rW=new WeakMap;function rK(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(rX(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&rV.set(t,e)}).catch(()=>{}),rW.set(t,e),t}function rH(e){if(rz.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});rz.set(e,t)}let rG={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return rz.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rq.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rX(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function rZ(e){rG=e(rG)}function rQ(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?rU().includes(e)?function(...t){return e.apply(rJ(this),t),rX(rV.get(this))}:function(...t){return rX(e.apply(rJ(this),t))}:function(t,...r){let n=e.call(rJ(this),t,...r);return rq.set(n,t.sort?t.sort():[t]),rX(n)}}function rY(e){return"function"==typeof e?rQ(e):(e instanceof IDBTransaction&&rH(e),rF(e,rB()))?new Proxy(e,rG):e}function rX(e){if(e instanceof IDBRequest)return rK(e);if(r$.has(e))return r$.get(e);let t=rY(e);return t!==e&&(r$.set(e,t),rW.set(t,e)),t}let rJ=e=>rW.get(e);function r0(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=rX(a);return n&&a.addEventListener("upgradeneeded",e=>{n(rX(a.result),e.oldVersion,e.newVersion,rX(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let r1=["get","getKey","getAll","getAllKeys","count"],r2=["put","add","delete","clear"],r3=new Map;function r4(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(r3.get(t))return r3.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=r2.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||r1.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return r3.set(t,s),s}rZ(e=>({...e,get:(t,r,n)=>r4(t,r)||e.get(t,r,n),has:(t,r)=>!!r4(t,r)||e.has(t,r)}));class r6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!r5(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function r5(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let r8="@firebase/app",r9="0.12.3",r7=new rj("@firebase/app"),ne="11.7.3",nt="[DEFAULT]",nr={[r8]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,ni=new Map,ns=new Map;function na(e,t){try{e.container.addComponent(t)}catch(r){r7.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function no(e){let t=e.name;if(ns.has(t))return r7.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(ns.set(t,e),nn.values()))na(r,e);for(let t of ni.values())na(t,e);return!0}function nl(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function nu(e){return null!=e&&void 0!==e.settings}let nc=new rf("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class nd{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rx("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nc.create("app-deleted",{appName:this._name})}}let nh=ne;function nf(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:nt,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw nc.create("bad-app-name",{appName:String(i)});if(r||(r=t2()),!r)throw nc.create("no-options");let s=nn.get(i);if(s){if(rg(r,s.options)&&rg(n,s.config))return s;throw nc.create("duplicate-app",{appName:i})}let a=new rN(i);for(let e of ns.values())a.addComponent(e);let o=new nd(r,n,a);return nn.set(i,o),o}function np(e=nt){let t=nn.get(e);if(!t&&e===nt&&t2())return nf();if(!t)throw nc.create("no-app",{appName:e});return t}function nm(){return Array.from(nn.values())}function ng(e,t,r){var n;let i=null!==(n=nr[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),r7.warn(e.join(" "));return}no(new rx(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let ny="firebase-heartbeat-database",nv=1,nb="firebase-heartbeat-store",n_=null;function nS(){return n_||(n_=r0(ny,nv,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(nb)}catch(e){console.warn(e)}}}).catch(e=>{throw nc.create("idb-open",{originalErrorMessage:e.message})})),n_}async function nw(e){try{let t=(await nS()).transaction(nb),r=await t.objectStore(nb).get(nE(e));return await t.done,r}catch(e){if(e instanceof rh)r7.warn(e.message);else{let t=nc.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});r7.warn(t.message)}}}async function nT(e,t){try{let r=(await nS()).transaction(nb,"readwrite"),n=r.objectStore(nb);await n.put(t,nE(e)),await r.done}catch(e){if(e instanceof rh)r7.warn(e.message);else{let t=nc.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});r7.warn(t.message)}}}function nE(e){return`${e.name}!${e.options.appId}`}let nC=1024,nx=30;class nI{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new nA(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=nk();if((null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>nx){let e=nO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){r7.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=nk(),{heartbeatsToSend:r,unsentEntries:n}=nR(this._heartbeatsCache.heartbeats),i=tH(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return r7.warn(e),""}}}function nk(){return new Date().toISOString().substring(0,10)}function nR(e,t=nC){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),nN(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),nN(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class nA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ru()&&rc().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await nw(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return nT(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return nT(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function nN(e){return tH(JSON.stringify({version:2,heartbeats:e})).length}function nO(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}(function(e){no(new rx("platform-logger",e=>new r6(e),"PRIVATE")),no(new rx("heartbeat",e=>new nI(e),"PRIVATE")),ng(r8,r9,""),ng(r8,r9,"esm2017"),ng("fire-js","")})(0),ng("firebase","11.7.3","app");var nD=r(1764);let nP=require("crypto");var nM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nL={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^r&(i^s))+n[0]+0xd76aa478&0xffffffff;a=s+(i^(t=r+(a<<7&0xffffffff|a>>>25))&(r^i))+n[1]+0xe8c7b756&0xffffffff,a=i+(r^(s=t+(a<<12&0xffffffff|a>>>20))&(t^r))+n[2]+0x242070db&0xffffffff,a=r+(t^(i=s+(a<<17&0xffffffff|a>>>15))&(s^t))+n[3]+0xc1bdceee&0xffffffff,a=t+(s^(r=i+(a<<22&0xffffffff|a>>>10))&(i^s))+n[4]+0xf57c0faf&0xffffffff,a=s+(i^(t=r+(a<<7&0xffffffff|a>>>25))&(r^i))+n[5]+0x4787c62a&0xffffffff,a=i+(r^(s=t+(a<<12&0xffffffff|a>>>20))&(t^r))+n[6]+0xa8304613&0xffffffff,a=r+(t^(i=s+(a<<17&0xffffffff|a>>>15))&(s^t))+n[7]+0xfd469501&0xffffffff,a=t+(s^(r=i+(a<<22&0xffffffff|a>>>10))&(i^s))+n[8]+0x698098d8&0xffffffff,a=s+(i^(t=r+(a<<7&0xffffffff|a>>>25))&(r^i))+n[9]+0x8b44f7af&0xffffffff,a=i+(r^(s=t+(a<<12&0xffffffff|a>>>20))&(t^r))+n[10]+0xffff5bb1&0xffffffff,a=r+(t^(i=s+(a<<17&0xffffffff|a>>>15))&(s^t))+n[11]+0x895cd7be&0xffffffff,a=t+(s^(r=i+(a<<22&0xffffffff|a>>>10))&(i^s))+n[12]+0x6b901122&0xffffffff,a=s+(i^(t=r+(a<<7&0xffffffff|a>>>25))&(r^i))+n[13]+0xfd987193&0xffffffff,a=i+(r^(s=t+(a<<12&0xffffffff|a>>>20))&(t^r))+n[14]+0xa679438e&0xffffffff,a=r+(t^(i=s+(a<<17&0xffffffff|a>>>15))&(s^t))+n[15]+0x49b40821&0xffffffff,r=i+(a<<22&0xffffffff|a>>>10),a=t+(i^s&(r^i))+n[1]+0xf61e2562&0xffffffff,t=r+(a<<5&0xffffffff|a>>>27),a=s+(r^i&(t^r))+n[6]+0xc040b340&0xffffffff,s=t+(a<<9&0xffffffff|a>>>23),a=i+(t^r&(s^t))+n[11]+0x265e5a51&0xffffffff,i=s+(a<<14&0xffffffff|a>>>18),a=r+(s^t&(i^s))+n[0]+0xe9b6c7aa&0xffffffff,r=i+(a<<20&0xffffffff|a>>>12),a=t+(i^s&(r^i))+n[5]+0xd62f105d&0xffffffff,t=r+(a<<5&0xffffffff|a>>>27),a=s+(r^i&(t^r))+n[10]+0x2441453&0xffffffff,s=t+(a<<9&0xffffffff|a>>>23),a=i+(t^r&(s^t))+n[15]+0xd8a1e681&0xffffffff,i=s+(a<<14&0xffffffff|a>>>18),a=r+(s^t&(i^s))+n[4]+0xe7d3fbc8&0xffffffff,r=i+(a<<20&0xffffffff|a>>>12),a=t+(i^s&(r^i))+n[9]+0x21e1cde6&0xffffffff,t=r+(a<<5&0xffffffff|a>>>27),a=s+(r^i&(t^r))+n[14]+0xc33707d6&0xffffffff,s=t+(a<<9&0xffffffff|a>>>23),a=i+(t^r&(s^t))+n[3]+0xf4d50d87&0xffffffff,i=s+(a<<14&0xffffffff|a>>>18),a=r+(s^t&(i^s))+n[8]+0x455a14ed&0xffffffff,r=i+(a<<20&0xffffffff|a>>>12),a=t+(i^s&(r^i))+n[13]+0xa9e3e905&0xffffffff,t=r+(a<<5&0xffffffff|a>>>27),a=s+(r^i&(t^r))+n[2]+0xfcefa3f8&0xffffffff,s=t+(a<<9&0xffffffff|a>>>23),a=i+(t^r&(s^t))+n[7]+0x676f02d9&0xffffffff,i=s+(a<<14&0xffffffff|a>>>18),a=r+(s^t&(i^s))+n[12]+0x8d2a4c8a&0xffffffff,a=t+((r=i+(a<<20&0xffffffff|a>>>12))^i^s)+n[5]+0xfffa3942&0xffffffff,a=s+((t=r+(a<<4&0xffffffff|a>>>28))^r^i)+n[8]+0x8771f681&0xffffffff,a=i+((s=t+(a<<11&0xffffffff|a>>>21))^t^r)+n[11]+0x6d9d6122&0xffffffff,a=r+((i=s+(a<<16&0xffffffff|a>>>16))^s^t)+n[14]+0xfde5380c&0xffffffff,a=t+((r=i+(a<<23&0xffffffff|a>>>9))^i^s)+n[1]+0xa4beea44&0xffffffff,a=s+((t=r+(a<<4&0xffffffff|a>>>28))^r^i)+n[4]+0x4bdecfa9&0xffffffff,a=i+((s=t+(a<<11&0xffffffff|a>>>21))^t^r)+n[7]+0xf6bb4b60&0xffffffff,a=r+((i=s+(a<<16&0xffffffff|a>>>16))^s^t)+n[10]+0xbebfbc70&0xffffffff,a=t+((r=i+(a<<23&0xffffffff|a>>>9))^i^s)+n[13]+0x289b7ec6&0xffffffff,a=s+((t=r+(a<<4&0xffffffff|a>>>28))^r^i)+n[0]+0xeaa127fa&0xffffffff,a=i+((s=t+(a<<11&0xffffffff|a>>>21))^t^r)+n[3]+0xd4ef3085&0xffffffff,a=r+((i=s+(a<<16&0xffffffff|a>>>16))^s^t)+n[6]+0x4881d05&0xffffffff,a=t+((r=i+(a<<23&0xffffffff|a>>>9))^i^s)+n[9]+0xd9d4d039&0xffffffff,a=s+((t=r+(a<<4&0xffffffff|a>>>28))^r^i)+n[12]+0xe6db99e5&0xffffffff,a=i+((s=t+(a<<11&0xffffffff|a>>>21))^t^r)+n[15]+0x1fa27cf8&0xffffffff,a=r+((i=s+(a<<16&0xffffffff|a>>>16))^s^t)+n[2]+0xc4ac5665&0xffffffff,r=i+(a<<23&0xffffffff|a>>>9),a=t+(i^(r|~s))+n[0]+0xf4292244&0xffffffff,t=r+(a<<6&0xffffffff|a>>>26),a=s+(r^(t|~i))+n[7]+0x432aff97&0xffffffff,s=t+(a<<10&0xffffffff|a>>>22),a=i+(t^(s|~r))+n[14]+0xab9423a7&0xffffffff,i=s+(a<<15&0xffffffff|a>>>17),a=r+(s^(i|~t))+n[5]+0xfc93a039&0xffffffff,r=i+(a<<21&0xffffffff|a>>>11),a=t+(i^(r|~s))+n[12]+0x655b59c3&0xffffffff,t=r+(a<<6&0xffffffff|a>>>26),a=s+(r^(t|~i))+n[3]+0x8f0ccc92&0xffffffff,s=t+(a<<10&0xffffffff|a>>>22),a=i+(t^(s|~r))+n[10]+0xffeff47d&0xffffffff,i=s+(a<<15&0xffffffff|a>>>17),a=r+(s^(i|~t))+n[1]+0x85845dd1&0xffffffff,r=i+(a<<21&0xffffffff|a>>>11),a=t+(i^(r|~s))+n[8]+0x6fa87e4f&0xffffffff,t=r+(a<<6&0xffffffff|a>>>26),a=s+(r^(t|~i))+n[15]+0xfe2ce6e0&0xffffffff,s=t+(a<<10&0xffffffff|a>>>22),a=i+(t^(s|~r))+n[6]+0xa3014314&0xffffffff,i=s+(a<<15&0xffffffff|a>>>17),a=r+(s^(i|~t))+n[13]+0x4e0811a1&0xffffffff,r=i+(a<<21&0xffffffff|a>>>11),a=t+(i^(r|~s))+n[4]+0xf7537e82&0xffffffff,t=r+(a<<6&0xffffffff|a>>>26),a=s+(r^(t|~i))+n[11]+0xbd3af235&0xffffffff,s=t+(a<<10&0xffffffff|a>>>22),a=i+(t^(s|~r))+n[2]+0x2ad7d2bb&0xffffffff,i=s+(a<<15&0xffffffff|a>>>17),a=r+(s^(i|~t))+n[9]+0xeb86d391&0xffffffff,e.g[0]=e.g[0]+t&0xffffffff,e.g[1]=e.g[1]+(i+(a<<21&0xffffffff|a>>>11))&0xffffffff,e.g[2]=e.g[2]+i&0xffffffff,e.g[3]=e.g[3]+s&0xffffffff}function r(e,t){var r=s;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}function n(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}})(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var n=r-this.blockSize,i=this.B,s=this.h,a=0;a<r;){if(0==s)for(;a<=n;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<r;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,i),s=0;break}}else for(;a<r;)if(i[s++]=e[a++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var i,s={};function a(e){return -128<=e&&128>e?r(e,function(e){return new n([0|e],0>e?-1:0)}):new n([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return p(o(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=0x100000000;return new n(t,0)}function l(e,t){if(0==e.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return p(l(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(t,8)),n=u,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);8>s?(s=o(Math.pow(t,s)),n=n.j(s).add(o(a))):n=(n=n.j(r)).add(o(a))}return n}var u=a(0),c=a(1),d=a(0x1000000);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return -1==e.h}function p(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(c)}function m(e,t){return e.add(p(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function _(e,t){if(h(t))throw Error("division by zero");if(h(e))return new b(u,u);if(f(e))return t=_(p(e),t),new b(p(t.g),p(t.h));if(f(t))return t=_(e,p(t)),new b(p(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var r=c,n=t;0>=n.l(e);)r=S(r),n=S(n);var i=w(r,1),s=w(n,1);for(n=w(n,2),r=w(r,2);!h(n);){var a=s.add(n);0>=a.l(e)&&(i=i.add(r),s=a),n=w(n,1),r=w(r,1)}return t=m(e,i.j(t)),new b(i,t)}for(i=u;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),a=(s=o(r)).j(t);f(a)||0<a.l(e);)r-=n,a=(s=o(r)).j(t);h(s)&&(s=c),i=i.add(s),e=m(e,a)}return new b(i,e)}function S(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function w(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new n(s,e.h)}(i=n.prototype).m=function(){if(f(this))return-p(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},i.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(f(this))return"-"+p(this).toString(e);for(var t=o(Math.pow(e,6)),r=this,n="";;){var i=_(r,t).g,s=((0<(r=m(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(h(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},i.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.l=function(e){return f(e=m(this,e))?-1:h(e)?0:1},i.abs=function(){return f(this)?p(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,r[s]=o<<16|a}return new n(r,-0x80000000&r[r.length-1]?-1:0)},i.j=function(e){if(h(this)||h(e))return u;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(d)&&0>e.l(d))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var a=this.i(i)>>>16,l=65535&this.i(i),c=e.i(s)>>>16,m=65535&e.i(s);r[2*i+2*s]+=l*m,v(r,2*i+2*s),r[2*i+2*s+1]+=a*m,v(r,2*i+2*s+1),r[2*i+2*s+1]+=l*c,v(r,2*i+2*s+1),r[2*i+2*s+2]+=a*c,v(r,2*i+2*s+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},i.A=function(e){return _(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,y=nL.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=o,n.fromString=l,g=nL.Integer=n}).apply(void 0!==nM?nM:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var nj=r(3429),nF=r(5314);let nB="@firebase/firestore",nU="4.7.14";class nV{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nV.UNAUTHENTICATED=new nV(null),nV.GOOGLE_CREDENTIALS=new nV("google-credentials-uid"),nV.FIRST_PARTY=new nV("first-party-uid"),nV.MOCK_USER=new nV("mock-user");let nz="11.7.3";function nq(e){nz=e}function n$(e){return(0,nD.inspect)(e,{depth:100})}let nW=new rj("@firebase/firestore");function nK(){return nW.logLevel}function nH(e,...t){if(nW.logLevel<=m.DEBUG){let r=t.map(nQ);nW.debug(`Firestore (${nz}): ${e}`,...r)}}function nG(e,...t){if(nW.logLevel<=m.ERROR){let r=t.map(nQ);nW.error(`Firestore (${nz}): ${e}`,...r)}}function nZ(e,...t){if(nW.logLevel<=m.WARN){let r=t.map(nQ);nW.warn(`Firestore (${nz}): ${e}`,...r)}}function nQ(e){if("string"==typeof e)return e;try{return n$(e)}catch(t){return e}}function nY(e,t,r){let n="Unexpected state";"string"==typeof t?n=t:r=t,nX(e,n,r)}function nX(e,t,r){let n=`FIRESTORE (${nz}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{let e=JSON.stringify(r);n+=" CONTEXT: "+e}catch(e){n+=" CONTEXT: "+r}throw nG(n),Error(n)}function nJ(e,t,r,n){let i="Unexpected state";"string"==typeof r?i=r:n=r,e||nX(t,i,n)}function n0(e,t){return e}let n1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class n2 extends rh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class n3{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class n4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nV.UNAUTHENTICATED))}shutdown(){}}class n5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n8{constructor(e){this.authProvider=e,this.currentUser=nV.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){nJ(void 0===this.tokenListener,42304);let r=this.tokenCounter,n=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),i=new n3;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new n3,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{nH("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),s())};this.authProvider.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?a(e):(nH("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new n3)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(nH("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(nJ("string"==typeof t.accessToken,31837,{tokenData:t}),new n4(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return nJ(null===e||"string"==typeof e,2055,{currentUid:e}),new nV(e)}}class n9{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=nV.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class n7{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new n9(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(nV.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ie{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class it{constructor(e,t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null,this.serverAppAppCheckToken=null,nu(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken)}start(e,t){nJ(void 0===this.tokenListener,3512);let r=e=>{null!=e.error&&nH("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,nH("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{nH("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?n(e):nH("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.serverAppAppCheckToken)return Promise.resolve(new ie(this.serverAppAppCheckToken));let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(nJ("string"==typeof e.token,44558,{tokenResult:e}),this.latestAppCheckToken=e.token,new ie(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}}function ir(e){if(!e)return new n6;switch(e.type){case"firstParty":return new n7(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new n2(n1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function ii(e){return(0,nP.randomBytes)(e)}function is(){return new nD.TextEncoder}function ia(){return new TextDecoder("utf-8")}class io{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",n=20;for(;r.length<n;){let i=ii(40);for(let s=0;s<i.length;++s)r.length<n&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function il(e,t){return e<t?-1:e>t?1:0}function iu(e,t){let r=0;for(;r<e.length&&r<t.length;){let n=e.codePointAt(r),i=t.codePointAt(r);if(n!==i){if(n<128&&i<128)return il(n,i);{let s=is(),a=id(s.encode(ic(e,r)),s.encode(ic(t,r)));if(0!==a)return a;return il(n,i)}}r+=n>65535?2:1}return il(e.length,t.length)}function ic(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function id(e,t){for(let r=0;r<e.length&&r<t.length;++r)if(e[r]!==t[r])return il(e[r],t[r]);return il(e.length,t.length)}function ih(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}function ip(e){return e+"\0"}let im=-0xe7791f700,ig=1e6;class iy{static now(){return iy.fromMillis(Date.now())}static fromDate(e){return iy.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ig);return new iy(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new n2(n1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<im||e>=0x3afff44180)throw new n2(n1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ig}_compareTo(e){return this.seconds===e.seconds?il(this.nanoseconds,e.nanoseconds):il(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-im).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class iv{static fromTimestamp(e){return new iv(e)}static min(){return new iv(new iy(0,0))}static max(){return new iv(new iy(0x3afff4417f,1e9-1))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}let ib="__name__";class i_{constructor(e,t,r){void 0===t?t=0:t>e.length&&nY(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&nY(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===i_.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i_?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=i_.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return il(e.length,t.length)}static compareSegments(e,t){let r=i_.isNumericId(e),n=i_.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?i_.extractNumericId(e).compare(i_.extractNumericId(t)):iu(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return g.fromString(e.substring(4,e.length-2))}}class iS extends i_{construct(e,t,r){return new iS(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new n2(n1.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new iS(t)}static emptyPath(){return new iS([])}}let iw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class iT extends i_{construct(e,t,r){return new iT(e,t,r)}static isValidIdentifier(e){return iw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),iT.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ib}static keyField(){return new iT([ib])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new n2(n1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new n2(n1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if(!("\\"===t||"."===t||"`"===t))throw new n2(n1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new n2(n1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new iT(t)}static emptyPath(){return new iT([])}}class iE{constructor(e){this.path=e}static fromPath(e){return new iE(iS.fromString(e))}static fromName(e){return new iE(iS.fromString(e).popFirst(5))}static empty(){return new iE(iS.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===iS.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return iS.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new iE(new iS(e.slice()))}}let iC=-1,ix=0;class iI{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function ik(e){return e.fields.find(e=>2===e.kind)}function iR(e){return e.fields.filter(e=>2!==e.kind)}function iA(e){let t=iR(e);return 0===t.length?0:t[t.length-1].kind}function iN(e,t){let r=il(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let n=0;n<Math.min(e.fields.length,t.fields.length);++n)if(0!==(r=iP(e.fields[n],t.fields[n])))return r;return il(e.fields.length,t.fields.length)}function iO(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}iI.UNKNOWN_ID=-1;class iD{constructor(e,t){this.fieldPath=e,this.kind=t}}function iP(e,t){let r=iT.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:il(e.kind,t.kind)}class iM{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new iM(ix,iF.min())}}function iL(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new iF(iv.fromTimestamp(1e9===n?new iy(r+1,0):new iy(r,n)),iE.empty(),t)}function ij(e){return new iF(e.readTime,e.key,iC)}class iF{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new iF(iv.min(),iE.empty(),iC)}static max(){return new iF(iv.max(),iE.empty(),iC)}}function iB(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=iE.comparator(e.documentKey,t.documentKey))?r:il(e.largestBatchId,t.largestBatchId)}let iU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function iz(e){if(e.code===n1.FAILED_PRECONDITION&&e.message===iU)nH("LocalStore","Unexpectedly lost primary lease");else throw e}class iq{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&nY(59440),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new iq((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof iq)return t;return iq.resolve(t)}catch(e){return iq.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):iq.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):iq.reject(t)}static resolve(e){return new iq((t,r)=>{t(e)})}static reject(e){return new iq((t,r)=>{r(e)})}static waitFor(e){return new iq((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=iq.resolve(!1);for(let r of e)t=t.next(e=>e?iq.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new iq((r,n)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new iq((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}let i$="SimpleDb",iW=3;class iK{static open(e,t,r,n){try{return new iK(t,e.transaction(n,r))}catch(e){throw new iQ(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new n3,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new iQ(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=i1(t.target.error);this.completionDeferred.reject(new iQ(e,r))}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(nH(i$,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new iX(this.transaction.objectStore(e))}}class iH{static delete(e){return nH(i$,"Removing database:",e),iJ(tZ().indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!ru())return!1;if(iH.isMockPersistence())return!0;let e=rr(),t=iH.getIOSVersion(e),r=0<t&&t<10,n=iG(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!i}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,this.lastClosedDbVersion=null,12.2===iH.getIOSVersion(rr())&&nG("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async ensureDb(e){return this.db||(nH(i$,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new iQ(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new n2(n1.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new n2(n1.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new iQ(e,n))},n.onupgradeneeded=e=>{nH(i$,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;if(null!==this.lastClosedDbVersion&&this.lastClosedDbVersion!==e.oldVersion)throw Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.lastClosedDbVersion}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.schemaConverter.createOrUpgrade(t,n.transaction,e.oldVersion,this.version).next(()=>{nH(i$,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{let t=e.target;this.lastClosedDbVersion=t.version},{passive:!0})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=iK.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),iq.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<iW;if(nH(i$,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iG(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class iZ{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return iJ(this.dbCursor.delete())}}class iQ extends n2{constructor(e,t){super(n1.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function iY(e){return"IndexedDbTransactionError"===e.name}class iX{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(nH(i$,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(nH(i$,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),iJ(r)}add(e){return nH(i$,"ADD",this.store.name,e,e),iJ(this.store.add(e))}get(e){return iJ(this.store.get(e)).next(t=>(void 0===t&&(t=null),nH(i$,"GET",this.store.name,e,t),t))}delete(e){return nH(i$,"DELETE",this.store.name,e),iJ(this.store.delete(e))}count(){return nH(i$,"COUNT",this.store.name),iJ(this.store.count())}loadAll(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new iq((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new iq((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){nH(i$,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let n=this.cursor(r);return this.iterateCursor(n,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.iterateCursor(n,t)}iterateSerial(e){let t=this.cursor({});return new iq((r,n)=>{t.onerror=e=>{n(i1(e.target.error))},t.onsuccess=t=>{let n=t.target.result;if(!n){r();return}e(n.primaryKey,n.value).next(e=>{e?n.continue():r()})}})}iterateCursor(e,t){let r=[];return new iq((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i){n();return}let s=new iZ(i),a=t(i.primaryKey,i.value,s);if(a instanceof iq){let e=a.catch(e=>(s.done(),iq.reject(e)));r.push(e)}s.isDone?n():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}}).next(()=>iq.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function iJ(e){return new iq((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(i1(e.target.error))}})}let i0=!1;function i1(e){let t=iH.getIOSVersion(rr());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new n2("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return i0||(i0=!0,setTimeout(()=>{throw e},0)),e}}return e}let i2="IndexBackfiller",i3=15e3,i4=6e4,i6=50;class i5{constructor(e,t){this.asyncQueue=e,this.backfiller=t,this.task=null}start(){this.schedule(i3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(e){nH(i2,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.backfiller.backfill();nH(i2,`Documents written: ${e}`)}catch(e){iY(e)?nH(i2,"Ignoring IndexedDB error during index backfill: ",e):await iz(e)}await this.schedule(i4)})}}class i8{constructor(e,t){this.localStore=e,this.persistence=t}async backfill(e=i6){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.writeIndexEntries(t,e))}writeIndexEntries(e,t){let r=new Set,n=t,i=!0;return iq.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(!(null===t||r.has(t)))return nH(i2,`Processing collection: ${t}`),this.writeEntriesForCollectionGroup(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}writeEntriesForCollectionGroup(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.getNewOffset(n,r)).next(r=>(nH(i2,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}getNewOffset(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=ij(t);iB(n,r)>0&&(r=n)}),new iF(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class i9{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}i9.INVALID=-1;let i7="\x01",se="\x01",st="\x10",sr="\x11";function sn(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=ss(t)),t=si(e.get(r),t);return ss(t)}function si(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+=i7+st;break;case i7:r+=i7+sr;break;default:r+=n}}return r}function ss(e){return e+i7+se}function sa(e){let t=e.length;if(nJ(t>=2,64408,{path:e}),2===t)return nJ(e.charAt(0)===i7&&e.charAt(1)===se,56145,{path:e}),iS.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf(i7,s);switch((t<0||t>r)&&nY(50515,{path:e}),e.charAt(t+1)){case se:let a;let o=e.substring(s,t);0===i.length?a=o:(i+=o,a=i,i=""),n.push(a);break;case st:i+=e.substring(s,t),i+="\0";break;case sr:i+=e.substring(s,t+1);break;default:nY(61167,{path:e})}s=t+2}return new iS(n)}let so="remoteDocuments",sl="owner",su="owner",sc="mutationQueues",sd="userId",sh="mutations",sf="batchId",sp="userMutationsIndex",sm=["userId","batchId"];function sg(e){return[e]}function sy(e,t){return[e,sn(t)]}function sv(e,t,r){return[e,sn(t),r]}let sb={},s_="documentMutations",sS="remoteDocumentsV14",sw=["prefixPath","collectionGroup","readTime","documentId"],sT="documentKeyIndex",sE=["prefixPath","collectionGroup","documentId"],sC="collectionGroupIndex",sx=["collectionGroup","readTime","prefixPath","documentId"],sI="remoteDocumentGlobal",sk="remoteDocumentGlobalKey",sR="targets",sA="targetId",sN="queryTargetsIndex",sO=["canonicalId","targetId"],sD="targetDocuments",sP=["targetId","path"],sM="documentTargetsIndex",sL=["path","targetId"],sj="targetGlobalKey",sF="targetGlobal",sB="collectionParents",sU=["collectionId","parent"],sV="clientMetadata",sz="clientId",sq="bundles",s$="bundleId",sW="namedQueries",sK="name",sH="indexConfiguration",sG="indexId",sZ="collectionGroupIndex",sQ="collectionGroup",sY="indexState",sX=["indexId","uid"],sJ="sequenceNumberIndex",s0=["uid","sequenceNumber"],s1="indexEntries",s2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],s3="documentKeyIndex",s4=["indexId","uid","orderedDocumentKey"],s6="documentOverlays",s5=["userId","collectionPath","documentId"],s8="collectionPathOverlayIndex",s9=["userId","collectionPath","largestBatchId"],s7="collectionGroupOverlayIndex",ae=["userId","collectionGroup","largestBatchId"],at="globals",ar="name",an=[sc,sh,s_,so,sR,sl,sF,sD,sV,sI,sB,sq,sW],ai=[...an,s6],as=[sc,sh,s_,sS,sR,sl,sF,sD,sV,sI,sB,sq,sW,s6],aa=as,ao=[...aa,sH,sY,s1],al=ao,au=[...ao,at];function ac(e){return 17===e?au:16===e?al:15===e?ao:14===e?aa:13===e?as:12===e?ai:11===e?an:void nY(60245)}class ad extends iV{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function ah(e,t){let r=n0(e);return iH.getStore(r.simpleDbTransaction,t)}function af(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function ap(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function am(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ag{constructor(e,t){this.comparator=e,this.root=t||av.EMPTY}insert(e,t){return new ag(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,av.BLACK,null,null))}remove(e){return new ag(this.comparator,this.root.remove(e,this.comparator).copy(null,null,av.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ay(this.root,e,this.comparator,!0)}}class ay{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else if(0===i){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class av{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:av.RED,this.left=null!=n?n:av.EMPTY,this.right=null!=i?i:av.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new av(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return av.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r;let n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return av.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,av.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,av.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nY(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nY(14113,{key:this.key,value:this.value});let e=this.left.check();if(e===this.right.check())return e+(this.isRed()?0:1);throw nY(27949)}}av.EMPTY=null,av.RED=!0,av.BLACK=!1;class ab{constructor(){this.size=0}get key(){throw nY(57766)}get value(){throw nY(16141)}get color(){throw nY(16727)}get left(){throw nY(29726)}get right(){throw nY(36894)}copy(e,t,r,n,i){return this}insert(e,t,r){return new av(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}av.EMPTY=new ab;class a_{constructor(e){this.comparator=e,this.data=new ag(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aS(this.data.getIterator())}getIteratorFrom(e){return new aS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof a_)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new a_(this.comparator);return t.data=e,t}}class aS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function aw(e,t,r,n,i){let s=e.getIterator(),a=t.getIterator(),o=aT(s),l=aT(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let n=r(o,l);n<0?t=!0:n>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(n(l),l=aT(a)):t?(i(o),o=aT(s)):(o=aT(s),l=aT(a))}}function aT(e){return e.hasNext()?e.getNext():void 0}class aE{constructor(e){this.fields=e,e.sort(iT.comparator)}static empty(){return new aE([])}unionWith(e){let t=new a_(iT.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new aE(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function aC(e){return Buffer.from(e,"base64").toString("binary")}function ax(e){return Buffer.from(e,"binary").toString("base64")}class aI{constructor(e){this.binaryString=e}static fromBase64String(e){return new aI(aC(e))}static fromUint8Array(e){return new aI(ak(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return ax(this.binaryString)}toUint8Array(){return aR(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return il(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function ak(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function aR(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}aI.EMPTY_BYTE_STRING=new aI("");let aA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aN(e){if(nJ(!!e,39018),"string"==typeof e){let t=0,r=aA.exec(e);if(nJ(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:aO(e.seconds),nanos:aO(e.nanos)}}function aO(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function aD(e){return"string"==typeof e?aI.fromBase64String(e):aI.fromUint8Array(e)}let aP="server_timestamp",aM="__type__",aL="__previous_value__",aj="__local_write_time__";function aF(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[aM])||void 0===r?void 0:r.stringValue)===aP}function aB(e,t){let r={fields:{[aM]:{stringValue:aP},[aj]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&aF(t)&&(t=aU(t)),t&&(r.fields[aL]=t),{mapValue:r}}function aU(e){let t=e.mapValue.fields[aL];return aF(t)?aU(t):t}function aV(e){let t=aN(e.mapValue.fields[aj].timestampValue);return new iy(t.seconds,t.nanos)}class az{constructor(e,t,r,n,i,s,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}let aq="(default)";class a${constructor(e,t){this.projectId=e,this.database=t||aq}static empty(){return new a$("","")}get isDefaultDatabase(){return this.database===aq}isEqual(e){return e instanceof a$&&e.projectId===this.projectId&&e.database===this.database}}function aW(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new n2(n1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new a$(e.options.projectId,t)}let aK=-1;function aH(e){return null==e}function aG(e){return 0===e&&1/e==-1/0}function aZ(e){return"number"==typeof e&&Number.isInteger(e)&&!aG(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}let aQ="__type__",aY="__max__",aX={mapValue:{fields:{__type__:{stringValue:aY}}}},aJ="__vector__",a0="value",a1={nullValue:"NULL_VALUE"};function a2(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?aF(e)?4:oA(e)?0x1fffffffffffff:ok(e)?10:11:nY(28295,{value:e})}function a3(e,t){if(e===t)return!0;let r=a2(e);if(r!==a2(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return aV(e).isEqual(aV(t));case 3:return a4(e,t);case 5:return e.stringValue===t.stringValue;case 6:return a5(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return a6(e,t);case 2:return a8(e,t);case 9:return ih(e.arrayValue.values||[],t.arrayValue.values||[],a3);case 10:case 11:return a9(e,t);default:return nY(52216,{left:e})}}function a4(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=aN(e.timestampValue),n=aN(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function a6(e,t){return aO(e.geoPointValue.latitude)===aO(t.geoPointValue.latitude)&&aO(e.geoPointValue.longitude)===aO(t.geoPointValue.longitude)}function a5(e,t){return aD(e.bytesValue).isEqual(aD(t.bytesValue))}function a8(e,t){if("integerValue"in e&&"integerValue"in t)return aO(e.integerValue)===aO(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=aO(e.doubleValue),n=aO(t.doubleValue);return r===n?aG(r)===aG(n):isNaN(r)&&isNaN(n)}return!1}function a9(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(af(r)!==af(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!a3(r[e],n[e])))return!1;return!0}function a7(e,t){return void 0!==(e.values||[]).find(e=>a3(e,t))}function oe(e,t){if(e===t)return 0;let r=a2(e),n=a2(t);if(r!==n)return il(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return il(e.booleanValue,t.booleanValue);case 2:return ot(e,t);case 3:return or(e.timestampValue,t.timestampValue);case 4:return or(aV(e),aV(t));case 5:return iu(e.stringValue,t.stringValue);case 6:return os(e.bytesValue,t.bytesValue);case 7:return on(e.referenceValue,t.referenceValue);case 8:return oi(e.geoPointValue,t.geoPointValue);case 9:return oa(e.arrayValue,t.arrayValue);case 10:return oo(e.mapValue,t.mapValue);case 11:return ol(e.mapValue,t.mapValue);default:throw nY(23264,{leftType:r})}}function ot(e,t){let r=aO(e.integerValue||e.doubleValue),n=aO(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function or(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return il(e,t);let r=aN(e),n=aN(t),i=il(r.seconds,n.seconds);return 0!==i?i:il(r.nanos,n.nanos)}function on(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=il(r[e],n[e]);if(0!==t)return t}return il(r.length,n.length)}function oi(e,t){let r=il(aO(e.latitude),aO(t.latitude));return 0!==r?r:il(aO(e.longitude),aO(t.longitude))}function os(e,t){let r=aD(e),n=aD(t);return r.compareTo(n)}function oa(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=oe(r[e],n[e]);if(t)return t}return il(r.length,n.length)}function oo(e,t){var r,n,i,s;let a=e.fields||{},o=t.fields||{},l=null===(r=a[a0])||void 0===r?void 0:r.arrayValue,u=null===(n=o[a0])||void 0===n?void 0:n.arrayValue,c=il((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:oa(l,u)}function ol(e,t){if(e===aX.mapValue&&t===aX.mapValue)return 0;if(e===aX.mapValue)return 1;if(t===aX.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=iu(n[e],s[e]);if(0!==t)return t;let a=oe(r[n[e]],i[s[e]]);if(0!==a)return a}return il(n.length,s.length)}function ou(e){return oc(e)}function oc(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return oh(e.timestampValue);if("stringValue"in e)return e.stringValue;if("bytesValue"in e)return od(e.bytesValue);else if("referenceValue"in e)return op(e.referenceValue);else if("geoPointValue"in e)return of(e.geoPointValue);else if("arrayValue"in e)return og(e.arrayValue);else if("mapValue"in e)return om(e.mapValue);else return nY(61005,{value:e})}function od(e){return aD(e).toBase64()}function oh(e){let t=aN(e);return`time(${t.seconds},${t.nanos})`}function of(e){return`geo(${e.latitude},${e.longitude})`}function op(e){return iE.fromName(e).toString()}function om(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${oc(e.fields[i])}`;return r+"}"}function og(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=oc(n);return t+"]"}function oy(e){switch(a2(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=aU(e);return t?16+oy(t):16;case 5:return 2*e.stringValue.length;case 6:return aD(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return ob(e.arrayValue);case 10:case 11:return ov(e.mapValue);default:throw nY(13486,{value:e})}}function ov(e){let t=0;return ap(e.fields,(e,r)=>{t+=e.length+oy(r)}),t}function ob(e){return(e.values||[]).reduce((e,t)=>e+oy(t),0)}function o_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function oS(e){return!!e&&"integerValue"in e}function ow(e){return!!e&&"doubleValue"in e}function oT(e){return oS(e)||ow(e)}function oE(e){return!!e&&"arrayValue"in e}function oC(e){return!!e&&"nullValue"in e}function ox(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oI(e){return!!e&&"mapValue"in e}function ok(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[aQ])||void 0===r?void 0:r.stringValue)===aJ}function oR(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return ap(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=oR(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=oR(e.arrayValue.values[r]);return t}}function oA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===aY}let oN={mapValue:{fields:{[aQ]:{stringValue:aJ},[a0]:{arrayValue:{}}}}};function oO(e){if("nullValue"in e)return a1;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};if("bytesValue"in e)return{bytesValue:""};if("referenceValue"in e)return o_(a$.empty(),iE.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if(!("mapValue"in e))return nY(35942,{value:e});else return ok(e)?oN:{mapValue:{}}}function oD(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};if("bytesValue"in e)return o_(a$.empty(),iE.empty());if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return oN;else if(!("mapValue"in e))return nY(61959,{value:e});else return ok(e)?{mapValue:{}}:aX}function oP(e,t){let r=oe(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function oM(e,t){let r=oe(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class oL{constructor(e){this.value=e}static empty(){return new oL({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!oI(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oR(t)}setAll(e){let t=iT.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=oR(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());oI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return a3(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];oI(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(ap(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new oL(oR(this.value))}}function oj(e){let t=[];return ap(e.fields,(e,r)=>{let n=new iT([e]);if(oI(r)){let e=oj(r.mapValue).fields;if(0===e.length)t.push(n);else for(let r of e)t.push(n.child(r))}else t.push(n)}),new aE(t)}class oF{constructor(e,t,r,n,i,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new oF(e,0,iv.min(),iv.min(),iv.min(),oL.empty(),0)}static newFoundDocument(e,t,r,n){return new oF(e,1,t,iv.min(),r,n,0)}static newNoDocument(e,t){return new oF(e,2,t,iv.min(),iv.min(),oL.empty(),0)}static newUnknownDocument(e,t){return new oF(e,3,t,iv.min(),iv.min(),oL.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(iv.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oL.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oL.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=iv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oF&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oF(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function oB(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?oe(n,i):nY(42886)}class oU{constructor(e,t){this.position=e,this.inclusive=t}}function oV(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(n=s.field.isKeyField()?iE.comparator(iE.fromName(a.referenceValue),r.key):oe(a,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function oz(e,t,r){let n=oV(e,t,r);return e.inclusive?n>=0:n>0}function oq(e,t,r){let n=oV(e,t,r);return e.inclusive?n<=0:n<0}function o$(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!a3(e.position[r],t.position[r]))return!1;return!0}class oW{constructor(e,t="asc"){this.field=e,this.dir=t}}function oK(e){return e.field.canonicalString()+e.dir}function oH(e){return`${e.field.canonicalString()} (${e.dir})`}function oG(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class oZ{}class oQ extends oZ{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new le(e,t,r):"array-contains"===t?new li(e,r):"in"===t?new ls(e,r):"not-in"===t?new la(e,r):"array-contains-any"===t?new lo(e,r):new oQ(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new lt(e,r):new lr(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(oe(t,this.value)):null!==t&&a2(this.value)===a2(t)&&this.matchesComparison(oe(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nY(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oY extends oZ{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new oY(e,t)}matches(e){return oX(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function oX(e){return"and"===e.op}function oJ(e){return"or"===e.op}function o0(e){return o1(e)&&oX(e)}function o1(e){for(let t of e.filters)if(t instanceof oY)return!1;return!0}function o2(e){if(e instanceof oQ)return e.field.canonicalString()+e.op.toString()+ou(e.value);if(o0(e))return e.filters.map(e=>o2(e)).join(",");{let t=e.filters.map(e=>o2(e)).join(",");return`${e.op}(${t})`}}function o3(e,t){return e instanceof oQ?o4(e,t):e instanceof oY?o6(e,t):void nY(19439)}function o4(e,t){return t instanceof oQ&&e.op===t.op&&e.field.isEqual(t.field)&&a3(e.value,t.value)}function o6(e,t){return t instanceof oY&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&o3(r,t.filters[n]),!0)}function o5(e,t){let r=e.filters.concat(t);return oY.create(r,e.op)}function o8(e){return e instanceof oQ?o7(e):e instanceof oY?o9(e):"Filter"}function o9(e){return e.op.toString()+" {"+e.getFilters().map(o8).join(" ,")+"}"}function o7(e){return`${e.field.canonicalString()} ${e.op} ${ou(e.value)}`}class le extends oQ{constructor(e,t,r){super(e,t,r),this.key=iE.fromName(r.referenceValue)}matches(e){let t=iE.comparator(e.key,this.key);return this.matchesComparison(t)}}class lt extends oQ{constructor(e,t){super(e,"in",t),this.keys=ln("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lr extends oQ{constructor(e,t){super(e,"not-in",t),this.keys=ln("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ln(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>iE.fromName(e.referenceValue))}class li extends oQ{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return oE(t)&&a7(t.arrayValue,this.value)}}class ls extends oQ{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&a7(this.value.arrayValue,t)}}class la extends oQ{constructor(e,t){super(e,"not-in",t)}matches(e){if(a7(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!a7(this.value.arrayValue,t)}}class lo extends oQ{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!oE(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>a7(this.value.arrayValue,e))}}class ll{constructor(e,t=null,r=[],n=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=a,this.memoizedCanonicalId=null}}function lu(e,t=null,r=[],n=[],i=null,s=null,a=null){return new ll(e,t,r,n,i,s,a)}function lc(e){let t=n0(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>o2(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>oK(e)).join(","),aH(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:"),e+=t.startAt.position.map(e=>ou(e)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:"),e+=t.endAt.position.map(e=>ou(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function ld(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>o8(e)).join(", ")}]`),aH(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>oH(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+(e.startAt.inclusive?"b:":"a:"),t+=e.startAt.position.map(e=>ou(e)).join(",")),e.endAt&&(t+=", endAt: "+(e.endAt.inclusive?"a:":"b:"),t+=e.endAt.position.map(e=>ou(e)).join(",")),`Target(${t})`}function lh(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!oG(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!o3(e.filters[r],t.filters[r]))return!1;return!!(e.collectionGroup===t.collectionGroup&&e.path.isEqual(t.path)&&o$(e.startAt,t.startAt))&&o$(e.endAt,t.endAt)}function lf(e){return iE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function lp(e,t){return e.filters.filter(e=>e instanceof oQ&&e.field.isEqual(t))}function lm(e,t){let r=ik(t);if(void 0===r)return null;for(let t of lp(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function lg(e,t){let r=new Map;for(let n of iR(t))for(let t of lp(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function ly(e,t){let r=[],n=!0;for(let i of iR(t)){let t=0===i.kind?lb(e,i.fieldPath,e.startAt):l_(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new oU(r,n)}function lv(e,t){let r=[],n=!0;for(let i of iR(t)){let t=0===i.kind?l_(e,i.fieldPath,e.endAt):lb(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new oU(r,n)}function lb(e,t,r){let n=a1,i=!0;for(let r of lp(e,t)){let e=a1,t=!0;switch(r.op){case"<":case"<=":e=oO(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=a1}0>oP({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>oP({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function l_(e,t,r){let n=aX,i=!0;for(let r of lp(e,t)){let e=aX,t=!0;switch(r.op){case">=":case">":e=oD(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=aX}oM({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];oM({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function lS(e){let t=new a_(iT.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(r?1:0)}function lw(e){return null!==e.limit}class lT{constructor(e,t=null,r=[],n=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function lE(e,t,r,n,i,s,a,o){return new lT(e,t,r,n,i,s,a,o)}function lC(e){return new lT(e)}function lx(e,t){return new lT(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function lI(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lk(e){let t=new a_(iT.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}function lR(e){return iE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function lA(e){return null!==e.collectionGroup}function lN(e){let t=n0(e);if(null===t.memoizedNormalizedOrderBy){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let r of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(r),e.add(r.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";lk(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.memoizedNormalizedOrderBy.push(new oW(n,r))}),e.has(iT.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new oW(iT.keyField(),r))}return t.memoizedNormalizedOrderBy}function lO(e){let t=n0(e);return t.memoizedTarget||(t.memoizedTarget=lP(t,lN(e))),t.memoizedTarget}function lD(e){let t=n0(e);return t.memoizedAggregateTarget||(t.memoizedAggregateTarget=lP(t,e.explicitOrderBy)),t.memoizedAggregateTarget}function lP(e,t){if("F"===e.limitType)return lu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new oW(e.field,t)});let r=e.endAt?new oU(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new oU(e.startAt.position,e.startAt.inclusive):null;return lu(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function lM(e,t){let r=e.filters.concat([t]);return new lT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function lL(e,t){let r=e.explicitOrderBy.concat([t]);return new lT(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function lj(e,t,r){return new lT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function lF(e,t){return new lT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function lB(e,t){return new lT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function lU(e,t){return lh(lO(e),lO(t))&&e.limitType===t.limitType}function lV(e){return`${lc(lO(e))}|lt:${e.limitType}`}function lz(e){return`Query(target=${ld(lO(e))}; limitType=${e.limitType})`}function lq(e,t){return t.isFoundDocument()&&l$(e,t)&&lW(e,t)&&lK(e,t)&&lH(e,t)}function l$(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):iE.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function lW(e,t){for(let r of lN(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function lK(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function lH(e,t){return(!e.startAt||!!oq(e.startAt,lN(e),t))&&(!e.endAt||!!oz(e.endAt,lN(e),t))}function lG(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lZ(e){return(t,r)=>{let n=!1;for(let i of lN(e)){let e=lQ(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function lQ(e,t,r){let n=e.field.isKeyField()?iE.comparator(t.key,r.key):oB(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return nY(19790,{direction:e.dir})}}class lY{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e)){n[r]=[e,t];return}n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){ap(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return am(this.inner)}size(){return this.innerSize}}let lX=new ag(iE.comparator);function lJ(){return lX}let l0=new ag(iE.comparator);function l1(...e){let t=l0;for(let r of e)t=t.insert(r.key,r);return t}function l2(){return l5()}function l3(e){let t=l0;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function l4(){return l5()}function l6(){return l5()}function l5(){return new lY(e=>e.toString(),(e,t)=>e.isEqual(t))}let l8=new ag(iE.comparator);function l9(){return l8}let l7=new a_(iE.comparator);function ue(...e){let t=l7;for(let r of e)t=t.add(r);return t}let ut=new a_(il);function ur(){return ut}function un(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aG(t)?"-0":t}}function ui(e){return{integerValue:""+e}}function us(e,t){return aZ(t)?ui(t):un(e,t)}class ua{constructor(){this._=void 0}}function uo(e,t,r){return e instanceof ud?aB(r,t):e instanceof uh?uf(e,t):e instanceof up?um(e,t):uy(e,t)}function ul(e,t,r){return e instanceof uh?uf(e,t):e instanceof up?um(e,t):r}function uu(e,t){return e instanceof ug?oT(t)?t:{integerValue:0}:null}function uc(e,t){return e instanceof uh&&t instanceof uh||e instanceof up&&t instanceof up?ih(e.elements,t.elements,a3):e instanceof ug&&t instanceof ug?a3(e.operand,t.operand):e instanceof ud&&t instanceof ud}class ud extends ua{}class uh extends ua{constructor(e){super(),this.elements=e}}function uf(e,t){let r=ub(t);for(let t of e.elements)r.some(e=>a3(e,t))||r.push(t);return{arrayValue:{values:r}}}class up extends ua{constructor(e){super(),this.elements=e}}function um(e,t){let r=ub(t);for(let t of e.elements)r=r.filter(e=>!a3(e,t));return{arrayValue:{values:r}}}class ug extends ua{constructor(e,t){super(),this.serializer=e,this.operand=t}}function uy(e,t){let r=uu(e,t),n=uv(r)+uv(e.operand);return oS(r)&&oS(e.operand)?ui(n):un(e.serializer,n)}function uv(e){return aO(e.integerValue||e.doubleValue)}function ub(e){return oE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class u_{constructor(e,t){this.field=e,this.transform=t}}function uS(e,t){return e.field.isEqual(t.field)&&uc(e.transform,t.transform)}function uw(e,t){return void 0===e&&void 0===t||!!e&&!!t&&ih(e,t,(e,t)=>uS(e,t))}class uT{constructor(e,t){this.version=e,this.transformResults=t}}class uE{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new uE}static exists(e){return new uE(void 0,e)}static updateTime(e){return new uE(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uC(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ux{}function uI(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new uV(e.key,uE.none()):new uO(e.key,e.data,uE.none());{let r=e.data,n=oL.empty(),i=new a_(iT.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new uM(e.key,n,new aE(i.toArray()),uE.none())}}function uk(e,t,r){e instanceof uO?uD(e,t,r):e instanceof uM?uL(e,t,r):uz(e,t,r)}function uR(e,t,r,n){return e instanceof uO?uP(e,t,r,n):e instanceof uM?uj(e,t,r,n):uq(e,t,r)}function uA(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=uu(n.transform,e||null);null!=i&&(null===r&&(r=oL.empty()),r.set(n.field,i))}return r||null}function uN(e,t){return!!(e.type===t.type&&e.key.isEqual(t.key)&&e.precondition.isEqual(t.precondition)&&uw(e.fieldTransforms,t.fieldTransforms))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class uO extends ux{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}function uD(e,t,r){let n=e.value.clone(),i=uB(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function uP(e,t,r,n){if(!uC(e.precondition,t))return r;let i=e.value.clone(),s=uU(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}class uM extends ux{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uL(e,t,r){if(!uC(e.precondition,t)){t.convertToUnknownDocument(r.version);return}let n=uB(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(uF(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function uj(e,t,r,n){if(!uC(e.precondition,t))return r;let i=uU(e.fieldTransforms,n,t),s=t.data;return(s.setAll(uF(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function uF(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function uB(e,t,r){let n=new Map;nJ(e.length===r.length,32656,{serverTransformResultCount:r.length,fieldTransformCount:e.length});for(let i=0;i<r.length;i++){let s=e[i],a=s.transform,o=t.data.field(s.field);n.set(s.field,ul(a,o,r[i]))}return n}function uU(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,uo(e,s,t))}return n}class uV extends ux{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function uz(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function uq(e,t,r){return uC(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class u$ extends ux{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uW{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&uk(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=uR(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=uR(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=l6();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=uI(s,a=t.has(n.key)?null:a);null!==o&&r.set(n.key,o),s.isValidDocument()||s.convertToNoDocument(iv.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(e,t)=>uN(e,t))&&ih(this.baseMutations,e.baseMutations,(e,t)=>uN(e,t))}}class uK{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){nJ(e.mutations.length===r.length,58842,{mutationsSent:e.mutations.length,resultsReceived:r.length});let n=l9(),i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new uK(e,t,r,n)}}class uH{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class uG{constructor(e,t){this.count=e,this.unchangedNames=t}}function uZ(e){switch(e){case n1.OK:return nY(64938);case n1.CANCELLED:case n1.UNKNOWN:case n1.DEADLINE_EXCEEDED:case n1.RESOURCE_EXHAUSTED:case n1.INTERNAL:case n1.UNAVAILABLE:case n1.UNAUTHENTICATED:return!1;case n1.INVALID_ARGUMENT:case n1.NOT_FOUND:case n1.ALREADY_EXISTS:case n1.PERMISSION_DENIED:case n1.FAILED_PRECONDITION:case n1.ABORTED:case n1.OUT_OF_RANGE:case n1.UNIMPLEMENTED:case n1.DATA_LOSS:return!0;default:return nY(15467,{code:e})}}function uQ(e){return uZ(e)&&e!==n1.ABORTED}function uY(e){if(void 0===e)return nG("GRPC error has no .code"),n1.UNKNOWN;switch(e){case v.OK:return n1.OK;case v.CANCELLED:return n1.CANCELLED;case v.UNKNOWN:return n1.UNKNOWN;case v.DEADLINE_EXCEEDED:return n1.DEADLINE_EXCEEDED;case v.RESOURCE_EXHAUSTED:return n1.RESOURCE_EXHAUSTED;case v.INTERNAL:return n1.INTERNAL;case v.UNAVAILABLE:return n1.UNAVAILABLE;case v.UNAUTHENTICATED:return n1.UNAUTHENTICATED;case v.INVALID_ARGUMENT:return n1.INVALID_ARGUMENT;case v.NOT_FOUND:return n1.NOT_FOUND;case v.ALREADY_EXISTS:return n1.ALREADY_EXISTS;case v.PERMISSION_DENIED:return n1.PERMISSION_DENIED;case v.FAILED_PRECONDITION:return n1.FAILED_PRECONDITION;case v.ABORTED:return n1.ABORTED;case v.OUT_OF_RANGE:return n1.OUT_OF_RANGE;case v.UNIMPLEMENTED:return n1.UNIMPLEMENTED;case v.DATA_LOSS:return n1.DATA_LOSS;default:return nY(39323,{code:e})}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(v||(v={}));class uX extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}let uJ=null;function u0(e){if(uJ)throw Error("a TestingHooksSpi instance is already set");uJ=e}let u1=new g([0xffffffff,0xffffffff],0);function u2(e){let t=is().encode(e),r=new y;return r.update(t),new Uint8Array(r.digest())}function u3(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new g([r,n],0),new g([i,s],0)]}class u4{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new u6(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new u6(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new u6(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=8*e.length-t,this.bitCountInInteger=g.fromNumber(this.bitCount)}getBitIndex(e,t,r){let n=e.add(t.multiply(g.fromNumber(r)));return 1===n.compare(u1)&&(n=new g([n.getBits(0),n.getBits(1)],0)),n.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(0===this.bitCount)return!1;let[t,r]=u3(u2(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);if(!this.isBitSet(n))return!1}return!0}static create(e,t,r){let n=e%8==0?0:8-e%8,i=new u4(new Uint8Array(Math.ceil(e/8)),n,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.bitCount)return;let[t,r]=u3(u2(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);this.setBit(n)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class u6 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class u5{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,u8.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new u5(iv.min(),n,new ag(il),lJ(),ue())}}class u8{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new u8(r,t,ue(),ue(),ue())}}class u9{constructor(e,t,r,n){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=n}}class u7{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class ce{constructor(e,t,r=aI.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class ct{constructor(){this.pendingResponses=0,this.documentChanges=cs(),this._resumeToken=aI.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=ue(),t=ue(),r=ue();return this.documentChanges.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:nY(38017,{changeType:i})}}),new u8(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=cs()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,nJ(this.pendingResponses>=0,3241,{pendingResponses:this.pendingResponses})}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let cr="WatchChangeAggregator";class cn{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=lJ(),this.pendingDocumentUpdatesByTarget=ci(),this.pendingDocumentTargetMapping=ci(),this.pendingTargetResets=new ag(il)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:nY(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,n=this.targetDataForActiveTarget(t);if(n){let i=n.target;if(lf(i)){if(0===r){let e=new iE(i.path);this.removeDocumentFromTarget(t,e,oF.newNoDocument(e,iv.min()))}else nJ(1===r,20013,{expectedCount:r})}else{let n=this.getCurrentDocumentCountForTarget(t);if(n!==r){let r=this.parseBloomFilter(e),i=r?this.applyBloomFilter(r,e,n):1;if(0!==i){this.resetTarget(t);let e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,e)}null==uJ||uJ.notifyOnExistenceFilterMismatch(ca(n,e.existenceFilter,this.metadataProvider.getDatabaseId(),r,i))}}}}parseBloomFilter(e){let t,r;let n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;try{t=aD(i).toUint8Array()}catch(e){if(e instanceof uX)return nZ("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new u4(t,s,a)}catch(e){return e instanceof u6?nZ("BloomFilter error: ",e):nZ("Applying bloom filter failed: ",e),null}return 0===r.bitCount?null:r}applyBloomFilter(e,t,r){return t.existenceFilter.count===r-this.filterRemovedDocuments(e,t.targetId)?0:2}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.metadataProvider.getDatabaseId(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;!e.mightContain(s)&&(this.removeDocumentFromTarget(t,r,null),n++)}),n}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,n)=>{let i=this.targetDataForActiveTarget(n);if(i){if(r.current&&lf(i.target)){let t=new iE(i.target.path);this.ensureDocumentUpdateByTarget(t).has(n)||this.targetContainsDocument(n,t)||this.removeDocumentFromTarget(n,t,oF.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(n,r.toTargetChange()),r.clearPendingChanges())}});let r=ue();this.pendingDocumentTargetMapping.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let n=new u5(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=lJ(),this.pendingDocumentUpdatesByTarget=ci(),this.pendingDocumentTargetMapping=ci(),this.pendingTargetResets=new ag(il),n}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=this.targetContainsDocument(e,t.key)?2:0;this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(t.key,this.ensureDocumentUpdateByTarget(t.key).add(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let n=this.ensureTargetState(e);this.targetContainsDocument(e,t)?n.addDocumentChange(t,1):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).add(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new ct,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new a_(il),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}ensureDocumentUpdateByTarget(e){let t=this.pendingDocumentUpdatesByTarget.get(e);return t||(t=new a_(il),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||nH(cr,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new ct),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function ci(){return new ag(iE.comparator)}function cs(){return new ag(iE.comparator)}function ca(e,t,r,n,i){var s,a,o,l,u,c;let d={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==n?void 0:n.mightContain(e))&&void 0!==t&&t}}),d}let co=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),cl=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),cu=(()=>{let e={};return e.and="AND",e.or="OR",e})();class cc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cd(e){return new n2(void 0===e.code?n1.UNKNOWN:uY(e.code),e.message||"")}function ch(e,t){return e.useProto3Json||aH(t)?t:{value:t}}function cf(e){let t;return aH(t="object"==typeof e?e.value:e)?null:t}function cp(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function cm(e){let t=aN(e);return new iy(t.seconds,t.nanos)}function cg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function cy(e,t){return e.useProto3Json?(nJ(void 0===t||"string"==typeof t,58123),aI.fromBase64String(t||"")):(nJ(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),aI.fromUint8Array(t||new Uint8Array))}function cv(e,t){return cp(e,t.toTimestamp())}function cb(e){return nJ(!!e,49232),iv.fromTimestamp(cm(e))}function c_(e,t){return cS(e,t).canonicalString()}function cS(e,t){let r=ck(e).child("documents");return void 0===t?r:r.child(t)}function cw(e){let t=iS.fromString(e);return nJ(d_(t),10190,{key:t.toString()}),t}function cT(e,t){return c_(e.databaseId,t.path)}function cE(e,t){let r=cw(t);if(r.get(1)!==e.databaseId.projectId)throw new n2(n1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new n2(n1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new iE(cR(r))}function cC(e,t){return c_(e.databaseId,t)}function cx(e){let t=cw(e);return 4===t.length?iS.emptyPath():cR(t)}function cI(e){return new iS(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ck(e){return new iS(["projects",e.projectId,"databases",e.database])}function cR(e){return nJ(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function cA(e,t,r){return{name:cT(e,t),fields:r.value.mapValue.fields}}function cN(e,t){return{name:cT(e,t.key),fields:t.data.value.mapValue.fields,updateTime:cp(e,t.version.toTimestamp()),createTime:cp(e,t.createTime.toTimestamp())}}function cO(e,t,r){let n=cE(e,t.name),i=cb(t.updateTime),s=t.createTime?cb(t.createTime):iv.min(),a=new oL({mapValue:{fields:t.fields}}),o=oF.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function cD(e,t){nJ(!!t.found,43571),t.found.name,t.found.updateTime;let r=cE(e,t.found.name),n=cb(t.found.updateTime),i=t.found.createTime?cb(t.found.createTime):iv.min(),s=new oL({mapValue:{fields:t.found.fields}});return oF.newFoundDocument(r,n,i,s)}function cP(e,t){nJ(!!t.missing,3894),nJ(!!t.readTime,22933);let r=cE(e,t.missing),n=cb(t.readTime);return oF.newNoDocument(r,n)}function cM(e,t){return"found"in t?cD(e,t):"missing"in t?cP(e,t):nY(7234,{result:t})}function cL(e,t){let r;if("targetChange"in t){t.targetChange;let n=cj(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=cy(e,t.targetChange.resumeToken),a=t.targetChange.cause;r=new ce(n,i,s,a&&cd(a)||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=cE(e,n.document.name),s=cb(n.document.updateTime),a=n.document.createTime?cb(n.document.createTime):iv.min(),o=new oL({mapValue:{fields:n.document.fields}}),l=oF.newFoundDocument(i,s,a,o);r=new u9(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=cE(e,n.document),s=n.readTime?cb(n.readTime):iv.min(),a=oF.newNoDocument(i,s);r=new u9([],n.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=cE(e,n.document);r=new u9([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return nY(11601,{change:t});t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new uG(n,i);r=new u7(e.targetId,s)}return r}function cj(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:nY(39313,{state:e})}function cF(e){if(!("targetChange"in e))return iv.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?iv.min():cb(t.readTime)}function cB(e,t){let r;if(t instanceof uO)r={update:cA(e,t.key,t.value)};else if(t instanceof uV)r={delete:cT(e,t.key)};else if(t instanceof uM)r={update:cA(e,t.key,t.data),updateMask:dv(t.fieldMask)};else{if(!(t instanceof u$))return nY(16599,{mutationType:t.type});r={verify:cT(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>cW(e,t))),t.precondition.isNone||(r.currentDocument=cV(e,t.precondition)),r}function cU(e,t){let r=t.currentDocument?cz(t.currentDocument):uE.none(),n=t.updateTransforms?t.updateTransforms.map(t=>cK(e,t)):[];if(t.update){t.update.name;let i=cE(e,t.update.name),s=new oL({mapValue:{fields:t.update.fields}});return t.updateMask?new uM(i,s,db(t.updateMask),r,n):new uO(i,s,r,n)}return t.delete?new uV(cE(e,t.delete),r):t.verify?new u$(cE(e,t.verify),r):nY(1463,{proto:t})}function cV(e,t){return void 0!==t.updateTime?{updateTime:cv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:nY(27497)}function cz(e){return void 0!==e.updateTime?uE.updateTime(cb(e.updateTime)):void 0!==e.exists?uE.exists(e.exists):uE.none()}function cq(e,t){let r=e.updateTime?cb(e.updateTime):cb(t);return r.isEqual(iv.min())&&(r=cb(t)),new uT(r,e.transformResults||[])}function c$(e,t){return e&&e.length>0?(nJ(void 0!==t,14353),e.map(e=>cq(e,t))):[]}function cW(e,t){let r=t.transform;if(r instanceof ud)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof uh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof up)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof ug)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw nY(20930,{transform:t.transform})}function cK(e,t){let r=null;return"setToServerValue"in t?(nJ("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),r=new ud):"appendMissingElements"in t?r=new uh(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new up(t.removeAllFromArray.values||[]):"increment"in t?r=new ug(e,t.increment):nY(16584,{proto:t}),new u_(iT.fromServerFormat(t.fieldPath),r)}function cH(e,t){return{documents:[cC(e,t.path)]}}function cG(e){let t=e.documents.length;return nJ(1===t,1966,{count:t}),lO(lC(cx(e.documents[0])))}function cZ(e,t){let r;let n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cC(e,r);let s=c2(t.filters);s&&(n.structuredQuery.where=s);let a=c6(t.orderBy);a&&(n.structuredQuery.orderBy=a);let o=ch(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=c8(t.startAt)),t.endAt&&(n.structuredQuery.endAt=c9(t.endAt)),{queryTarget:n,parent:r}}function cQ(e,t,r,n){let{queryTarget:i,parent:s}=cZ(e,t),a={},o=[],l=0;return r.forEach(e=>{let t=n?e.alias:`aggregate_${l++}`;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:dl(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:dl(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},aliasMap:a,parent:s}}function cY(e){let t=cx(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){nJ(1===n,65062);let e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=c3(r.where));let a=[];r.orderBy&&(a=c5(r.orderBy));let o=null;r.limit&&(o=cf(r.limit));let l=null;r.startAt&&(l=c7(r.startAt));let u=null;return r.endAt&&(u=de(r.endAt)),lE(t,i,a,s,o,"F",l,u)}function cX(e){return lO(cY(e))}function cJ(e,t){let r=c0(t.purpose);return null==r?null:{"goog-listen-tags":r}}function c0(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nY(28987,{purpose:e})}}function c1(e,t){let r;let n=t.target;if((r=lf(n)?{documents:cH(e,n)}:{query:cZ(e,n).queryTarget}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=cg(e,t.resumeToken);let n=ch(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(iv.min())>0){r.readTime=cp(e,t.snapshotVersion.toTimestamp());let n=ch(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}function c2(e){if(0!==e.length)return dh(oY.create(e,"and"))}function c3(e){let t=c4(e);return t instanceof oY&&o0(t)?t.getFilters():[t]}function c4(e){return void 0!==e.unaryFilter?dm(e):void 0!==e.fieldFilter?dg(e):void 0!==e.compositeFilter?dy(e):nY(30097,{filter:e})}function c6(e){if(0!==e.length)return e.map(e=>dc(e))}function c5(e){return e.map(e=>dd(e))}function c8(e){return{before:e.inclusive,values:e.position}}function c9(e){return{before:!e.inclusive,values:e.position}}function c7(e){let t=!!e.before;return new oU(e.values||[],t)}function de(e){let t=!e.before;return new oU(e.values||[],t)}function dt(e){return co[e]}function dr(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function dn(e){return cl[e]}function di(e){return cu[e]}function ds(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nY(58110);default:return nY(50506)}}function da(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nY(1026)}}function dl(e){return{fieldPath:e.canonicalString()}}function du(e){return iT.fromServerFormat(e.fieldPath)}function dc(e){return{field:dl(e.field),direction:dt(e.dir)}}function dd(e){return new oW(du(e.field),dr(e.direction))}function dh(e){return e instanceof oQ?dp(e):e instanceof oY?df(e):nY(54877,{filter:e})}function df(e){let t=e.getFilters().map(e=>dh(e));return 1===t.length?t[0]:{compositeFilter:{op:di(e.op),filters:t}}}function dp(e){if("=="===e.op){if(ox(e.value))return{unaryFilter:{field:dl(e.field),op:"IS_NAN"}};if(oC(e.value))return{unaryFilter:{field:dl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ox(e.value))return{unaryFilter:{field:dl(e.field),op:"IS_NOT_NAN"}};if(oC(e.value))return{unaryFilter:{field:dl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(e.field),op:dn(e.op),value:e.value}}}function dm(e){switch(e.unaryFilter.op){case"IS_NAN":let t=du(e.unaryFilter.field);return oQ.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=du(e.unaryFilter.field);return oQ.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=du(e.unaryFilter.field);return oQ.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=du(e.unaryFilter.field);return oQ.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nY(61313);default:return nY(60726)}}function dg(e){return oQ.create(du(e.fieldFilter.field),ds(e.fieldFilter.op),e.fieldFilter.value)}function dy(e){return oY.create(e.compositeFilter.filters.map(e=>c4(e)),da(e.compositeFilter.op))}function dv(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function db(e){return new aE((e.fieldPaths||[]).map(e=>iT.fromServerFormat(e)))}function d_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class dS{constructor(e,t,r,n,i=iv.min(),s=iv.min(),a=aI.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new dS(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dS(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dw{constructor(e){this.remoteSerializer=e}}function dT(e,t){let r;if(t.document)r=cO(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=iE.fromSegments(t.noDocument.path),n=dk(t.noDocument.readTime);r=oF.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return nY(56709);let e=iE.fromSegments(t.unknownDocument.path),n=dk(t.unknownDocument.version);r=oF.newUnknownDocument(e,n)}return t.readTime&&r.setReadTime(dx(t.readTime)),r}function dE(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:dC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=cN(e.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:dI(t.version)};else{if(!t.isUnknownDocument())return nY(57904,{document:t});n.unknownDocument={path:r.path.toArray(),version:dI(t.version)}}return n}function dC(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dx(e){let t=new iy(e[0],e[1]);return iv.fromTimestamp(t)}function dI(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dk(e){let t=new iy(e.seconds,e.nanoseconds);return iv.fromTimestamp(t)}function dR(e,t,r){let n=r.baseMutations.map(t=>cB(e.remoteSerializer,t)),i=r.mutations.map(t=>cB(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}function dA(e,t){let r=(t.baseMutations||[]).map(t=>cU(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){let n=t.mutations[e+1];r.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}let n=t.mutations.map(t=>cU(e.remoteSerializer,t)),i=iy.fromMillis(t.localWriteTimeMs);return new uW(t.batchId,i,r,n)}function dN(e){let t;let r=dk(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?dk(e.lastLimboFreeSnapshotVersion):iv.min();return new dS(t=dD(e.query)?cG(e.query):cX(e.query),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,n,aI.fromBase64String(e.resumeToken))}function dO(e,t){let r;let n=dI(t.snapshotVersion),i=dI(t.lastLimboFreeSnapshotVersion);r=lf(t.target)?cH(e.remoteSerializer,t.target):cZ(e.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function dD(e){return void 0!==e.documents}function dP(e){return{id:e.bundleId,createTime:dk(e.createTime),version:e.version}}function dM(e){return{bundleId:e.id,createTime:dI(cb(e.createTime)),version:e.version}}function dL(e){return{name:e.name,query:dF(e.bundledQuery),readTime:dk(e.readTime)}}function dj(e){return{name:e.name,readTime:dI(cb(e.readTime)),bundledQuery:e.bundledQuery}}function dF(e){let t=cY({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lj(t,t.limit,"L"):t}function dB(e){return{name:e.name,query:dF(e.bundledQuery),readTime:cb(e.readTime)}}function dU(e){return{id:e.id,version:e.version,createTime:cb(e.createTime)}}function dV(e,t){return new uH(t.largestBatchId,cU(e.remoteSerializer,t.overlayMutation))}function dz(e,t,r){let[n,i,s]=dq(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:cB(e.remoteSerializer,r.mutation)}}function dq(e,t){let r=t.path.lastSegment();return[e,sn(t.path.popLast()),r]}function d$(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function dW(e,t){let r=t?new iM(t.sequenceNumber,new iF(dk(t.readTime),new iE(sa(t.documentKey)),t.largestBatchId)):iM.empty(),n=e.fields.map(([e,t])=>new iD(iT.fromServerFormat(e),t));return new iI(e.indexId,e.collectionGroup,n,r)}function dK(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:dI(n.readTime),documentKey:sn(n.documentKey.path),largestBatchId:n.largestBatchId}}class dH{getBundleMetadata(e,t){return dG(e).get(t).next(e=>{if(e)return dP(e)})}saveBundleMetadata(e,t){return dG(e).put(dM(t))}getNamedQuery(e,t){return dZ(e).get(t).next(e=>{if(e)return dL(e)})}saveNamedQuery(e,t){return dZ(e).put(dj(t))}}function dG(e){return ah(e,sq)}function dZ(e){return ah(e,sW)}class dQ{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new dQ(e,t.uid||"")}getOverlay(e,t){return dY(e).get(dq(this.userId,t)).next(e=>e?dV(this.serializer,e):null)}getOverlays(e,t){let r=l4();return iq.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new uH(t,i);n.push(this.saveOverlay(e,s))}),iq.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(sn(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(dY(e).deleteAll(s8,n))}),iq.waitFor(i)}getOverlaysForCollection(e,t,r){let n=l4(),i=sn(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return dY(e).loadAll(s8,s).next(e=>{for(let t of e){let e=dV(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i;let s=l4(),a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dY(e).iterate({index:s7,range:a},(e,t,r)=>{let a=dV(this.serializer,t);s.size()<n||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return dY(e).put(dz(this.serializer,this.userId,t))}}function dY(e){return ah(e,s6)}class dX{globalsStore(e){return ah(e,at)}getSessionToken(e){return this.globalsStore(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?aI.fromUint8Array(t):aI.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.globalsStore(e).put({name:"sessionToken",value:t.toUint8Array()})}}let dJ=5,d0=10,d1=13,d2=15,d3=20,d4=25,d6=30,d5=37,d8=45,d9=50,d7=53,he=55,ht=60,hr=2;class hn{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,dJ);else if("booleanValue"in e)this.writeValueTypeLabel(t,d0),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,d2),t.writeNumber(aO(e.integerValue));else if("doubleValue"in e){let r=aO(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,d1):(this.writeValueTypeLabel(t,d2),aG(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,d3),"string"==typeof r&&(r=aN(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,d6),t.writeBytes(aD(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,d8),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?oA(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):ok(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):nY(19022,{indexValue:e})}writeIndexString(e,t){this.writeValueTypeLabel(t,d4),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,he),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexVector(e,t){var r,n;let i=e.fields||{};this.writeValueTypeLabel(t,d7);let s=a0,a=(null===(n=null===(r=i[s].arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.length)||0;this.writeValueTypeLabel(t,d2),t.writeNumber(aO(a)),this.writeIndexString(s,t),this.writeIndexValueAux(i[s],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,d9),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,d5),iE.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,ht),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(hr)}}hn.INSTANCE=new hn;let hi="\uD800",hs="\uDBFF",ha=0,ho=255,hl=1,hu=255,hc=255,hd=0,hh=64,hf=8,hp=1024;function hm(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function hg(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hy(e){let t=0;for(let r=0;r<8;++r){let n=hg(255&e[r]);if(t+=n,8!==n)break}return t}function hv(e){return Math.ceil((hh-hy(e))/hf)}class hb{constructor(){this.buffer=new Uint8Array(hp),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<hi||hs<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<hi||hs<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=hv(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=hv(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(hu),this.writeEscapedByteAscending(hc)}writeInfinityDescending(){this.writeEscapedByteDescending(hu),this.writeEscapedByteDescending(hc)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=hm(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=r?255:0;return t}writeByteAscending(e){let t=255&e;t===ha?(this.writeEscapedByteAscending(ha),this.writeEscapedByteAscending(ho)):t===hu?(this.writeEscapedByteAscending(hu),this.writeEscapedByteAscending(hd)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===ha?(this.writeEscapedByteDescending(ha),this.writeEscapedByteDescending(ho)):t===hu?(this.writeEscapedByteDescending(hu),this.writeEscapedByteDescending(hd)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(ha),this.writeEscapedByteAscending(hl)}writeSeparatorDescending(){this.writeEscapedByteDescending(ha),this.writeEscapedByteDescending(hl)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class h_{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class hS{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class hw{constructor(){this.orderedCode=new hb,this.ascending=new h_(this.orderedCode),this.descending=new hS(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}class hT{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}successor(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hT(this.indexId,this.documentKey,this.arrayValue,r)}}function hE(e,t){let r=e.indexId-t.indexId;return 0!==r||0!==(r=hC(e.arrayValue,t.arrayValue))||0!==(r=hC(e.directionalValue,t.directionalValue))?r:iE.comparator(e.documentKey,t.documentKey)}function hC(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}class hx{constructor(e){for(let t of(this.inequalityFilters=new a_((e,t)=>iT.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilters=this.inequalityFilters.add(e):this.equalityFilters.push(e)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(nJ(e.collectionGroup===this.collectionId,49279),this.hasMultipleInequality)return!1;let t=ik(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=iR(e),n=new Set,i=0,s=0;for(;i<r.length;++i)if(this.hasMatchingEqualityFilter(r[i]))n=n.add(r[i].fieldPath.canonicalString());else break;if(i===r.length)return!0;if(this.inequalityFilters.size>0){let e=this.inequalityFilters.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.matchesFilter(e,t)||!this.matchesOrderBy(this.orderBys[s++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(s>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[s++],e))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new a_(iT.comparator),t=[];for(let r of this.equalityFilters)if(!r.field.isKeyField()){if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new iD(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new iD(r.field,0))}}for(let r of this.orderBys)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new iD(r.field,"asc"===r.dir?0:1)));return new iI(iI.UNKNOWN_ID,this.collectionId,t,iM.empty())}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hI(e){var t,r;if(nJ(e instanceof oQ||e instanceof oY,20012),e instanceof oQ){if(!(e instanceof ls))return e;{let n=(null===(r=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(t=>oQ.create(e.field,"==",t)))||[];return oY.create(n,"or")}}let n=e.filters.map(e=>hI(e));return oY.create(n,e.op)}function hk(e){if(0===e.getFilters().length)return[];let t=hD(hI(e));return(nJ(hN(t),7391),hR(t)||hA(t))?[t]:t.getFilters()}function hR(e){return e instanceof oQ}function hA(e){return e instanceof oY&&o0(e)}function hN(e){return hR(e)||hA(e)||hO(e)}function hO(e){if(e instanceof oY&&oJ(e)){for(let t of e.getFilters())if(!hR(t)&&!hA(t))return!1;return!0}return!1}function hD(e){if(nJ(e instanceof oQ||e instanceof oY,34018),e instanceof oQ)return e;if(1===e.filters.length)return hD(e.filters[0]);let t=e.filters.map(e=>hD(e)),r=oY.create(t,e.op);return hN(r=hF(r))?r:(nJ(r instanceof oY,64498),nJ(oX(r),40251),nJ(r.filters.length>1,57927),r.filters.reduce((e,t)=>hP(e,t)))}function hP(e,t){let r;return nJ(e instanceof oQ||e instanceof oY,38388),nJ(t instanceof oQ||t instanceof oY,25473),hF(r=e instanceof oQ?t instanceof oQ?hM(e,t):hj(e,t):t instanceof oQ?hj(t,e):hL(e,t))}function hM(e,t){return oY.create([e,t],"and")}function hL(e,t){if(nJ(e.filters.length>0&&t.filters.length>0,48005),oX(e)&&oX(t))return o5(e,t.getFilters());let r=oJ(e)?e:t,n=oJ(e)?t:e,i=r.filters.map(e=>hP(e,n));return oY.create(i,"or")}function hj(e,t){if(oX(t))return o5(t,e.getFilters());{let r=t.filters.map(t=>hP(e,t));return oY.create(r,"or")}}function hF(e){if(nJ(e instanceof oQ||e instanceof oY,11850),e instanceof oQ)return e;let t=e.getFilters();if(1===t.length)return hF(t[0]);if(o1(e))return e;let r=t.map(e=>hF(e)),n=[];return(r.forEach(t=>{t instanceof oQ?n.push(t):t instanceof oY&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length)?n[0]:oY.create(n,e.op)}class hB{constructor(){this.collectionParentIndex=new hU}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),iq.resolve()}getCollectionParents(e,t){return iq.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return iq.resolve()}deleteFieldIndex(e,t){return iq.resolve()}deleteAllFieldIndexes(e){return iq.resolve()}createTargetIndexes(e,t){return iq.resolve()}getDocumentsMatchingTarget(e,t){return iq.resolve(null)}getIndexType(e,t){return iq.resolve(0)}getFieldIndexes(e,t){return iq.resolve([])}getNextCollectionGroupToUpdate(e){return iq.resolve(null)}getMinOffset(e,t){return iq.resolve(iF.min())}getMinOffsetFromCollectionGroup(e,t){return iq.resolve(iF.min())}updateCollectionGroup(e,t,r){return iq.resolve()}updateIndexEntries(e,t){return iq.resolve()}}class hU{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new a_(iS.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new a_(iS.comparator)).toArray()}}let hV="IndexedDbIndexManager",hz=new Uint8Array(0);class hq{constructor(e,t){this.databaseId=t,this.collectionParentsCache=new hU,this.targetToDnfSubTargets=new lY(e=>lc(e),(e,t)=>lh(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let i={collectionId:r,parent:sn(n)};return h$(e).put(i)}return iq.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[ip(t),""],!1,!0);return h$(e).loadAll(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(sa(n.parent))}return r})}addFieldIndex(e,t){let r=hK(e),n=d$(t);delete n.indexId;let i=r.add(n);if(!t.indexState)return i.next();{let r=hH(e);return i.next(e=>{r.put(dK(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=hK(e),n=hH(e),i=hW(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=hK(e),r=hW(e),n=hH(e);return t.deleteAll().next(()=>r.deleteAll()).next(()=>n.deleteAll())}createTargetIndexes(e,t){return iq.forEach(this.getSubTargets(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new hx(t).buildTargetIndex();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=hW(e),n=!0,i=new Map;return iq.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(!n)return iq.resolve(null);{let e=ue(),n=[];return iq.forEach(i,(i,s)=>{nH(hV,`Using index ${iO(i)} to execute ${lc(t)}`);let a=lm(s,i),o=lg(s,i),l=ly(s,i),u=lv(s,i),c=this.encodeBound(i,s,l),d=this.encodeBound(i,s,u),h=this.encodeValues(i,s,o),f=this.generateIndexRanges(i.indexId,a,c,l.inclusive,d,u.inclusive,h);return iq.forEach(f,i=>r.loadFirst(i,t.limit).next(t=>{t.forEach(t=>{let r=iE.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:hk(oY.create(e.filters,"and")).map(t=>lu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,n,i,s,a){let o=(null!=t?t.length:1)*Math.max(r.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){let o=t?this.encodeSingleElement(t[c/l]):hz,d=this.generateLowerBound(e,o,r[c%l],n),h=this.generateUpperBound(e,o,i[c%l],s),f=a.map(t=>this.generateLowerBound(e,o,t,!0));u.push(...this.createRange(d,h,f))}return u}generateLowerBound(e,t,r,n){let i=new hT(e,iE.empty(),t,r);return n?i:i.successor()}generateUpperBound(e,t,r,n){let i=new hT(e,iE.empty(),t,r);return n?i.successor():i}getFieldIndex(e,t){let r=new hx(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.servedByIndex(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.getSubTargets(t);return iq.forEach(n,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<lS(t)&&(r=1):r=0})).next(()=>lw(t)&&n.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new hw;for(let n of iR(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.forKind(n.kind);hn.INSTANCE.writeIndexValue(e,i)}return r.encodedBytes()}encodeSingleElement(e){let t=new hw;return hn.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new hw;return hn.INSTANCE.writeIndexValue(o_(this.databaseId,t),r.forKind(iA(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let n=[];n.push(new hw);let i=0;for(let s of iR(e)){let e=r[i++];for(let r of n)if(this.isInFilter(t,s.fieldPath)&&oE(e))n=this.expandIndexValues(n,s,e);else{let t=r.forKind(s.kind);hn.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(n)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new hw;n.seed(r.encodedBytes()),hn.INSTANCE.writeIndexValue(e,n.forKind(t.kind)),i.push(n)}return i}isInFilter(e,t){return!!e.filters.find(e=>e instanceof oQ&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=hK(e),n=hH(e);return(t?r.loadAll(sZ,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return iq.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(dW(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:il(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=hK(e),i=hH(e);return this.getNextSequenceNumber(e).next(e=>n.loadAll(sZ,IDBKeyRange.bound(t,t)).next(t=>iq.forEach(t,t=>i.put(dK(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return iq.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?iq.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),iq.forEach(i,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let i=this.computeIndexEntries(n,r);return t.isEqual(i)?iq.resolve():this.updateEntries(e,n,r,t,i)}))))})}addIndexEntry(e,t,r,n){return hW(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(r,t.key),documentKey:t.key.path.toArray()})}deleteIndexEntry(e,t,r,n){return hW(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.encodeDirectionalKey(r,t.key),t.key.path.toArray()])}getExistingIndexEntries(e,t,r){let n=hW(e),i=new a_(hE);return n.iterate({index:s3,range:IDBKeyRange.only([r.indexId,this.uid,this.encodeDirectionalKey(r,t)])},(e,n)=>{i=i.add(new hT(r.indexId,t,n.arrayValue,n.directionalValue))}).next(()=>i)}computeIndexEntries(e,t){let r=new a_(hE),n=this.encodeDirectionalElements(t,e);if(null==n)return r;let i=ik(t);if(null!=i){let s=e.data.field(i.fieldPath);if(oE(s))for(let i of s.arrayValue.values||[])r=r.add(new hT(t.indexId,e.key,this.encodeSingleElement(i),n))}else r=r.add(new hT(t.indexId,e.key,hz,n));return r}updateEntries(e,t,r,n,i){nH(hV,"Updating index entries for document '%s'",t.key);let s=[];return aw(n,i,hE,n=>{s.push(this.addIndexEntry(e,t,r,n))},n=>{s.push(this.deleteIndexEntry(e,t,r,n))}),iq.waitFor(s)}getNextSequenceNumber(e){let t=1;return hH(e).iterate({index:sJ,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>hE(e,t)).filter((e,t,r)=>!t||0!==hE(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=hE(i,e),s=hE(i,t);if(0===r)n[0]=e.successor();else if(r>0&&s<0)n.push(i),n.push(i.successor());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.isRangeMatchable(n[e],n[e+1]))return[];let t=[n[e].indexId,this.uid,n[e].arrayValue,n[e].directionalValue,hz,[]],r=[n[e+1].indexId,this.uid,n[e+1].arrayValue,n[e+1].directionalValue,hz,[]];i.push(IDBKeyRange.bound(t,r))}return i}isRangeMatchable(e,t){return hE(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hG)}getMinOffset(e,t){return iq.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||nY(44426))).next(hG)}}function h$(e){return ah(e,sB)}function hW(e){return ah(e,s1)}function hK(e){return ah(e,sH)}function hH(e){return ah(e,sY)}function hG(e){nJ(0!==e.length,28825);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>iB(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new iF(t.readTime,t.documentKey,r)}function hZ(e,t,r){let n=e.store(sh),i=e.store(s_),s=[],a=IDBKeyRange.only(r.batchId),o=0,l=n.iterate({range:a},(e,t,r)=>(o++,r.delete()));s.push(l.next(()=>{nJ(1===o,47070,{batchId:r.batchId})}));let u=[];for(let e of r.mutations){let n=sv(t,e.key.path,r.batchId);s.push(i.delete(n)),u.push(e.key)}return iq.waitFor(s).next(()=>u)}function hQ(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw nY(14731);return JSON.stringify(t).length}class hY{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.documentKeysByBatchId={}}static forUser(e,t,r,n){return nJ(""!==e.uid,64387),new hY(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return h0(e).iterate({index:sp,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=h1(e),s=h0(e);return s.add({}).next(a=>{nJ("number"==typeof a,49019);let o=new uW(a,t,r,n),l=dR(this.serializer,this.userId,o),u=[],c=new a_((e,t)=>il(e.canonicalString(),t.canonicalString()));for(let e of n){let t=sv(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,sb))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=o.keys()}),iq.waitFor(u).next(()=>o)})}lookupMutationBatch(e,t){return h0(e).get(t).next(e=>e?(nJ(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),dA(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?iq.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return h0(e).iterate({index:sp,range:n},(e,t,n)=>{t.userId===this.userId&&(nJ(t.batchId>=r,47524,{nextBatchId:r}),i=dA(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=aK;return h0(e).iterate({index:sp,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,aK],[this.userId,Number.POSITIVE_INFINITY]);return h0(e).loadAll(sp,t).next(e=>e.map(e=>dA(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=sy(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return h1(e).iterate({range:n},(r,n,s)=>{let[a,o,l]=r,u=sa(o);if(a!==this.userId||!t.path.isEqual(u)){s.done();return}return h0(e).get(l).next(e=>{if(!e)throw nY(61480,{indexKey:r,batchId:l});nJ(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(dA(this.serializer,e))})}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new a_(il),n=[];return t.forEach(t=>{let i=sy(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=h1(e).iterate({range:s},(e,n,i)=>{let[s,a,o]=e,l=sa(a);if(s!==this.userId||!t.path.isEqual(l)){i.done();return}r=r.add(o)});n.push(a)}),iq.waitFor(n).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=sy(this.userId,r),s=IDBKeyRange.lowerBound(i),a=new a_(il);return h1(e).iterate({range:s},(e,t,i)=>{let[s,o,l]=e,u=sa(o);if(s!==this.userId||!r.isPrefixOf(u)){i.done();return}u.length===n&&(a=a.add(l))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,t){let r=[],n=[];return t.forEach(t=>{n.push(h0(e).get(t).next(e=>{if(null===e)throw nY(35274,{batchId:t});nJ(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),r.push(dA(this.serializer,e))}))}),iq.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return hZ(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),iq.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return iq.resolve();let r=IDBKeyRange.lowerBound(sg(this.userId)),n=[];return h1(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId){r.done();return}{let t=sa(e[1]);n.push(t)}}).next(()=>{nJ(0===n.length,56720,{danglingKeys:n.map(e=>e.canonicalString())})})})}containsKey(e,t){return hX(e,this.userId,t)}getMutationQueueMetadata(e){return h2(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:aK,lastStreamToken:""})}}function hX(e,t,r){let n=sy(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),a=!1;return h1(e).iterate({range:s,keysOnly:!0},(e,r,n)=>{let[s,o,l]=e;s===t&&o===i&&(a=!0),n.done()}).next(()=>a)}function hJ(e,t){let r=!1;return h2(e).iterateSerial(n=>hX(e,n,t).next(e=>(e&&(r=!0),iq.resolve(!e)))).next(()=>r)}function h0(e){return ah(e,sh)}function h1(e){return ah(e,s_)}function h2(e){return ah(e,sc)}let h3=2;class h4{constructor(e){this.lastId=e}next(){return this.lastId+=h3,this.lastId}static forTargetCache(){return new h4(2-h3)}static forSyncEngine(){return new h4(1-h3)}}class h6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new h4(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>iv.fromTimestamp(new iy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.saveMetadata(e,n)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>h5(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(nJ(t.targetCount>0,8065),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let n=0,i=[];return h5(e).iterate((s,a)=>{let o=dN(a);o.sequenceNumber<=t&&null===r.get(o.targetId)&&(n++,i.push(this.removeTargetData(e,o)))}).next(()=>iq.waitFor(i)).next(()=>n)}forEachTarget(e,t){return h5(e).iterate((e,r)=>{t(dN(r))})}retrieveMetadata(e){return h8(e).get(sj).next(e=>(nJ(null!==e,2888),e))}saveMetadata(e,t){return h8(e).put(sj,t)}saveTargetData(e,t){return h5(e).put(dO(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=lc(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return h5(e).iterate({range:n,index:sN},(e,r,n)=>{let s=dN(r);lh(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=h9(e);return t.forEach(t=>{let s=sn(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),iq.waitFor(n)}removeMatchingKeys(e,t,r){let n=h9(e);return iq.forEach(t,t=>{let i=sn(t.path);return iq.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=h9(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=h9(e),i=ue();return n.iterate({range:r,keysOnly:!0},(e,t,r)=>{let n=new iE(sa(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=sn(t.path),n=IDBKeyRange.bound([r],[ip(r)],!1,!0),i=0;return h9(e).iterate({index:sM,keysOnly:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}getTargetDataForTarget(e,t){return h5(e).get(t).next(e=>e?dN(e):null)}}function h5(e){return ah(e,sR)}function h8(e){return ah(e,sF)}function h9(e){return ah(e,sD)}let h7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fe=-1,ft=0x2800000;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(ft,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(fe,0,0);let fn="LruGarbageCollector",fi=1048576,fs=6e4,fa=3e5;function fo([e,t],[r,n]){let i=il(e,r);return 0===i?il(t,n):i}class fl{constructor(e){this.maxElements=e,this.buffer=new a_(fo),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>fo(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fu{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==fe&&this.scheduleGC(fs)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(e){nH(fn,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){iY(e)?nH(fn,"Ignoring IndexedDB error during garbage collection: ",e):await iz(e)}await this.scheduleGC(fa)})}}class fc{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return iq.resolve(i9.INVALID);let r=new fl(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===fe?(nH("LruGarbageCollector","Garbage collection skipped; disabled"),iq.resolve(h7)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(nH("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h7):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,n,i,s,a,o,l;let u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(nH("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,a=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(l=Date.now(),nK()<=m.DEBUG&&nH("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${n} in ${a-s}ms
	Removed ${i} targets in ${o-a}ms
	Removed ${e} documents in ${l-o}ms
Total Duration: ${l-u}ms`),iq.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}function fd(e,t){return new fc(e,t)}class fh{constructor(e,t){this.db=e,this.garbageCollector=fd(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return fm(e,r)}removeReference(e,t,r){return fm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fm(e,t)}isPinned(e,t){return hJ(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.forEachOrphanedDocument(e,(s,a)=>{if(a<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,iv.min()),h9(e).delete(ff(s))))});n.push(t)}}).next(()=>iq.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fm(e,t)}forEachOrphanedDocument(e,t){let r;let n=h9(e),i=i9.INVALID;return n.iterate({index:sM},([e,n],{path:s,sequenceNumber:a})=>{0===e?(i!==i9.INVALID&&t(new iE(sa(r)),i),i=a,r=s):i=i9.INVALID}).next(()=>{i!==i9.INVALID&&t(new iE(sa(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(e){return[0,sn(e.path)]}function fp(e,t){return{targetId:0,path:sn(e.path),sequenceNumber:t}}function fm(e,t){return h9(e).put(fp(t,e.currentSequenceNumber))}class fg{constructor(){this.changes=new lY(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oF.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?iq.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fS(e).put(r)}removeEntry(e,t,r){return fS(e).delete(fT(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=oF.newInvalidDocument(t);return fS(e).iterate({index:sT,range:IDBKeyRange.only(fw(t))},(e,n)=>{r=this.maybeDecodeDocument(t,n)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:oF.newInvalidDocument(t)};return fS(e).iterate({index:sT,range:IDBKeyRange.only(fw(t))},(e,n)=>{r={document:this.maybeDecodeDocument(t,n),size:hQ(n)}}).next(()=>r)}getEntries(e,t){let r=lJ();return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n)}).next(()=>r)}getSizedEntries(e,t){let r=lJ(),n=new ag(iE.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i),n=n.insert(e,hQ(t))}).next(()=>({documents:r,sizeMap:n}))}forEachDbEntry(e,t,r){if(t.isEmpty())return iq.resolve();let n=new a_(fC);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(fw(n.first()),fw(n.last())),s=n.getIterator(),a=s.getNext();return fS(e).iterate({index:sT,range:i},(e,t,n)=>{let i=iE.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>fC(a,i);)r(a,null),a=s.getNext();a&&a.isEqual(i)&&(r(a,t),a=s.hasNext()?s.getNext():null),a?n.skip(fw(a)):n.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),dC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fS(e).loadAll(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let r=lJ();for(let i of e){let e=this.maybeDecodeDocument(iE.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(lq(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=lJ(),s=fE(t,r),a=fE(t,iF.max());return fS(e).iterate({index:sC,range:IDBKeyRange.bound(s,a,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(iE.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new fb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return f_(e).get(sk).next(e=>(nJ(!!e,20021),e))}setMetadata(e,t){return f_(e).put(sk,t)}maybeDecodeDocument(e,t){if(t){let e=dT(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(iv.min())))return e}return oF.newInvalidDocument(e)}}function fv(e){return new fy(e)}class fb extends fg{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new lY(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new a_((e,t)=>il(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let a=this.documentStates.get(i);if(t.push(this.documentCache.removeEntry(e,i,a.readTime)),s.isValidDocument()){let o=dE(this.documentCache.serializer,s);n=n.add(i.path.popLast());let l=hQ(o);r+=l-a.size,t.push(this.documentCache.addEntry(e,i,o))}else if(r-=a.size,this.trackRemovals){let r=dE(this.documentCache.serializer,s.convertToNoDocument(iv.min()));t.push(this.documentCache.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),iq.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function f_(e){return ah(e,sI)}function fS(e){return ah(e,sS)}function fw(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fT(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],dC(t),r[r.length-1]]}function fE(e,t){let r=t.documentKey.path.toArray();return[e,dC(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function fC(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=il(r[e],n[e]))return i;return(i=il(r.length,n.length))||(i=il(r[r.length-2],n[n.length-2]))?i:il(r[r.length-1],n[n.length-1])}let fx=17;class fI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fk{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&uR(r.mutation,e,aE.empty(),iy.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ue()).next(()=>t))}getLocalViewOfDocuments(e,t,r=ue()){let n=l4();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=l1();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=l4();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=lJ(),s=l5(),a=l2();return t.forEach((e,t)=>{let a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof uM)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),uR(a.mutation,t,a.mutation.getFieldMask(),iy.now())):s.set(t.key,aE.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new fI(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=l5(),n=new ag((e,t)=>e-t),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||aE.empty();a=i.applyToLocalView(s,a),r.set(e,a);let o=(n.get(i.batchId)||ue()).add(e);n=n.insert(i.batchId,o)})}).next(()=>{let s=[],a=n.getReverseIterator();for(;a.hasNext();){let n=a.getNext(),o=n.key,l=n.value,u=l6();l.forEach(e=>{if(!i.has(e)){let n=uI(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return iq.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return lR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):iq.resolve(l4()),a=iC,o=i;return s.next(t=>iq.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),i.get(t))?iq.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)})).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ue())).next(e=>({batchId:a,changes:l3(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new iE(t)).next(e=>{let t=l1();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=l1();return this.indexManager.getCollectionParents(e,i).next(a=>iq.forEach(a,a=>{let o=lx(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,oF.newInvalidDocument(n)))});let r=l1();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&uR(s.mutation,n,aE.empty(),iy.now()),lq(t,n)&&(r=r.insert(e,n))}),r})}}class fR{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return iq.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,dU(t)),iq.resolve()}getNamedQuery(e,t){return iq.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,dB(t)),iq.resolve()}}class fA{constructor(){this.overlays=new ag(iE.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return iq.resolve(this.overlays.get(t))}getOverlays(e,t){let r=l4();return iq.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.saveOverlay(e,t,n)}),iq.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.overlayByBatchId.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),iq.resolve()}getOverlaysForCollection(e,t,r){let n=l4(),i=t.length+1,s=new iE(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return iq.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new ag((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=l4(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=l4(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return iq.resolve(a)}saveOverlay(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.overlayByBatchId.get(n.largestBatchId).delete(r.key);this.overlayByBatchId.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new uH(t,r));let i=this.overlayByBatchId.get(t);void 0===i&&(i=ue(),this.overlayByBatchId.set(t,i)),this.overlayByBatchId.set(t,i.add(r.key))}}class fN{constructor(){this.sessionToken=aI.EMPTY_BYTE_STRING}getSessionToken(e){return iq.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,iq.resolve()}}class fO{constructor(){this.refsByKey=new a_(fD.compareByKey),this.refsByTarget=new a_(fD.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new fD(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new fD(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new iE(new iS([])),r=new fD(t,e),n=new fD(t,e+1),i=[];return this.refsByTarget.forEachInRange([r,n],e=>{this.removeRef(e),i.push(e.key)}),i}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new iE(new iS([])),r=new fD(t,e),n=new fD(t,e+1),i=ue();return this.refsByTarget.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new fD(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fD{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return iE.comparator(e.key,t.key)||il(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return il(e.targetOrBatchId,t.targetOrBatchId)||iE.comparator(e.key,t.key)}}class fP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new a_(fD.compareByKey)}checkEmpty(e){return iq.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uW(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new fD(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return iq.resolve(s)}lookupMutationBatch(e,t){return iq.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=this.indexOfBatchId(r),i=n<0?0:n;return iq.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return iq.resolve(0===this.mutationQueue.length?aK:this.nextBatchId-1)}getAllMutationBatches(e){return iq.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new fD(t,0),n=new fD(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,n],e=>{let t=this.findMutationBatch(e.targetOrBatchId);i.push(t)}),iq.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new a_(il);return t.forEach(e=>{let t=new fD(e,0),n=new fD(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,n],e=>{r=r.add(e.targetOrBatchId)})}),iq.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;iE.isDocumentKey(i)||(i=i.child(""));let s=new fD(new iE(i),0),a=new a_(il);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.targetOrBatchId)),!0)},s),iq.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){nJ(0===this.indexOfExistingBatchId(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return iq.forEach(t.mutations,n=>{let i=new fD(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new fD(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(r);return iq.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,iq.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}let fM="-9223372036854775808";function fL(){return new ag(iE.comparator)}class fj{constructor(e){this.sizer=e,this.docs=fL(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return iq.resolve(r?r.document.mutableCopy():oF.newInvalidDocument(t))}getEntries(e,t){let r=lJ();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():oF.newInvalidDocument(e))}),iq.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=lJ(),s=t.path,a=new iE(s.child("__id"+fM+"__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=iB(ij(a),r))&&(n.has(a.key)||lq(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return iq.resolve(i)}getAllFromCollectionGroup(e,t,r,n){nY(9500)}forEachDocumentKey(e,t){return iq.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new fB(this)}getSize(e){return iq.resolve(this.size)}}function fF(e){return new fj(e)}class fB extends fg{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.documentCache.addEntry(e,n)):this.documentCache.removeEntry(r)}),iq.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}class fU{constructor(e){this.persistence=e,this.targets=new lY(e=>lc(e),lh),this.lastRemoteSnapshotVersion=iv.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new fO,this.targetCount=0,this.targetIdGenerator=h4.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),iq.resolve()}getLastRemoteSnapshotVersion(e){return iq.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return iq.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),iq.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),iq.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new h4(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,iq.resolve()}updateTargetData(e,t){return this.saveTargetData(t),iq.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,iq.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),iq.waitFor(i).next(()=>n)}getTargetCount(e){return iq.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return iq.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),iq.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),iq.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),iq.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return iq.resolve(r)}containsKey(e,t){return iq.resolve(this.references.containsKey(t))}}let fV="MemoryPersistence";class fz{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new i9(0),this._started=!1,this._started=!0,this.globalsCache=new fN,this.referenceDelegate=e(this),this.targetCache=new fU(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new hB,this.remoteDocumentCache=fF(r),this.serializer=new dw(t),this.bundleCache=new fR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new fP(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){nH(fV,"Starting transaction:",e);let n=new fq(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(n).next(e=>this.referenceDelegate.onTransactionCommitted(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return iq.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class fq extends iV{constructor(e){super(),this.currentSequenceNumber=e}}class f${constructor(e){this.persistence=e,this.localViewReferences=new fO,this._orphanedDocuments=null}static factory(e){return new f$(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw nY(60996)}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),iq.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),iq.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),iq.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return iq.forEach(this.orphanedDocuments,r=>{let n=iE.fromPath(r);return this.isReferenced(e,n).next(e=>{e||t.removeEntry(n,iv.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return iq.or([()=>iq.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}class fW{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new lY(e=>sn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=fd(this,t)}static factory(e,t){return new fW(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return iq.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return iq.forEach(this.orphanedSequenceNumbers,(r,n)=>this.isPinned(e,r,n).next(e=>e?iq.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.forEachDocumentKey(e,n=>this.isPinned(e,n,t).next(e=>{e||(r++,i.removeEntry(n,iv.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),iq.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),iq.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),iq.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),iq.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oy(e.data.value)),t}isPinned(e,t,r){return iq.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.orphanedSequenceNumbers.get(t);return iq.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fK{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,n){let i=new iK("createOrUpgrade",t);r<1&&n>=1&&(fG(e),fZ(e),f0(e),fY(e));let s=iq.resolve();return r<3&&n>=3&&(0!==r&&(f1(e),f0(e)),s=s.next(()=>f3(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>fQ(e,i))),s=s.next(()=>{f4(e)})),r<5&&n>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(i))),r<6&&n>=6&&(s=s.next(()=>(fJ(e),this.addDocumentGlobal(i)))),r<7&&n>=7&&(s=s.next(()=>this.ensureSequenceNumbers(i))),r<8&&n>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,i))),r<9&&n>=9&&(s=s.next(()=>{f2(e)})),r<10&&n>=10&&(s=s.next(()=>this.rewriteCanonicalIds(i))),r<11&&n>=11&&(s=s.next(()=>{f6(e),f5(e)})),r<12&&n>=12&&(s=s.next(()=>{f9(e)})),r<13&&n>=13&&(s=s.next(()=>fX(e)).next(()=>this.rewriteRemoteDocumentCache(e,i)).next(()=>e.deleteObjectStore(so))),r<14&&n>=14&&(s=s.next(()=>this.runOverlayMigration(e,i))),r<15&&n>=15&&(s=s.next(()=>f8(e))),r<16&&n>=16&&(s=s.next(()=>{t.objectStore(sY).clear()}).next(()=>{t.objectStore(s1).clear()})),r<17&&n>=17&&(s=s.next(()=>{f7(e)})),s}addDocumentGlobal(e){let t=0;return e.store(so).iterate((e,r)=>{t+=hQ(r)}).next(()=>{let r={byteSize:t};return e.store(sI).put(sk,r)})}removeAcknowledgedMutations(e){let t=e.store(sc),r=e.store(sh);return t.loadAll().next(t=>iq.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,aK],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(sp,n).next(r=>iq.forEach(r,r=>{nJ(r.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:r.batchId});let n=dA(this.serializer,r);return hZ(e,t.userId,n).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(sD),r=e.store(so);return e.store(sF).get(sj).next(e=>{let n=r=>t.put({targetId:0,path:sn(r),sequenceNumber:e.highestListenSequenceNumber}),i=[];return r.iterate((e,r)=>{let s=new iS(e),a=fH(s);i.push(t.get(a).next(e=>e?iq.resolve():n(s)))}).next(()=>iq.waitFor(i))})}createCollectionParentIndex(e,t){e.createObjectStore(sB,{keyPath:sU});let r=t.store(sB),n=new hU,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:sn(n)})}};return t.store(so).iterate({keysOnly:!0},(e,t)=>i(new iS(e).popLast())).next(()=>t.store(s_).iterate({keysOnly:!0},([e,t,r],n)=>i(sa(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(sR);return t.iterate((e,r)=>{let n=dN(r),i=dO(this.serializer,n);return t.put(i)})}rewriteRemoteDocumentCache(e,t){let r=t.store(so),n=[];return r.iterate((e,r)=>{let i=t.store(sS),s=pe(r).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(a))}).next(()=>iq.waitFor(n))}runOverlayMigration(e,t){let r=t.store(sh),n=fv(this.serializer),i=new fz(f$.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!==(t=r.get(e.userId))&&void 0!==t?t:ue();dA(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),iq.forEach(r,(e,r)=>{let s=new nV(r),a=dQ.forUser(this.serializer,s),o=i.getIndexManager(s);return new fk(n,hY.forUser(s,this.serializer,o,i.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new ad(t,i9.INVALID),e).next()})})}}function fH(e){return[0,sn(e)]}function fG(e){e.createObjectStore(sl)}function fZ(e){e.createObjectStore(sc,{keyPath:sd}),e.createObjectStore(sh,{keyPath:sf,autoIncrement:!0}).createIndex(sp,sm,{unique:!0}),e.createObjectStore(s_)}function fQ(e,t){return t.store(sh).loadAll().next(r=>{e.deleteObjectStore(sh),e.createObjectStore(sh,{keyPath:sf,autoIncrement:!0}).createIndex(sp,sm,{unique:!0});let n=t.store(sh),i=r.map(e=>n.put(e));return iq.waitFor(i)})}function fY(e){e.createObjectStore(so)}function fX(e){let t=e.createObjectStore(sS,{keyPath:sw});t.createIndex(sT,sE),t.createIndex(sC,sx)}function fJ(e){e.createObjectStore(sI)}function f0(e){e.createObjectStore(sD,{keyPath:sP}).createIndex(sM,sL,{unique:!0}),e.createObjectStore(sR,{keyPath:sA}).createIndex(sN,sO,{unique:!0}),e.createObjectStore(sF)}function f1(e){e.deleteObjectStore(sD),e.deleteObjectStore(sR),e.deleteObjectStore(sF)}function f2(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function f3(e){let t=e.store(sF),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:iv.min().toTimestamp(),targetCount:0};return t.put(sj,r)}function f4(e){e.createObjectStore(sV,{keyPath:sz})}function f6(e){e.createObjectStore(sq,{keyPath:s$})}function f5(e){e.createObjectStore(sW,{keyPath:sK})}function f8(e){e.createObjectStore(sH,{keyPath:sG,autoIncrement:!0}).createIndex(sZ,sQ,{unique:!1}),e.createObjectStore(sY,{keyPath:sX}).createIndex(sJ,s0,{unique:!1}),e.createObjectStore(s1,{keyPath:s2}).createIndex(s3,s4,{unique:!1})}function f9(e){let t=e.createObjectStore(s6,{keyPath:s5});t.createIndex(s8,s9,{unique:!1}),t.createIndex(s7,ae,{unique:!1})}function f7(e){e.createObjectStore(at,{keyPath:ar})}function pe(e){return e.document?new iE(iS.fromString(e.document.name).popFirst(5)):e.noDocument?iE.fromSegments(e.noDocument.path):e.unknownDocument?iE.fromSegments(e.unknownDocument.path):nY(36783)}let pt="IndexedDbPersistence",pr=18e5,pn=5e3,pi=4e3,ps="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pa="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",po="firestore_zombie",pl="main";class pu{constructor(e,t,r,n,i,s,a,o,l,u,c=fx){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=i,this.window=s,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=u,this.schemaVersion=c,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!pu.isAvailable())throw new n2(n1.UNIMPLEMENTED,pa);this.referenceDelegate=new fh(this,n),this.dbName=t+pl,this.serializer=new dw(o),this.simpleDb=new iH(this.dbName,this.schemaVersion,new fK(this.serializer)),this.globalsCache=new dX,this.targetCache=new h6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fv(this.serializer),this.bundleCache=new dH,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===u&&nG(pt,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new n2(n1.FAILED_PRECONDITION,ps);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new i9(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(iY(e))return nH(pt,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return nH(pt,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return pc(e).get(su).next(e=>iq.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return pd(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,pr)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=ah(e,sV);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,pr),n=e.filter(e=>-1===r.indexOf(e));return iq.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",pi,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?iq.resolve(!0):pc(e).get(su).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,pn)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new n2(n1.FAILED_PRECONDITION,ps);return!1}}return!!this.networkEnabled&&!!this.inForeground||pd(e).loadAll().next(e=>void 0===this.filterActiveClients(e,pn).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&nH(pt,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[sl,sV],e=>{let t=new ad(e,i9.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>pd(e).loadAll().next(e=>this.filterActiveClients(e,pr).map(e=>e.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(e,t){return hY.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hq(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return dQ.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let n;nH(pt,"Starting transaction:",e);let i="readonly"===t?"readonly":"readwrite",s=ac(this.schemaVersion);return this.simpleDb.runTransaction(e,i,s,i=>(n=new ad(i,this.listenSequence?this.listenSequence.next():i9.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(n).next(e=>!!e||this.canActAsPrimary(n)).next(t=>{if(!t)throw nG(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new n2(n1.FAILED_PRECONDITION,iU);return r(n)}).next(e=>this.acquireOrExtendPrimaryLease(n).next(()=>e)):this.verifyAllowTabSynchronization(n).next(()=>r(n))).then(e=>(n.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return pc(e).get(su).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,pn)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new n2(n1.FAILED_PRECONDITION,ps)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pc(e).put(su,t)}static isAvailable(){return iH.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=pc(e);return t.get(su).next(e=>this.isLocalClient(e)?(nH(pt,"Releasing primary lease."),t.delete(su)):iq.resolve())}isWithinAge(e,t){let r=Date.now(),n=r-t,i=r;return!(e<n)&&(!(e>i)||(nG(`Detected an update time that is in the future: ${e} > ${i}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;rl()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null===(t=this.webStorage)||void 0===t?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return nH(pt,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return nG(pt,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){nG("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${po}_${this.persistenceKey}_${e}`}}function pc(e){return ah(e,sl)}function pd(e){return ah(e,sV)}function ph(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}function pf(e,t,r,n,i){t=[...t],(e=[...e]).sort(r),t.sort(r);let s=e.length,a=t.length,o=0,l=0;for(;o<a&&l<s;){let s=r(e[l],t[o]);s<0?i(e[l++]):s>0?n(t[o++]):(o++,l++)}for(;o<a;)n(t[o++]);for(;l<s;)i(e[l++])}function pp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}let pm="LocalStore",pg=3e8;class py{constructor(e,t,r,n){this.persistence=e,this.queryEngine=t,this.serializer=n,this.targetDataByTarget=new ag(il),this.targetIdByTarget=new lY(e=>lc(e),lh),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fk(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function pv(e,t,r,n){return new py(e,t,r,n)}async function pb(e,t){let r=n0(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(i=>(n=i,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let i=[],s=[],a=ue();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return r.localDocuments.getDocuments(e,a).next(e=>({affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}))})})}function p_(e,t){let r,n;let i=n0(e),s=iy.now(),a=t.reduce((e,t)=>e.add(t.key),ue());return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=lJ(),l=ue();return i.remoteDocuments.getEntries(e,a).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,o)).next(n=>{r=n;let a=[];for(let e of t){let t=uA(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new uM(e.key,t,oj(t.value.mapValue),uE.exists(!0)))}return i.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(r,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:l3(r)}))}function pS(e,t){let r=n0(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return pL(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,pw(t))).next(()=>r.localDocuments.getDocuments(e,n))})}function pw(e){let t=ue();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function pT(e,t){let r=n0(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(nJ(null!==t,37113),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}function pE(e){let t=n0(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function pC(e){let t=n0(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function px(e,t){let r=n0(e),n=t.snapshotVersion,i=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=r.targetDataByTarget;let a=[];t.targetChanges.forEach((s,o)=>{let l=i.get(o);if(!l)return;a.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(aI.EMPTY_BYTE_STRING,iv.min()).withLastLimboFreeSnapshotVersion(iv.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(o,u),pk(l,u,s)&&a.push(r.targetCache.updateTargetData(e,u))});let o=lJ(),l=ue();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(pI(e,s,t.documentUpdates).next(e=>{o=e.changedDocuments,l=e.existenceChangedKeys})),!n.isEqual(iv.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return iq.waitFor(a).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(r.targetDataByTarget=i,e))}function pI(e,t,r){let n=ue(),i=ue();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=lJ();return r.forEach((r,s)=>{let a=e.get(r);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(iv.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):nH(pm,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",s.version)}),{changedDocuments:n,existenceChangedKeys:i}})}function pk(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=pg)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function pR(e,t){let r=n0(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>iq.forEach(t,t=>iq.forEach(t.addedKeys,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>iq.forEach(t.removedKeys,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(iY(e))nH(pm,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.targetDataByTarget=r.targetDataByTarget.insert(t,i)}}}function pA(e,t){let r=n0(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=aK),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function pN(e,t){let r=n0(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function pO(e,t){let r=n0(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.targetCache.getTargetData(e,t).next(i=>i?(n=i,iq.resolve(n)):r.targetCache.allocateTargetId(e).next(i=>(n=new dS(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.targetCache.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.targetDataByTarget.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function pD(e,t,r){let n=n0(e),i=n.targetIdByTarget.get(r);return void 0!==i?iq.resolve(n.targetDataByTarget.get(i)):n.targetCache.getTargetData(t,r)}async function pP(e,t,r){let n=n0(e),i=n.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(iY(e))nH(pm,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}function pM(e,t,r){let n=n0(e),i=iv.min(),s=ue();return n.persistence.runTransaction("Execute query","readwrite",e=>pD(n,e,lO(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(e,t,r?i:iv.min(),r?s:ue())).next(e=>(pz(n,lG(t),e),{documents:e,remoteKeys:s})))}function pL(e,t,r,n){let i=r.batch,s=i.keys(),a=iq.resolve();return s.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);nJ(null!==s,48541),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}function pj(e,t){let r=n0(e),n=n0(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>n.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):iq.resolve(null)))}function pF(e,t){n0(n0(e,py).mutationQueue).removeCachedMutationKeys(t)}function pB(e){return n0(n0(e,py).persistence).getActiveClients()}function pU(e,t){let r=n0(e),n=n0(r.targetCache),i=r.targetDataByTarget.get(t);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",e=>n.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function pV(e,t){let r=n0(e),n=r.collectionGroupReadTime.get(t)||iv.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,iL(n,iC),Number.MAX_SAFE_INTEGER)).then(e=>(pz(r,t,e),e))}function pz(e,t,r){let n=e.collectionGroupReadTime.get(t)||iv.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.collectionGroupReadTime.set(t,n)}function pq(e){return lO(lC(iS.fromString(`__bundle__/docs/${e}`)))}async function p$(e,t,r,n){let i=n0(e),s=ue(),a=lJ();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let n=t.toMutableDocument(e);n.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),a=a.insert(r,n)}let o=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await pO(i,pq(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>pI(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function pW(e,t){let r=n0(e),n=cb(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}function pK(e,t){let r=n0(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}async function pH(e,t,r=ue()){let n=await pO(e,lO(dF(t.bundledQuery))),i=n0(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{let s=cb(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.bundleCache.saveNamedQuery(e,t);let a=n.withResumeToken(aI.EMPTY_BYTE_STRING,s);return i.targetDataByTarget=i.targetDataByTarget.insert(a.targetId,a),i.targetCache.updateTargetData(e,a).next(()=>i.targetCache.removeMatchingKeysForTargetId(e,n.targetId)).next(()=>i.targetCache.addMatchingKeys(e,r,n.targetId)).next(()=>i.bundleCache.saveNamedQuery(e,t))})}function pG(e,t){n0(e).queryEngine.indexAutoCreationEnabled=t}class pZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}let pQ=100;function pY(){return rl()?8:iG(rr())>0?6:4}class pX{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=pQ,this.relativeIndexReadCostPerDocument=pY()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.performQueryUsingIndex(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.performQueryUsingRemoteKeys(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new pZ;return this.executeFullCollectionScan(e,t,r).next(n=>{if(i.result=n,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,r,n.size)})}).next(()=>i.result)}createCacheIndexes(e,t,r,n){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(nK()<=m.DEBUG&&nH("QueryEngine","SDK will not create cache indexes for query:",lz(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),iq.resolve()):(nK()<=m.DEBUG&&nH("QueryEngine","Query:",lz(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*n)?(nK()<=m.DEBUG&&nH("QueryEngine","The SDK decides to create cache indexes for query:",lz(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lO(t))):iq.resolve()}performQueryUsingIndex(e,t){if(lI(t))return iq.resolve(null);let r=lO(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=lO(t=lj(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=ue(...n);return this.localDocumentsView.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,i,r.readTime)?this.performQueryUsingIndex(e,lj(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,n){return lI(t)||n.isEqual(iv.min())?iq.resolve(null):this.localDocumentsView.getDocuments(e,r).next(i=>{let s=this.applyQuery(t,i);return this.needsRefill(t,s,r,n)?iq.resolve(null):(nK()<=m.DEBUG&&nH("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lz(t)),this.appendRemainingResults(e,s,t,iL(n,iC)).next(e=>e))})}applyQuery(e,t){let r=new a_(lZ(e));return t.forEach((t,n)=>{lq(e,n)&&(r=r.add(n))}),r}needsRefill(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}executeFullCollectionScan(e,t,r){return nK()<=m.DEBUG&&nH("QueryEngine","Using full collection scan to execute query:",lz(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,iF.min(),r)}appendRemainingResults(e,t,r,n){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let pJ="firestore_clients";function p0(e,t){return`${pJ}_${e}_${t}`}let p1="firestore_mutations";function p2(e,t,r){let n=`${p1}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let p3="firestore_targets";function p4(e,t){return`${p3}_${e}_${t}`}let p6="firestore_online_state";function p5(e){return`${p6}_${e}`}let p8="firestore_bundle_loaded_v2";function p9(e){return`${p8}_${e}`}let p7="firestore_sequence_number";function me(e){return`${p7}_${e}`}let mt="SharedClientState";class mr{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static fromWebStorageEntry(e,t,r){let n;let i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(n=new n2(i.error.code,i.error.message)),s)?new mr(e,t,i.state,n):(nG(mt,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mn{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r;let n=JSON.parse(t),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new n2(n.error.code,n.error.message)),i)?new mn(e,n.state,r):(nG(mt,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mi{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=ur();for(let e=0;n&&e<r.activeTargetIds.length;++e)n=aZ(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new mi(e,i):(nG(mt,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ms{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ms(t.clientId,t.onlineState):(nG(mt,`Failed to parse online state: ${e}`),null)}}class ma{constructor(){this.activeTargetIds=ur()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class mo{constructor(e,t,r,n,i){this.window=e,this.queue=t,this.persistenceKey=r,this.localClientId=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new ag(il),this.started=!1,this.earlyEvents=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.localClientStorageKey=p0(this.persistenceKey,this.localClientId),this.sequenceNumberKey=me(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new ma),this.clientStateKeyRe=RegExp(`^${pJ}_${s}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${p1}_${s}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${p3}_${s}_(\\d+)$`),this.onlineStateKey=p5(this.persistenceKey),this.bundleLoadedKey=p9(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}async start(){for(let e of(await this.syncEngine.getActiveClients())){if(e===this.localClientId)continue;let t=this.getItem(p0(this.persistenceKey,e));if(t){let r=mi.fromWebStorageEntry(e,t);r&&(this.activeClients=this.activeClients.insert(r.clientId,r))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let t=this.fromWebStorageOnlineState(e);t&&this.handleOnlineStateEvent(t)}for(let e of this.earlyEvents)this.handleWebStorageEvent(e);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let t=!1;return this.activeClients.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,t,r){this.persistMutationState(e,t,r),this.removeMutationState(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(p4(this.persistenceKey,e));if(t){let n=mn.fromWebStorageEntry(e,t);n&&(r=n.state)}}return t&&this.localClientState.addQueryTarget(e),this.persistClientState(),r}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(p4(this.persistenceKey,e))}updateQueryState(e,t,r){this.persistQueryTargetState(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.removeMutationState(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return nH(mt,"READ",e,t),t}setItem(e,t){nH(mt,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){nH(mt,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let t=e;if(t.storageArea===this.storage){if(nH(mt,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey){nG("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(async()=>{if(!this.started){this.earlyEvents.push(t);return}if(null!==t.key){if(this.clientStateKeyRe.test(t.key)){if(null!=t.newValue){let e=this.fromWebStorageClientState(t.key,t.newValue);if(e)return this.handleClientStateEvent(e.clientId,e)}else{let e=this.fromWebStorageClientStateKey(t.key);return this.handleClientStateEvent(e,null)}}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageMutationMetadata(t.key,t.newValue);if(e)return this.handleMutationBatchEvent(e)}}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue);if(e)return this.handleQueryTargetEvent(e)}}else if(t.key===this.onlineStateKey){if(null!==t.newValue){let e=this.fromWebStorageOnlineState(t.newValue);if(e)return this.handleOnlineStateEvent(e)}}else if(t.key===this.sequenceNumberKey){let e=ml(t.newValue);e!==i9.INVALID&&this.sequenceNumberHandler(e)}else if(t.key===this.bundleLoadedKey){let e=this.fromWebStoreBundleLoadedState(t.newValue);await Promise.all(e.map(e=>this.syncEngine.synchronizeWithChangedDocuments(e)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,t,r){let n=new mr(this.currentUser,e,t,r),i=p2(this.persistenceKey,this.currentUser,e);this.setItem(i,n.toWebStorageJSON())}removeMutationState(e){let t=p2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}persistOnlineState(e){let t={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))}persistQueryTargetState(e,t,r){let n=p4(this.persistenceKey,e),i=new mn(e,t,r);this.setItem(n,i.toWebStorageJSON())}persistBundleLoadedState(e){let t=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,t)}fromWebStorageClientStateKey(e){let t=this.clientStateKeyRe.exec(e);return t?t[1]:null}fromWebStorageClientState(e,t){let r=this.fromWebStorageClientStateKey(e);return mi.fromWebStorageEntry(r,t)}fromWebStorageMutationMetadata(e,t){let r=this.mutationBatchKeyRe.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return mr.fromWebStorageEntry(new nV(i),n,t)}fromWebStorageQueryTargetMetadata(e,t){let r=Number(this.queryTargetKeyRe.exec(e)[1]);return mn.fromWebStorageEntry(r,t)}fromWebStorageOnlineState(e){return ms.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}async handleMutationBatchEvent(e){if(e.user.uid!==this.currentUser.uid){nH(mt,`Ignoring mutation for non-active user ${e.user.uid}`);return}return this.syncEngine.applyBatchState(e.batchId,e.state,e.error)}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,t){let r=t?this.activeClients.insert(e,t):this.activeClients.remove(e),n=this.extractActiveQueryTargets(this.activeClients),i=this.extractActiveQueryTargets(r),s=[],a=[];return i.forEach(e=>{n.has(e)||s.push(e)}),n.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.applyActiveTargetsChange(s,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let t=ur();return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}function ml(e){let t=i9.INVALID;if(null!=e)try{let r=JSON.parse(e);nJ("number"==typeof r,30636,{seqString:e}),t=r}catch(e){nG(mt,"Failed to read sequence number from WebStorage",e)}return t}class mu{constructor(){this.localState=new ma,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new ma,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mc{addCallback(e){}shutdown(){}}class md{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}let mh=null;function mf(){return 0x10000000+Math.round(0x80000000*Math.random())}function mp(){return null===mh?mh=mf():mh++,"0x"+mh.toString(16)}function mm(e){return new Promise((t,r)=>{e((e,n)=>{e?r(e):t(n)})})}let mg="1.9.15",my="GrpcConnection",mv=`gl-node/${process.versions.node} fire/${nz} grpc/${mg}`;function mb(e,t,r,n){nJ(null===t||"OAuth"===t.type,36936);let i=new nj.SF;return t&&t.headers.forEach((e,t)=>i.set(t,e)),r&&r.headers.forEach((e,t)=>i.set(t,e)),n&&i.set("X-Firebase-GMPID",n),i.set("X-Goog-Api-Client",mv),i.set("Google-Cloud-Resource-Prefix",e),i.set("x-goog-request-params",e),i}class m_{get shouldResourcePathBeIncludedInRequest(){return!0}constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}ensureActiveStub(){if(!this.cachedStub){nH(my,"Creating Firestore stub.");let e=this.databaseInfo.ssl?nj.K9.createSsl():nj.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,n,i){let s=mp(),a=this.ensureActiveStub(),o=mb(this.databasePath,n,i,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return mm(t=>(nH(my,`RPC '${e}' ${s} invoked with request:`,r),a[e](l,o,(r,n)=>{r?(nH(my,`RPC '${e}' ${s} failed with error:`,r),t(new n2(uY(r.code),r.message))):(nH(my,`RPC '${e}' ${s} completed with response:`,n),t(void 0,n))})))}invokeStreamingRPC(e,t,r,n,i,s){let a=mp(),o=[],l=new n3;nH(my,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),c=mb(this.databasePath,n,i,this.databaseInfo.appId),d=Object.assign(Object.assign({},r),{database:this.databasePath}),h=u[e](d,c),f=!1;return h.on("data",t=>{nH(my,`RPC ${e} ${a} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(f=!0,l.resolve(o))}),h.on("end",()=>{nH(my,`RPC '${e}' ${a} completed.`),f||(f=!0,l.resolve(o))}),h.on("error",t=>{nH(my,`RPC '${e}' ${a} failed with error:`,t);let r=uY(t.code);l.reject(new n2(r,t.message))}),l.promise}openStream(e,t,r){let n=mp(),i=this.ensureActiveStub(),s=mb(this.databasePath,t,r,this.databaseInfo.appId),a=i[e](s),o=!1,l=e=>{o||(o=!0,u.callOnClose(e),a.end())},u=new md({sendFn:t=>{if(o)nH(my,`RPC '${e}' stream ${n} not sending because gRPC stream is closed:`,t);else{nH(my,`RPC '${e}' stream ${n} sending:`,t);try{a.write(t)}catch(e){throw nG("Failure sending:",t),nG("Error:",e),e}}},closeFn:()=>{nH(my,`RPC '${e}' stream ${n} closed locally via close().`),l()}}),c=!1;return a.on("data",t=>{o||(nH(my,`RPC '${e}' stream ${n} received:`,t),c||(u.callOnConnected(),c=!0),u.callOnMessage(t))}),a.on("end",()=>{nH(my,`RPC '${e}' stream ${n} ended.`),l()}),a.on("error",t=>{o||(nZ(my,`RPC '${e}' stream ${n} error. Code:`,t.code,"Message:",t.message),l(new n2(uY(t.code),t.message)))}),nH(my,`Opening RPC '${e}' stream ${n} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let mS={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:0x44f2530,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var mw={nested:mS},mT=Object.freeze({__proto__:null,nested:mS,default:mw});let mE={longs:String,enums:String,defaults:!0,oneofs:!1};function mC(){let e=nF.im(mT,mE);return nj.Rz(e)}function mx(e){return new m_(mC(),e)}function mI(){return new mc}function mk(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function mR(){return null}function mA(e){return new cc(e,!1)}let mN="ExponentialBackoff",mO=1e3,mD=1.5,mP=6e4;class mM{constructor(e,t,r=mO,n=mD,i=mP){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=n,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),n=Math.max(0,t-r);n>0&&nH(mN,`Backing off for ${n} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,n,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}let mL="PersistentStream",mj=6e4,mF=1e4;class mB{constructor(e,t,r,n,i,s,a,o){this.queue=e,this.idleTimerId=r,this.healthTimerId=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new mM(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(this.responseCount=0,4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,mj,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===n1.RESOURCE_EXHAUSTED?(nG(t.toString()),nG("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===n1.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new n2(n1.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,mF,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>1==++this.responseCount?this.onFirst(e):this.onNext(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return nH(mL,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(nH(mL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mU extends mB{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=cL(this.serializer,e),r=cF(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=cI(this.serializer),t.addTarget=c1(this.serializer,e);let r=cJ(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=cI(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class mV extends mB{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return nJ(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nJ(!e.writeResults||0===e.writeResults.length,55816),this.listener.onHandshakeComplete()}onNext(e){nJ(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=c$(e.writeResults,e.commitTime),r=cb(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=cI(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>cB(this.serializer,e))};this.sendRequest(t)}}class mz{}class mq extends mz{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new n2(n1.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeRPC(e,cS(t,r),n,i,s)).catch(e=>{if("FirebaseError"===e.name)throw e.code===n1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new n2(n1.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,n,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(e,cS(t,r),n,s,a,i)).catch(e=>{if("FirebaseError"===e.name)throw e.code===n1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new n2(n1.UNKNOWN,e.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function m$(e,t,r,n){return new mq(e,t,r,n)}async function mW(e,t){let r=n0(e),n={writes:t.map(e=>cB(r.serializer,e))};await r.invokeRPC("Commit",r.serializer.databaseId,iS.emptyPath(),n)}async function mK(e,t){let r=n0(e),n={documents:t.map(e=>cT(r.serializer,e))},i=await r.invokeStreamingRPC("BatchGetDocuments",r.serializer.databaseId,iS.emptyPath(),n,t.length),s=new Map;i.forEach(e=>{let t=cM(r.serializer,e);s.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=s.get(e.toString());nJ(!!t,55234,{key:e}),a.push(t)}),a}async function mH(e,t,r){var n;let i=n0(e),{request:s,aliasMap:a,parent:o}=cQ(i.serializer,lD(t),r);i.connection.shouldResourcePathBeIncludedInRequest||delete s.parent;let l=(await i.invokeStreamingRPC("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);nJ(1===l.length,64727);let u=null===(n=l[0].result)||void 0===n?void 0:n.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[a[t]]=u[t],e),{})}function mG(e,t,r){let n=n0(e);return n.verifyInitialized(),new mV(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}function mZ(e,t,r){let n=n0(e);return n.verifyInitialized(),new mU(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}let mQ="OnlineStateTracker",mY=1,mX=1e4;class mJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",mX,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${mX/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=mY&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${mY} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(nG(t),this.shouldWarnClientIsOffline=!1):nH(mQ,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}let m0="RemoteStore",m1=10;class m2{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=i,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{gn(this)&&(nH(m0,"Restarting streams for network reachability change."),await gT(this))})}),this.onlineStateTracker=new mJ(r,n)}}function m3(e,t,r,n,i){return new m2(e,t,r,n,i)}async function m4(e){if(gn(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function m6(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function m5(e){let t=n0(e);nH(m0,"RemoteStore shutting down."),t.offlineCauses.add(5),await m6(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function m8(e,t){let r=n0(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),gr(r)?gt(r):gx(r).isOpen()&&m7(r,t))}function m9(e,t){let r=n0(e),n=gx(r);r.listenTargets.delete(t),n.isOpen()&&ge(r,t),0===r.listenTargets.size&&(n.isOpen()?n.markIdle():gn(r)&&r.onlineStateTracker.set("Unknown"))}function m7(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(iv.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}gx(e).watch(t)}function ge(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),gx(e).unwatch(t)}function gt(e){e.watchChangeAggregator=new cn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),gx(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function gr(e){return gn(e)&&!gx(e).isStarted()&&e.listenTargets.size>0}function gn(e){return 0===n0(e).offlineCauses.size}function gi(e){e.watchChangeAggregator=void 0}async function gs(e){e.onlineStateTracker.set("Online")}async function ga(e){e.listenTargets.forEach((t,r)=>{m7(e,t)})}async function go(e,t){gi(e),gr(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),gt(e)):e.onlineStateTracker.set("Unknown")}async function gl(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof ce&&2===t.state&&t.cause){try{await gh(e,t)}catch(r){nH(m0,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await gu(e,r)}return}if(t instanceof u9?e.watchChangeAggregator.handleDocumentChange(t):t instanceof u7?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(iv.min()))try{let t=await pC(e.localStore);r.compareTo(t)>=0&&await gd(e,r)}catch(t){nH(m0,"Failed to raise snapshot:",t),await gu(e,t)}}async function gu(e,t,r){if(iY(t))e.offlineCauses.add(1),await m6(e),e.onlineStateTracker.set("Offline"),r||(r=()=>pC(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nH(m0,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await m4(e)});else throw t}function gc(e,t){return t().catch(r=>gu(e,r,t))}function gd(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(n);i&&e.listenTargets.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.listenTargets.get(t);n&&(e.listenTargets.set(t,n.withResumeToken(aI.EMPTY_BYTE_STRING,n.snapshotVersion)),ge(e,t),m7(e,new dS(n.target,t,r,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function gh(e,t){let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function gf(e){let t=n0(e),r=gI(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:aK;for(;gp(t);)try{let e=await pA(t.localStore,n);if(null===e){0===t.writePipeline.length&&r.markIdle();break}n=e.batchId,gm(t,e)}catch(e){await gu(t,e)}gg(t)&&gy(t)}function gp(e){return gn(e)&&e.writePipeline.length<m1}function gm(e,t){e.writePipeline.push(t);let r=gI(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function gg(e){return gn(e)&&!gI(e).isStarted()&&e.writePipeline.length>0}function gy(e){gI(e).start()}async function gv(e){gI(e).writeHandshake()}async function gb(e){let t=gI(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function g_(e,t,r){let n=e.writePipeline.shift(),i=uK.from(n,t,r);await gc(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await gf(e)}async function gS(e,t){t&&gI(e).handshakeComplete&&await gw(e,t),gg(e)&&gy(e)}async function gw(e,t){if(uQ(t.code)){let r=e.writePipeline.shift();gI(e).inhibitBackoff(),await gc(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await gf(e)}}async function gT(e){let t=n0(e);t.offlineCauses.add(4),await m6(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await m4(t)}async function gE(e,t){let r=n0(e);r.asyncQueue.verifyOperationInProgress(),nH(m0,"RemoteStore received new credentials");let n=gn(r);r.offlineCauses.add(3),await m6(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await m4(r)}async function gC(e,t){let r=n0(e);t?(r.offlineCauses.delete(2),await m4(r)):t||(r.offlineCauses.add(2),await m6(r),r.onlineStateTracker.set("Unknown"))}function gx(e){return e.watchStream||(e.watchStream=mZ(e.datastore,e.asyncQueue,{onConnected:gs.bind(null,e),onOpen:ga.bind(null,e),onClose:go.bind(null,e),onWatchChange:gl.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),gr(e)?gt(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),gi(e))})),e.watchStream}function gI(e){return e.writeStream||(e.writeStream=mG(e.datastore,e.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:gv.bind(null,e),onClose:gS.bind(null,e),onHandshakeComplete:gb.bind(null,e),onMutationResult:g_.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await gf(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(nH(m0,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}let gk="AsyncQueue";class gR{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new n3,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new gR(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new n2(n1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gA(e,t){if(nG(gk,`${t}: ${e}`),iY(e))return new n2(n1.UNAVAILABLE,`${t}: ${e}`);throw e}class gN{static emptySet(e){return new gN(e.comparator)}constructor(e){e?this.comparator=(t,r)=>e(t,r)||iE.comparator(t.key,r.key):this.comparator=(e,t)=>iE.comparator(e.key,t.key),this.keyedMap=l1(),this.sortedSet=new ag(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gN)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new gN;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gO{constructor(){this.changeMap=new ag(iE.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):nY(63341,{change:e,oldChange:r})}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class gD{constructor(e,t,r,n,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new gD(e,t,gN.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!lU(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class gP{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}}function gM(){return new gL}class gL{constructor(){this.queries=gj(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){gq(this,new n2(n1.ABORTED,"Firestore shutting down"))}}function gj(){return new lY(e=>lV(e),lU)}async function gF(e,t){let r=n0(e),n=3,i=t.query,s=r.queries.get(i);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2):(s=new gP,n=t.listensToRemoteStore()?0:1);try{switch(n){case 0:s.viewSnap=await r.onListen(i,!0);break;case 1:s.viewSnap=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(r){let e=gA(r,`Initialization of query '${lz(t.query)}' failed`);t.onError(e);return}r.queries.set(i,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&g$(r)}async function gB(e,t){let r=n0(e),n=t.query,i=3,s=r.queries.get(n);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),0===s.listeners.length?i=t.listensToRemoteStore()?0:1:!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gU(e,t){let r=n0(e),n=!1;for(let e of t){let t=e.query,i=r.queries.get(t);if(i){for(let t of i.listeners)t.onViewSnapshot(e)&&(n=!0);i.viewSnap=e}}n&&g$(r)}function gV(e,t,r){let n=n0(e),i=n.queries.get(t);if(i)for(let e of i.listeners)e.onError(r);n.queries.delete(t)}function gz(e,t){let r=n0(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(n=!0)}),n&&g$(r)}function gq(e,t){let r=n0(e),n=r.queries;r.queries=gj(),n.forEach((e,r)=>{for(let e of r.listeners)e.onError(t)})}function g$(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}!function(e){e.Default="default",e.Cache="cache"}(b||(b={}));class gW{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new gD(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=gD.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==b.Cache}}class gK{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=n}static fromSnapshot(e,t){let r=ue(),n=ue();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new gK(e,t.fromCache,r,n)}}class gH{constructor(e){this.serializer=e}toDocumentKey(e){return cE(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?cO(this.serializer,e.document,!1):oF.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return cb(e)}}class gG{constructor(e,t,r){this.bundleMetadata=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gZ(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=iS.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new gH(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.toDocumentKey(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||ue()).add(e);t.set(r,n)}}return t}async complete(){let e=await p$(this.localStore,new gH(this.serializer),this.documents,this.bundleMetadata.id),t=this.getQueryDocumentMapping(this.documents);for(let e of this.queries)await pH(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}}}function gZ(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function gQ(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class gY{constructor(e){this.key=e}}class gX{constructor(e){this.key=e}}class gJ{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=ue(),this.mutatedKeys=ue(),this.docComparator=lZ(e),this.documentSet=new gN(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new gO,n=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,s=n,a=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=lq(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(r.track({type:3,doc:c}),f=!0):!this.shouldWaitForSyncedDocument(u,c)&&(r.track({type:2,doc:c}),f=!0,(o&&this.docComparator(c,o)>0||l&&0>this.docComparator(c,l))&&(a=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:i}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let s=e.changeSet.getChanges();s.sort((e,t)=>g0(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r),n=null!=n&&n;let a=t&&!n?this.updateLimboDocuments():[],o=0===this.limboDocuments.size&&this.current&&!n?1:0,l=o!==this.syncState;return(this.syncState=o,0!==s.length||l)?{snapshot:new gD(this.query,e.documentSet,i,s,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:a}:{limboChanges:a}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new gO,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=ue(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new gX(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new gY(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=ue();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return gD.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function g0(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nY(20277,{change:e})}};return r(e)-r(t)}let g1="SyncEngine";class g2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class g3{constructor(e){this.key=e,this.receivedDocument=!1}}class g4{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new lY(e=>lV(e),lU),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new ag(iE.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new fO,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=h4.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function g6(e,t,r,n,i,s,a){let o=new g4(e,t,r,n,i,s);return a&&(o._isPrimaryClient=!0),o}async function g5(e,t,r=!0){let n;let i=yN(e),s=i.queryViewsByQuery.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.computeInitialSnapshot()):n=await g9(i,t,r,!0),n}async function g8(e,t){let r=yN(e);await g9(r,t,!0,!1)}async function g9(e,t,r,n){let i;let s=await pO(e.localStore,lO(t)),a=s.targetId,o=e.sharedClientState.addLocalQueryTarget(a,r);return n&&(i=await g7(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&r&&m8(e.remoteStore,s),i}async function g7(e,t,r,n,i){e.applyDocChanges=(t,r,n)=>yv(e,t,r,n);let s=await pM(e.localStore,t,!0),a=new gJ(t,s.remoteKeys),o=a.computeDocChanges(s.documents),l=u8.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);yp(e,r,u.limboChanges);let c=new g2(t,r,a);return e.queryViewsByQuery.set(t,c),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),u.snapshot}async function ye(e,t,r){let n=n0(e),i=n.queryViewsByQuery.get(t),s=n.queriesByTarget.get(i.targetId);if(s.length>1){n.queriesByTarget.set(i.targetId,s.filter(e=>!lU(e,t))),n.queryViewsByQuery.delete(t);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await pP(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&m9(n.remoteStore,i.targetId),yh(n,i.targetId)}).catch(iz)):(yh(n,i.targetId),await pP(n.localStore,i.targetId,!0))}async function yt(e,t){let r=n0(e),n=r.queryViewsByQuery.get(t),i=r.queriesByTarget.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),m9(r.remoteStore,n.targetId))}async function yr(e,t,r){let n=yO(e);try{let e=await p_(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),yc(n,e.batchId,r),await yy(n,e.changes),await gf(n.remoteStore)}catch(t){let e=gA(t,"Failed to persist write");r.reject(e)}}async function yn(e,t){let r=n0(e);try{let e=await px(r.localStore,t);t.targetChanges.forEach((e,t)=>{let n=r.activeLimboResolutionsByTarget.get(t);n&&(nJ(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?n.receivedDocument=!0:e.modifiedDocuments.size>0?nJ(n.receivedDocument,14607):e.removedDocuments.size>0&&(nJ(n.receivedDocument,42227),n.receivedDocument=!1))}),await yy(r,e,t)}catch(e){await iz(e)}}function yi(e,t,r){let n=n0(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.queryViewsByQuery.forEach((r,n)=>{let i=n.view.applyOnlineStateChange(t);i.snapshot&&e.push(i.snapshot)}),gz(n.eventManager,t),e.length&&n.syncEngineListener.onWatchChange(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function ys(e,t,r){let n=n0(e);n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.activeLimboResolutionsByTarget.get(t),s=i&&i.key;if(s){let e=new ag(iE.comparator);e=e.insert(s,oF.newNoDocument(s,iv.min()));let r=ue().add(s),i=new u5(iv.min(),new Map,new ag(il),e,r);await yn(n,i),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),yg(n)}else await pP(n.localStore,t,!1).then(()=>yh(n,t,r)).catch(iz)}async function ya(e,t){let r=n0(e),n=t.batch.batchId;try{let e=await pS(r.localStore,t);yd(r,n,null),yl(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await yy(r,e)}catch(e){await iz(e)}}async function yo(e,t,r){let n=n0(e);try{let e=await pT(n.localStore,t);yd(n,t,r),yl(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await yy(n,e)}catch(e){await iz(e)}}function yl(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function yu(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new n2(n1.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function yc(e,t,r){let n=e.mutationUserCallbacks[e.currentUser.toKey()];n||(n=new ag(il)),n=n.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=n}function yd(e,t,r){let n=n0(e),i=n.mutationUserCallbacks[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=i}}function yh(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||yf(e,t)})}function yf(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(m9(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),yg(e))}function yp(e,t,r){for(let n of r)n instanceof gY?(e.limboDocumentRefs.addReference(n.key,t),ym(e,n)):n instanceof gX?(nH(g1,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||yf(e,n.key)):nY(19791,{limboChange:n})}function ym(e,t){let r=t.key,n=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(n)||(nH(g1,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),yg(e))}function yg(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new iE(iS.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new g3(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),m8(e.remoteStore,new dS(lO(lC(r.path)),n,"TargetPurposeLimboResolution",i9.INVALID))}}async function yy(e,t,r){let n=n0(e),i=[],s=[],a=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((e,o)=>{a.push(n.applyDocChanges(o,t,r).then(e=>{var t;if((e||r)&&n.isPrimaryClient){let i=e?!e.fromCache:null===(t=null==r?void 0:r.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;n.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);let t=gK.fromSnapshot(o.targetId,e);s.push(t)}}))}),await Promise.all(a),n.syncEngineListener.onWatchChange(i),await pR(n.localStore,s))}async function yv(e,t,r,n){let i=t.view.computeDocChanges(r);i.needsRefill&&(i=await pM(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,i)));let s=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return yp(e,t.targetId,o.limboChanges),o.snapshot}async function yb(e,t){let r=n0(e);if(!r.currentUser.isEqual(t)){nH(g1,"User change. New user:",t.toKey());let e=await pb(r.localStore,t);r.currentUser=t,yu(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await yy(r,e.affectedDocuments)}}function y_(e,t){let r=n0(e),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return ue().add(n.key);{let e=ue(),n=r.queriesByTarget.get(t);if(!n)return e;for(let t of n){let n=r.queryViewsByQuery.get(t);e=e.unionWith(n.view.syncedDocuments)}return e}}async function yS(e,t){let r=n0(e),n=await pM(r.localStore,t.query,!0),i=t.view.synchronizeWithPersistedState(n);return r.isPrimaryClient&&yp(r,t.targetId,i.limboChanges),i}async function yw(e,t){let r=n0(e);return pV(r.localStore,t).then(e=>yy(r,e))}async function yT(e,t,r,n){let i=n0(e),s=await pj(i.localStore,t);if(null===s){nH(g1,"Cannot apply mutation batch with id: "+t);return}"pending"===r?await gf(i.remoteStore):"acknowledged"===r||"rejected"===r?(yd(i,t,n||null),yl(i,t),pF(i.localStore,t)):nY(6720,"Unknown batchState",{batchState:r}),await yy(i,s)}async function yE(e,t){let r=n0(e);if(yN(r),yO(r),!0===t&&!0!==r._isPrimaryClient){let e=r.sharedClientState.getAllActiveQueryTargets(),t=await yx(r,e.toArray());for(let e of(r._isPrimaryClient=!0,await gC(r.remoteStore,!0),t))m8(r.remoteStore,e)}else if(!1===t&&!1!==r._isPrimaryClient){let e=[],t=Promise.resolve();r.queriesByTarget.forEach((n,i)=>{r.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(yh(r,i),pP(r.localStore,i,!0))),m9(r.remoteStore,i)}),await t,await yx(r,e),yC(r),r._isPrimaryClient=!1,await gC(r.remoteStore,!1)}}function yC(e){let t=n0(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{m9(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new ag(iE.comparator)}async function yx(e,t,r){let n=n0(e),i=[],s=[];for(let e of t){let t;let r=n.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await pO(n.localStore,lO(r[0])),r)){let t=n.queryViewsByQuery.get(e),r=await yS(n,t);r.snapshot&&s.push(r.snapshot)}else{let r=await pU(n.localStore,e);t=await pO(n.localStore,r),await g7(n,yI(r),e,!1,t.resumeToken)}i.push(t)}return n.syncEngineListener.onWatchChange(s),i}function yI(e){return lE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yk(e){return pB(n0(e).localStore)}async function yR(e,t,r,n){let i=n0(e);if(i._isPrimaryClient){nH(g1,"Ignoring unexpected query state notification.");return}let s=i.queriesByTarget.get(t);if(s&&s.length>0)switch(r){case"current":case"not-current":{let e=await pV(i.localStore,lG(s[0])),n=u5.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,aI.EMPTY_BYTE_STRING);await yy(i,e,n);break}case"rejected":await pP(i.localStore,t,!0),yh(i,t,n);break;default:nY(64155,r)}}async function yA(e,t,r){let n=yN(e);if(n._isPrimaryClient){for(let e of t){if(n.queriesByTarget.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){nH(g1,"Adding an already active target "+e);continue}let t=await pU(n.localStore,e),r=await pO(n.localStore,t);await g7(n,yI(t),r.targetId,!1,r.resumeToken),m8(n.remoteStore,r)}for(let e of r)n.queriesByTarget.has(e)&&await pP(n.localStore,e,!1).then(()=>{m9(n.remoteStore,e),yh(n,e)}).catch(iz)}}function yN(e){let t=n0(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yn.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ys.bind(null,t),t.syncEngineListener.onWatchChange=gU.bind(null,t.eventManager),t.syncEngineListener.onWatchError=gV.bind(null,t.eventManager),t}function yO(e){let t=n0(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ya.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yo.bind(null,t),t}async function yD(e,t,r){try{let n=await t.getMetadata();if(await pW(e.localStore,n))return await t.close(),r._completeWith(gQ(n)),Promise.resolve(new Set);r._updateProgress(gZ(n));let i=new gG(n,e.localStore,t.serializer),s=await t.nextElement();for(;s;){let e=await i.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let a=await i.complete();return await yy(e,a.changedDocs,void 0),await pK(e.localStore,n),r._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(e){return nZ(g1,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}class yP{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mA(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return pv(this.persistence,new pX,e.initialUser,this.serializer)}createPersistence(e){return new fz(f$.factory,this.serializer)}createSharedClientState(e){return new mu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yP.provider={build:()=>new yP};class yM extends yP{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){return nJ(this.persistence.referenceDelegate instanceof fW,46915),new fu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createPersistence(e){let t=void 0!==this.cacheSizeBytes?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new fz(e=>fW.factory(e,t),this.serializer)}}class yL extends yP{constructor(e,t,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.onlineComponentProvider.initialize(this,e),await yO(this.onlineComponentProvider.syncEngine),await gf(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return pv(this.persistence,new pX,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new fu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new i8(t,this.persistence);return new i5(e.asyncQueue,r)}createPersistence(e){let t=ph(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new pu(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mk(),mR(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mu}}class yj{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yi(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yb.bind(null,this.syncEngine),await gC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return gM()}createDatastore(e){let t=mA(e.databaseInfo.databaseId),r=mx(e.databaseInfo);return m$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return m3(this.localStore,this.datastore,e.asyncQueue,e=>yi(this.syncEngine,e,0),mI())}createSyncEngine(e,t){return g6(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await m5(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}yj.provider={build:()=>new yj};let yF=10240;function yB(e,t=yF){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}function yU(e,t,r){if(!r)throw new n2(n1.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function yV(e,t,r,n){if(!0===t&&!0===n)throw new n2(n1.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function yz(e){if(!iE.isDocumentKey(e))throw new n2(n1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yq(e){if(iE.isDocumentKey(e))throw new n2(n1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function y$(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function yW(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{let t=yK(e);return t?`a custom ${t} object`:"an object"}}if("function"==typeof e)return"a function";return nY(12329,{type:typeof e})}function yK(e){return e.constructor?e.constructor.name:null}function yH(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new n2(n1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=yW(e);throw new n2(n1.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function yG(e,t){if(!(e instanceof Uint8Array))throw new n2(n1.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${yW(e)}`);return yB(e,t)}class yZ{constructor(e){this.observer=e,this.muted=!1}next(e){!this.muted&&this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):nG("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class yQ{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}class yY{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new n3,this.buffer=new Uint8Array,this.textDecoder=ia(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new yQ(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function yX(e,t){return new yY(e,t)}class yJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new n2(n1.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await mK(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new uV(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=iE.fromPath(t);this.mutations.push(new u$(r,this.precondition(r)))}),await mW(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=iv.min();else throw nY(50498,{documentName:e.constructor.name});let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new n2(n1.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?uE.none():t.isEqual(iv.min())?uE.exists(!1):uE.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return uE.exists(!0);if(t.isEqual(iv.min()))throw new n2(n1.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return uE.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}let y0="FirestoreClient",y1=100,y2=11,y3=20,y4=22;class y6{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=nV.UNAUTHENTICATED,this.clientId=io.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{nH(y0,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(nH(y0,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:y1}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new n3;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=gA(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function y5(e,t){e.asyncQueue.verifyOperationInProgress(),nH(y0,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await pb(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function y8(e,t){e.asyncQueue.verifyOperationInProgress();let r=await y7(e);nH(y0,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>gE(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>gE(t.remoteStore,r)),e._onlineComponents=t}function y9(e){return"FirebaseError"===e.name?e.code===n1.FAILED_PRECONDITION||e.code===n1.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||e.code===y4||e.code===y3||e.code===y2}async function y7(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){nH(y0,"Using user provided OfflineComponentProvider");try{await y5(e,e._uninitializedComponentsProvider._offline)}catch(r){let t=r;if(!y9(t))throw t;nZ("Error using user provided cache. Falling back to memory cache: "+t),await y5(e,new yP)}}else nH(y0,"Using default OfflineComponentProvider"),await y5(e,new yM(void 0))}return e._offlineComponents}async function ve(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nH(y0,"Using user provided OnlineComponentProvider"),await y8(e,e._uninitializedComponentsProvider._online)):(nH(y0,"Using default OnlineComponentProvider"),await y8(e,new yj))),e._onlineComponents}function vt(e){return y7(e).then(e=>e.localStore)}function vr(e){return ve(e).then(e=>e.syncEngine)}function vn(e){return ve(e).then(e=>e.datastore)}async function vi(e){let t=await ve(e),r=t.eventManager;return r.onListen=g5.bind(null,t.syncEngine),r.onUnlisten=ye.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=g8.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=yt.bind(null,t.syncEngine),r}function vs(e,t,r={}){let n=new n3;return e.asyncQueue.enqueueAndForget(async()=>vo(await vi(e),e.asyncQueue,t,r,n)),n.promise}function va(e,t){let r=new n3;return e.asyncQueue.enqueueAndForget(async()=>yr(await vr(e),t,r)),r.promise}function vo(e,t,r,n,i){let s=new yZ({next:r=>{s.mute(),t.enqueueAndForget(()=>gB(e,a)),r.fromCache&&"server"===n.source?i.reject(new n2(n1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),a=new gW(r,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return gF(e,a)}function vl(e,t){return e.timeoutSeconds===t.timeoutSeconds}function vu(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let vc="ComponentProvider",vd=new Map;function vh(e){let t=vd.get(e);t&&(nH(vc,"Removing Datastore"),vd.delete(e),t.terminate())}function vf(e,t,r,n){return new az(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,vu(n.experimentalLongPollingOptions),n.useFetchStreams,n.isUsingEmulator)}let vp="firestore.googleapis.com",vm=!0,vg=5,vy=30,vv=!0;class vb{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new n2(n1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vp,this.ssl=vm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:vm;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ft;else{if(e.cacheSizeBytes!==fe&&e.cacheSizeBytes<fi)throw new n2(n1.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${fi}`);this.cacheSizeBytes=e.cacheSizeBytes}yV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=vv:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vu(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),v_(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&vl(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}function v_(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new n2(n1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<vg)throw new n2(n1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${vg})`);if(e.timeoutSeconds>vy)throw new n2(n1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${vy})`)}}class vS{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new n2(n1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new n2(n1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=ir(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,rt("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return vh(this),Promise.resolve()}}function vw(e,t,r,n={}){var i;e=yH(e,vS);let s=t4(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${r}`;a.host!==vp&&a.host!==l&&nZ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:n});if(!rg(u,o)&&(e._setSettings(u),s&&(t6(`https://${l}`),rt("Firestore",!0)),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=nV.MOCK_USER;else{t=t5(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new n2(n1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new nV(s)}e._authCredentials=new n5(new n4(t,r))}}class vT{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vT(this.firestore,e,this._query)}}class vE{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vE(this.firestore,e,this._key)}}class vC extends vT{constructor(e,t,r){super(e,t,lC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vE(this.firestore,null,new iE(e))}withConverter(e){return new vC(this.firestore,e,this._path)}}function vx(e,t,...r){if(e=rC(e),yU("collection","path",t),e instanceof vS){let n=iS.fromString(t,...r);return yq(n),new vC(e,null,n)}{if(!(e instanceof vE)&&!(e instanceof vC))throw new n2(n1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(iS.fromString(t,...r));return yq(n),new vC(e.firestore,null,n)}}function vI(e,t,...r){if(e=rC(e),1==arguments.length&&(t=io.newId()),yU("doc","path",t),e instanceof vS){let n=iS.fromString(t,...r);return yz(n),new vE(e,null,new iE(n))}{if(!(e instanceof vE)&&!(e instanceof vC))throw new n2(n1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(iS.fromString(t,...r));return yz(n),new vE(e.firestore,e instanceof vC?e.converter:null,new iE(n))}}let vk="AsyncQueue";class vR{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new mM(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new n3;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(iY(e))nH(vk,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,nG("INTERNAL UNHANDLED ERROR: ",vA(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let n=gR.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(n),n}verifyNotFailed(){this.failure&&nY(47125,{messageOrStack:vA(this.failure)})}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function vA(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class vN extends vS{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new vR,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vR(e),this._firestoreClient=void 0,await e}}}function vO(e,t){let r="object"==typeof e?e:np(),n="string"==typeof e?e:t||aq,i=nl(r,"firestore").getImmediate({identifier:n});if(!i._initialized){let e=t1("firestore");e&&vw(i,...e)}return i}function vD(e){if(e._terminated)throw new n2(n1.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vP(e),e._firestoreClient}function vP(e){var t,r,n;let i=e._freezeSettings(),s=vf(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);!e._componentsProvider&&(null===(r=i.localCache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=i.localCache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new y6(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&vM(e._componentsProvider))}function vM(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}function vL(e,t=!0){nq(nh),no(new rx("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new vN(new n8(e.getProvider("auth-internal")),new it(i,e.getProvider("app-check-internal")),aW(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),ng(nB,nU,e),ng(nB,nU,"esm2017")}class vj{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class vF{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vF(aI.fromBase64String(e))}catch(e){throw new n2(n1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vF(aI.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vB{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new n2(n1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new iT(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vU{constructor(e){this._methodName=e}}class vV{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new n2(n1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new n2(n1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return il(this._lat,e._lat)||il(this._long,e._long)}}class vz{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return pp(this._values,e._values)}}let vq=/^__.*__$/;class v${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uM(e,this.data,this.fieldMask,t,this.fieldTransforms):new uO(e,this.data,t,this.fieldTransforms)}}class vW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uM(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vK(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nY(40011,{dataSource:e})}}class vH{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new vH(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return bo(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(vK(this.dataSource)&&vq.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mA(e)}createContext(e,t,r,n=!1){return new vH({dataSource:e,methodName:t,targetDoc:r,path:iT.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vZ(e){let t=e._freezeSettings(),r=mA(e._databaseId);return new vG(e._databaseId,!!t.ignoreUndefinedProperties,r)}function vQ(e,t,r,n,i,s={}){let a,o;let l=e.createContext(s.merge||s.mergeFields?2:0,t,r,i);bn("Data must be an object, but it was:",l,n);let u=v8(n,l);if(s.merge)a=new aE(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=bi(t,n,r);if(!l.contains(i))throw new n2(n1.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);bl(e,i)||e.push(i)}a=new aE(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new v$(new oL(u),a,o)}class vY extends vU{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof vY}}function vX(e,t,r){return new vH({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class vJ extends vU{_toFieldTransform(e){return new u_(e.path,new ud)}isEqual(e){return e instanceof vJ}}class v0 extends vU{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=vX(this,e,!0),r=new uh(this._elements.map(e=>v5(e,t)));return new u_(e.path,r)}isEqual(e){return e instanceof v0&&rg(this._elements,e._elements)}}class v1 extends vU{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=vX(this,e,!0),r=new up(this._elements.map(e=>v5(e,t)));return new u_(e.path,r)}isEqual(e){return e instanceof v1&&rg(this._elements,e._elements)}}class v2 extends vU{constructor(e,t){super(e),this._operand=t}_toFieldTransform(e){let t=new ug(e.serializer,us(e.serializer,this._operand));return new u_(e.path,t)}isEqual(e){return e instanceof v2&&this._operand===e._operand}}function v3(e,t,r,n){let i=e.createContext(1,t,r);bn("Data must be an object, but it was:",i,n);let s=[],a=oL.empty();return ap(n,(e,n)=>{let o=ba(t,e,r);n=rC(n);let l=i.childContextForFieldPath(o);if(n instanceof vY)s.push(o);else{let e=v5(n,l);null!=e&&(s.push(o),a.set(o,e))}}),new vW(a,new aE(s),i.fieldTransforms)}function v4(e,t,r,n,i,s){let a=e.createContext(1,t,r),o=[bi(t,n,r)],l=[i];if(s.length%2!=0)throw new n2(n1.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(bi(t,s[e])),l.push(s[e+1]);let u=[],c=oL.empty();for(let e=o.length-1;e>=0;--e)if(!bl(u,o[e])){let t=o[e],r=l[e];r=rC(r);let n=a.childContextForFieldPath(t);if(r instanceof vY)u.push(t);else{let e=v5(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new vW(c,new aE(u),a.fieldTransforms)}function v6(e,t,r,n=!1){return v5(r,e.createContext(n?4:3,t))}function v5(e,t){if(br(e=rC(e)))return bn("Unsupported field value:",t,e),v8(e,t);if(e instanceof vU)return v7(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return be(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return v9(e,t)}function v8(e,t){let r={};return am(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ap(e,(e,n)=>{let i=v5(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function v9(e,t){let r=[],n=0;for(let i of e){let e=v5(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}function v7(e,t){if(!vK(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function be(e,t){if(null===(e=rC(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return us(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=iy.fromDate(e);return{timestampValue:cp(t.serializer,r)}}if(e instanceof iy){let r=new iy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cp(t.serializer,r)}}if(e instanceof vV)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof vF)return{bytesValue:cg(t.serializer,e._byteString)};else if(e instanceof vE){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:c_(e.firestore._databaseId||t.databaseId,e._key.path)}}else if(e instanceof vz)return bt(e,t);else throw t.createError(`Unsupported field value: ${yW(e)}`)}function bt(e,t){return{mapValue:{fields:{[aQ]:{stringValue:aJ},[a0]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return un(t.serializer,e)})}}}}}}function br(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof iy)&&!(e instanceof vV)&&!(e instanceof vF)&&!(e instanceof vE)&&!(e instanceof vU)&&!(e instanceof vz)}function bn(e,t,r){if(!br(r)||!y$(r)){let n=yW(r);if("an object"===n)throw t.createError(e+" a custom object");throw t.createError(e+" "+n)}}function bi(e,t,r){if((t=rC(t))instanceof vB)return t._internalPath;if("string"==typeof t)return ba(e,t);throw bo("Field path arguments must be of type string or ",e,!1,void 0,r)}let bs=RegExp("[~\\*/\\[\\]]");function ba(e,t,r){if(t.search(bs)>=0)throw bo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new vB(...t.split("."))._internalPath}catch(n){throw bo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function bo(e,t,r,n,i){let s=n&&!n.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new n2(n1.INVALID_ARGUMENT,o+e+l)}function bl(e,t){return e.some(e=>e.isEqual(t))}class bu{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new bc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bc extends bu{data(){return super.data()}}function bd(e,t){return"string"==typeof t?ba(e,t):t instanceof vB?t._internalPath:t._delegate._internalPath}function bh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new n2(n1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bf{}class bp extends bf{}function bm(e,t,...r){let n=[];for(let i of(t instanceof bf&&n.push(t),bP(n=n.concat(r)),n))e=i._apply(e);return e}class bg extends bp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bg(e,t,r)}_apply(e){let t=this._parse(e);return bN(e._query,t),new vT(e.firestore,e.converter,lM(e._query,t))}_parse(e){let t=vZ(e.firestore);return bE(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class by extends bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:oY.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(bO(e._query,t),new vT(e.firestore,e.converter,lM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bv extends bp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bv(e,t)}_apply(e){let t=bC(e._query,this._field,this._direction);return new vT(e.firestore,e.converter,lL(e._query,t))}}function bb(e,t="asc"){let r=t,n=bd("orderBy",e);return bv._create(n,r)}class b_ extends bp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new b_(e,t,r)}_apply(e){return new vT(e.firestore,e.converter,lj(e._query,this._limit,this._limitType))}}class bS extends bp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bS(e,t,r)}_apply(e){let t=bT(e,this.type,this._docOrFields,this._inclusive);return new vT(e.firestore,e.converter,lF(e._query,t))}}class bw extends bp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bw(e,t,r)}_apply(e){let t=bT(e,this.type,this._docOrFields,this._inclusive);return new vT(e.firestore,e.converter,lB(e._query,t))}}function bT(e,t,r,n){if(r[0]=rC(r[0]),r[0]instanceof bu)return bx(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=vZ(e.firestore);return bI(e._query,e.firestore._databaseId,i,t,r,n)}}function bE(e,t,r,n,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new n2(n1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){bR(a,s);let t=[];for(let r of a)t.push(bk(n,e,r));o={arrayValue:{values:t}}}else o=bk(n,e,a)}else("in"===s||"not-in"===s||"array-contains-any"===s)&&bR(a,s),o=v6(r,t,a,"in"===s||"not-in"===s);return oQ.create(i,s,o)}function bC(e,t,r){if(null!==e.startAt)throw new n2(n1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new n2(n1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oW(t,r)}function bx(e,t,r,n,i){if(!n)throw new n2(n1.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of lN(e))if(r.field.isKeyField())s.push(o_(t,n.key));else{let e=n.data.field(r.field);if(aF(e))throw new n2(n1.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new n2(n1.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new oU(s,i)}function bI(e,t,r,n,i,s){let a=e.explicitOrderBy;if(i.length>a.length)throw new n2(n1.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<i.length;s++){let l=i[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new n2(n1.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!lA(e)&&-1!==l.indexOf("/"))throw new n2(n1.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(iS.fromString(l));if(!iE.isDocumentKey(r))throw new n2(n1.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new iE(r);o.push(o_(t,i))}else{let e=v6(r,n,l);o.push(e)}}return new oU(o,s)}function bk(e,t,r){if("string"==typeof(r=rC(r))){if(""===r)throw new n2(n1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lA(t)&&-1!==r.indexOf("/"))throw new n2(n1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(iS.fromString(r));if(!iE.isDocumentKey(n))throw new n2(n1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return o_(e,new iE(n))}if(r instanceof vE)return o_(e,r._key);throw new n2(n1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yW(r)}.`)}function bR(e,t){if(!Array.isArray(e)||0===e.length)throw new n2(n1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bA(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function bN(e,t){let r=bD(e.filters,bA(t.op));if(null!==r){if(r===t.op)throw new n2(n1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);throw new n2(n1.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}}function bO(e,t){let r=e;for(let e of t.getFlattenedFilters())bN(r,e),r=lM(r,e)}function bD(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}function bP(e){let t=e.filter(e=>e instanceof by).length,r=e.filter(e=>e instanceof bg).length;if(t>1||t>0&&r>0)throw new n2(n1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}class bM{convertValue(e,t="none"){switch(a2(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aO(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aD(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nY(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ap(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new vz(null===(n=null===(r=null===(t=e.fields)||void 0===t?void 0:t[a0].arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.map(e=>aO(e.doubleValue)))}convertGeoPoint(e){return new vV(aO(e.latitude),aO(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=aU(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(aV(e));default:return null}}convertTimestamp(e){let t=aN(e);return new iy(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=iS.fromString(e);nJ(d_(r),9688,{name:e});let n=new a$(r.get(1),r.get(3)),i=new iE(r.popFirst(5));return n.isEqual(t)||nG(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function bL(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class bj extends bM{constructor(e){super(),this.firestore=e}convertBytes(e){return new vF(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vE(this.firestore,null,t)}}class bF{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bB extends bu{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new bU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bU extends bB{data(e={}){return super.data(e)}}class bV{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new bF(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bU(this._firestore,this._userDataWriter,r.key,r,new bF(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new n2(n1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=bz(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bz(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new bU(e._firestore,e._userDataWriter,r.doc.key,r.doc,new bF(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new bU(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:bq(t.type),doc:n,oldIndex:i,newIndex:s}})}}function bq(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nY(61501,{type:e})}}class b$ extends bM{constructor(e){super(),this.firestore=e}convertBytes(e){return new vF(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vE(this.firestore,null,t)}}function bW(e){e=yH(e,vT);let t=yH(e.firestore,vN),r=vD(t),n=new b$(t);return bh(e._query),vs(r,e._query).then(r=>new bV(t,n,e,r))}function bK(e,t,r,...n){let i;e=yH(e,vE);let s=yH(e.firestore,vN),a=vZ(s);return bG(s,[(i="string"==typeof(t=rC(t))||t instanceof vB?v4(a,"updateDoc",e._key,t,r,n):v3(a,"updateDoc",e._key,t)).toMutation(e._key,uE.exists(!0))])}function bH(e,t){let r=yH(e.firestore,vN),n=vI(e),i=bL(e.converter,t);return bG(r,[vQ(vZ(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,uE.exists(!1))]).then(()=>n)}function bG(e,t){return va(vD(e),t)}class bZ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=yj.provider,this._offlineComponentProvider={build:t=>new yL(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function bQ(e,t){if((e=rC(e)).firestore===t)return e;throw new n2(n1.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.")}function bY(){return new vJ("serverTimestamp")}function bX(...e){return new v0("arrayUnion",e)}new WeakMap;class bJ{constructor(){this.existenceFilterMismatchCallbacksById=new Map}static get instance(){return b0||u0(b0=new bJ),b0}notifyOnExistenceFilterMismatch(e){this.existenceFilterMismatchCallbacksById.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.existenceFilterMismatchCallbacksById;return r.set(t,e),()=>r.delete(t)}}let b0=null;vL("node");function b1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create;function b2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}Object.create,"function"==typeof SuppressedError&&SuppressedError;let b3=b2,b4=new rf("auth","Firebase",b2()),b6=new rj("@firebase/auth");function b5(e,...t){b6.logLevel<=m.WARN&&b6.warn(`Auth (${nh}): ${e}`,...t)}function b8(e,...t){b6.logLevel<=m.ERROR&&b6.error(`Auth (${nh}): ${e}`,...t)}function b9(e,...t){throw _r(e,...t)}function b7(e,...t){return _r(e,...t)}function _e(e,t,r){return new rf("auth","Firebase",Object.assign(Object.assign({},b3()),{[t]:r})).create(t,{appName:e.name})}function _t(e){return _e(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _r(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return b4.create(e,...t)}function _n(e,t,...r){if(!e)throw _r(t,...r)}function _i(e){let t="INTERNAL ASSERTION FAILED: "+e;throw b8(t),Error(t)}function _s(e,t){e||_i(t)}function _a(){return"http:"===_o()||"https:"===_o()}function _o(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function _l(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_a()||ra()||"connection"in navigator))||navigator.onLine}function _u(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}class _c{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=rn()||ro()}get(){return _l()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _d(e,t){_s(e.emulator,"Emulator should always be set here");let{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}class _h{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void _i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void _i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void _i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let _f={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_p=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_m=new _c(3e4,6e4);function _g(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _y(e,t,r,n,i={}){return _v(e,i,async()=>{let i={},s={};n&&("GET"===t?s=n:i={body:JSON.stringify(n)});let a=rv(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);let l=Object.assign({method:t,headers:o},i);return rs()||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&t4(e.emulatorConfig.host)&&(l.credentials="include"),_h.fetch()(await __(e,e.config.apiHost,r,a),l)})}async function _v(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},_f),t);try{let t=new _w(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw _T(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let[t,r]=(i.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw _T(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw _T(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw _T(e,"user-disabled",s);let a=n[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw _e(e,a,r);b9(e,a)}}catch(t){if(t instanceof rh)throw t;b9(e,"network-request-failed",{message:String(t)})}}async function _b(e,t,r,n,i={}){let s=await _y(e,t,r,n,i);return"mfaPendingCredential"in s&&b9(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function __(e,t,r,n){let i=`${t}${r}?${n}`,s=e,a=s.config.emulator?_d(e.config,i):`${e.config.apiScheme}://${i}`;return _p.includes(r)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())?s._getPersistence()._getFinalTarget(a).toString():a}function _S(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _w{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(b7(this.auth,"network-request-failed")),_m.get())})}}function _T(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=b7(e,t,n);return i.customData._tokenResponse=r,i}function _E(e){return void 0!==e&&void 0!==e.enterprise}class _C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _S(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _x(e,t){return _y(e,"GET","/v2/recaptchaConfig",_g(e,t))}async function _I(e,t){return _y(e,"POST","/v1/accounts:delete",t)}async function _k(e,t){return _y(e,"POST","/v1/accounts:lookup",t)}function _R(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function _A(e,t=!1){let r=rC(e),n=await r.getIdToken(t),i=_O(n);_n(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");let s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:_R(_N(i.auth_time)),issuedAtTime:_R(_N(i.iat)),expirationTime:_R(_N(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function _N(e){return 1e3*Number(e)}function _O(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return b8("JWT malformed, contained fewer than 3 sections"),null;try{let e=tG(r);if(!e)return b8("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return b8("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function _D(e){let t=_O(e);return _n(t,"internal-error"),_n(void 0!==t.exp,"internal-error"),_n(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function _P(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof rh&&_M(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function _M({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class _L{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _j{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_R(this.lastLoginAt),this.creationTime=_R(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _F(e){var t;let r=e.auth,n=await e.getIdToken(),i=await _P(e,_k(r,{idToken:n}));_n(null==i?void 0:i.users.length,r,"internal-error");let s=i.users[0];e._notifyReloadListener(s);let a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?_V(s.providerUserInfo):[],o=_U(e.providerData,a),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null==o?void 0:o.length),c=!!l&&u;Object.assign(e,{uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _j(s.createdAt,s.lastLoginAt),isAnonymous:c})}async function _B(e){let t=rC(e);await _F(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _U(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function _V(e){return e.map(e=>{var{providerId:t}=e,r=b1(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function _z(e,t){let r=await _v(e,{},async()=>{let r=rv({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,s=await __(e,n,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_h.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function _q(e,t){return _y(e,"POST","/v2/accounts:revokeToken",_g(e,t))}class _${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_n(e.idToken,"internal-error"),_n(void 0!==e.idToken,"internal-error"),_n(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):_D(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_n(0!==e.length,"internal-error");let t=_D(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(_n(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await _z(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new _$;return r&&(_n("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(_n("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(_n("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _$,this.toJSON())}_performRefresh(){return _i("not implemented")}}function _W(e,t){_n("string"==typeof e||void 0===e,"internal-error",{appName:t})}class _K{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=b1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _L(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _j(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await _P(this,this.stsTokenManager.getToken(this.auth,e));return _n(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _A(this,e)}reload(){return _B(this)}_assign(e){this!==e&&(_n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new _K(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _F(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nu(this.auth.app))return Promise.reject(_t(this.auth));let e=await this.getIdToken();return await _P(this,_I(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,a,o,l,u;let c=null!==(r=t.displayName)&&void 0!==r?r:void 0,d=null!==(n=t.email)&&void 0!==n?n:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:S,stsTokenManager:w}=t;_n(v&&w,e,"internal-error");let T=_$.fromJSON(this.name,w);_n("string"==typeof v,e,"internal-error"),_W(c,e.name),_W(d,e.name),_n("boolean"==typeof b,e,"internal-error"),_n("boolean"==typeof _,e,"internal-error"),_W(h,e.name),_W(f,e.name),_W(p,e.name),_W(m,e.name),_W(g,e.name),_W(y,e.name);let E=new _K({uid:v,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:_,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(E.providerData=S.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,r=!1){let n=new _$;n.updateFromServerResponse(t);let i=new _K({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await _F(i),i}static async _fromGetAccountInfoResponse(e,t,r){let n=t.users[0];_n(void 0!==n.localId,"internal-error");let i=void 0!==n.providerUserInfo?_V(n.providerUserInfo):[],s=!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length),a=new _$;a.updateFromIdToken(r);let o=new _K({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new _j(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null==i?void 0:i.length)}),o}}let _H=new Map;function _G(e){_s(e instanceof Function,"Expected a class definition");let t=_H.get(e);return t?_s(t instanceof e,"Instance stored in cache mismatched with class"):(t=new e,_H.set(e,t)),t}class _Z{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_Z.type="NONE";let _Q=_Z;function _Y(e,t,r){return`firebase:${e}:${t}:${r}`}class _X{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:n,name:i}=this.auth;this.fullUserKey=_Y(this.userKey,n.apiKey,i),this.fullPersistenceKey=_Y("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await _k(this.auth,{idToken:e}).catch(()=>void 0);return t?_K._fromGetAccountInfoResponse(this.auth,t,e):null}return _K._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new _X(_G(_Q),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||_G(_Q),s=_Y(r,e.config.apiKey,e.name),a=null;for(let r of t)try{let t=await r._get(s);if(t){let n;if("string"==typeof t){let r=await _k(e,{idToken:t}).catch(()=>void 0);if(!r)break;n=await _K._fromGetAccountInfoResponse(e,r,t)}else n=_K._fromJSON(e,t);r!==i&&(a=n),i=r;break}}catch(e){}let o=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length&&(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new _X(i,e,r)}}function _J(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_3(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(_0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_6(t))return"Blackberry";if(_5(t))return"Webos";if(_1(t))return"Safari";if((t.includes("chrome/")||_2(t))&&!t.includes("edge/"))return"Chrome";if(_4(t))return"Android";let r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function _0(e=rr()){return/firefox\//i.test(e)}function _1(e=rr()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _2(e=rr()){return/crios\//i.test(e)}function _3(e=rr()){return/iemobile/i.test(e)}function _4(e=rr()){return/android/i.test(e)}function _6(e=rr()){return/blackberry/i.test(e)}function _5(e=rr()){return/webos/i.test(e)}function _8(e,t=[]){let r;switch(e){case"Browser":r=_J(rr());break;case"Worker":r=`${_J(rr())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${nh}/${n}`}class _9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}async function _7(e,t={}){return _y(e,"GET","/v2/passwordPolicy",_g(e,t))}let Se=6;class St{constructor(e){var t,r,n,i;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:Se,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,i,s,a;let o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(r=o.meetsMaxPasswordLength)||void 0===r||r),o.isValid&&(o.isValid=null===(n=o.containsLowercaseLetter)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Sr{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Si(this),this.idTokenSubscription=new Si(this),this.beforeStateQueue=new _9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_G(t)),this._initializationPromise=this.queue(async()=>{var r,n,i;if(!this._deleted&&(this.persistenceManager=await _X.create(this,e),null===(r=this._resolvePersistenceManagerAvailable)||void 0===r||r.call(this),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await _k(this,{idToken:e}),r=await _K._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nu(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&(null==a?void 0:a.user)&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(_n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _F(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_u()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nu(this.app))return Promise.reject(_t(this));let t=e?rC(e):null;return t&&_n(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_n(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nu(this.app)?Promise.reject(_t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nu(this.app)?Promise.reject(_t(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_G(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new St(await _7(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await _q(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&_G(e)||this._popupRedirectResolver;_n(t,this,"argument-error"),this.redirectPersistenceManager=await _X.create(this,[_G(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_n(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){let i=e.addObserver(t,r,n);return()=>{s=!0,i()}}{let r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(nu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&b5(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Sn(e){return rC(e)}class Si{constructor(e){this.auth=e,this.observer=null,this.addObserver=rS(e=>this.observer=e)}get next(){return _n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ss={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sa(e){return Ss.loadJS(e)}function So(){return Ss.recaptchaEnterpriseScript}class Sl{constructor(){this.enterprise=new Su}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Su{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let Sc="recaptcha-enterprise",Sd="NO_RECAPTCHA";class Sh{constructor(e){this.type=Sc,this.auth=Sn(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{_x(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new _C(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let i=window.grecaptcha;_E(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r(Sd)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sl().execute("siteKey",{action:"verify"}):new Promise((e,i)=>{r(this.auth).then(r=>{if(!t&&_E(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window){i(Error("RecaptchaVerifier is only supported in browser"));return}let t=So();0!==t.length&&(t+=r),Sa(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Sf(e,t,r,n=!1,i=!1){let s;let a=new Sh(e);if(i)s=Sd;else try{s=await a.verify(r)}catch(e){s=await a.verify(r,!0)}let o=Object.assign({},t);if("mfaSmsEnrollment"===r||"mfaSmsSignIn"===r){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Sp(e,t,r,n,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s||!s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return n(e,t).catch(async i=>{if("auth/missing-recaptcha-token"!==i.code)return Promise.reject(i);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await Sf(e,t,r,"getOobCode"===r);return n(e,i)}});{let i=await Sf(e,t,r,"getOobCode"===r);return n(e,i)}}if("PHONE_PROVIDER"!==i)return Promise.reject(i+" provider is not supported.");if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){let i=await Sf(e,t,r);return n(e,i).catch(async i=>{var s;if((null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);let i=await Sf(e,t,r,!1,!0);return n(e,i)}return Promise.reject(i)})}{let i=await Sf(e,t,r,!1,!0);return n(e,i)}}function Sm(e,t){let r=nl(e,"auth");if(r.isInitialized()){let e=r.getImmediate();if(rg(r.getOptions(),null!=t?t:{}))return e;b9(e,"already-initialized")}return r.initialize({options:t})}function Sg(e,t){let r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(_G);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}function Sy(e,t,r){let n=Sn(e);_n(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=!!(null==r?void 0:r.disableWarnings),s=Sv(t),{host:a,port:o}=Sb(t),l=null===o?"":`:${o}`,u={url:`${s}//${a}${l}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){_n(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),_n(rg(u,n.config.emulator)&&rg(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,t4(a)?(rt("Auth",!0),t6(`${s}//${a}${l}`)):i||SS()}function Sv(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sb(e){let t=Sv(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:S_(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:S_(t)}}}function S_(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function SS(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}class Sw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function ST(e,t){return _y(e,"POST","/v1/accounts:signUp",t)}async function SE(e,t){return _b(e,"POST","/v1/accounts:signInWithPassword",_g(e,t))}async function SC(e,t){return _b(e,"POST","/v1/accounts:signInWithEmailLink",_g(e,t))}async function Sx(e,t){return _b(e,"POST","/v1/accounts:signInWithEmailLink",_g(e,t))}class SI extends Sw{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new SI(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new SI(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Sp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",SE,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SC(e,{email:this._email,oobCode:this._password});default:b9(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Sp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ST,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Sx(e,{idToken:t,email:this._email,oobCode:this._password});default:b9(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Sk(e,t){return _b(e,"POST","/v1/accounts:signInWithIdp",_g(e,t))}let SR="http://localhost";class SA extends Sw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new SA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):b9("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=b1(t,["providerId","signInMethod"]);if(!r||!n)return null;let s=new SA(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Sk(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Sk(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Sk(e,t)}buildRequest(){let e={requestUri:SR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rv(t)}return e}}async function SN(e,t){return _b(e,"POST","/v1/accounts:signInWithPhoneNumber",_g(e,t))}async function SO(e,t){let r=await _b(e,"POST","/v1/accounts:signInWithPhoneNumber",_g(e,t));if(r.temporaryProof)throw _T(e,"account-exists-with-different-credential",r);return r}let SD={USER_NOT_FOUND:"user-not-found"};async function SP(e,t){return _b(e,"POST","/v1/accounts:signInWithPhoneNumber",_g(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),SD)}class SM extends Sw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new SM({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new SM({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return SN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return SO(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return SP(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new SM({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}function SL(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sj(e){let t=rb(r_(e)).link,r=t?rb(r_(t)).deep_link_id:null,n=rb(r_(e)).deep_link_id;return(n?rb(r_(n)).link:null)||n||r||t||e}class SF{constructor(e){var t,r,n,i,s,a;let o=rb(r_(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(r=o.oobCode)&&void 0!==r?r:null,c=SL(null!==(n=o.mode)&&void 0!==n?n:null);_n(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){let t=Sj(e);try{return new SF(t)}catch(e){return null}}}class SB{constructor(){this.providerId=SB.PROVIDER_ID}static credential(e,t){return SI._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=SF.parseLink(t);return _n(r,"argument-error"),SI._fromEmailAndCode(e,r.code,r.tenantId)}}SB.PROVIDER_ID="password",SB.EMAIL_PASSWORD_SIGN_IN_METHOD="password",SB.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class SU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class SV extends SU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sz extends null{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return _n("providerId"in t&&"signInMethod"in t,"argument-error"),SA._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return _n(e.idToken||e.accessToken,"argument-error"),SA._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Sz.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Sz.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:i,nonce:s,providerId:a}=e;if(!r&&!n&&!t&&!i||!a)return null;try{return new Sz(a)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:i})}catch(e){return null}}}class Sq extends SV{constructor(){super("facebook.com")}static credential(e){return SA._fromParams({providerId:Sq.PROVIDER_ID,signInMethod:Sq.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sq.credentialFromTaggedObject(e)}static credentialFromError(e){return Sq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sq.credential(e.oauthAccessToken)}catch(e){return null}}}Sq.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sq.PROVIDER_ID="facebook.com";class S$ extends SV{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return SA._fromParams({providerId:S$.PROVIDER_ID,signInMethod:S$.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return S$.credentialFromTaggedObject(e)}static credentialFromError(e){return S$.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return S$.credential(t,r)}catch(e){return null}}}S$.GOOGLE_SIGN_IN_METHOD="google.com",S$.PROVIDER_ID="google.com";class SW extends SV{constructor(){super("github.com")}static credential(e){return SA._fromParams({providerId:SW.PROVIDER_ID,signInMethod:SW.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return SW.credentialFromTaggedObject(e)}static credentialFromError(e){return SW.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return SW.credential(e.oauthAccessToken)}catch(e){return null}}}SW.GITHUB_SIGN_IN_METHOD="github.com",SW.PROVIDER_ID="github.com";let SK="http://localhost";class SH extends Sw{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Sk(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Sk(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Sk(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let{providerId:t,signInMethod:r,pendingToken:n}="string"==typeof e?JSON.parse(e):e;return t&&r&&n&&t===r?new SH(t,n):null}static _create(e,t){return new SH(e,t)}buildRequest(){return{requestUri:SK,returnSecureToken:!0,pendingToken:this.pendingToken}}}let SG="saml.";class SZ extends SU{constructor(e){_n(e.startsWith(SG),"argument-error"),super(e)}static credentialFromResult(e){return SZ.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return SZ.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=SH.fromJSON(e);return _n(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return SH._create(r,t)}catch(e){return null}}}class SQ extends SV{constructor(){super("twitter.com")}static credential(e,t){return SA._fromParams({providerId:SQ.PROVIDER_ID,signInMethod:SQ.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return SQ.credentialFromTaggedObject(e)}static credentialFromError(e){return SQ.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return SQ.credential(t,r)}catch(e){return null}}}SQ.TWITTER_SIGN_IN_METHOD="twitter.com",SQ.PROVIDER_ID="twitter.com";class SY{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){return new SY({user:await _K._fromIdTokenResponse(e,r,n),providerId:SX(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new SY({user:e,providerId:SX(r),_tokenResponse:r,operationType:t})}}function SX(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class SJ extends rh{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,SJ.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new SJ(e,t,r,n)}}function S0(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw SJ._fromErrorAndOperation(e,r,t,n);throw r})}class S1{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?S2._fromServerResponse(e,t):"totpInfo"in t?S3._fromServerResponse(e,t):b9(e,"internal-error")}}class S2 extends S1{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new S2(t)}}class S3 extends S1{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new S3(t)}}class S4{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class S6 extends S4{constructor(e,t,r,n){super(e,t,r),this.username=n}}class S5{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new S5("enroll",e,t)}static _fromMfaPendingCredential(e){return new S5("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return S5._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return S5._fromIdtoken(e.multiFactorSession.idToken)}return null}}class S8{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){let r=Sn(e),n=t.customData._serverResponse,i=(n.mfaInfo||[]).map(e=>S1._fromServerResponse(r,e));_n(n.mfaPendingCredential,r,"internal-error");let s=S5._fromMfaPendingCredential(n.mfaPendingCredential);return new S8(s,i,async e=>{let i=await e._process(r,s);delete n.mfaInfo,delete n.mfaPendingCredential;let a=Object.assign(Object.assign({},n),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":let o=await SY._fromIdTokenResponse(r,t.operationType,a);return await r._updateCurrentUser(o.user),o;case"reauthenticate":return _n(t.user,r,"internal-error"),SY._forOperation(t.user,t.operationType,a);default:b9(r,"internal-error")}})}async resolveSignIn(e){let t=e;return this.signInResolver(t)}}function S9(e,t){return _y(e,"POST","/v2/accounts/mfaEnrollment:start",_g(e,t))}function S7(e,t){return _y(e,"POST","/v2/accounts/mfaEnrollment:finalize",_g(e,t))}function we(e,t){return _y(e,"POST","/v2/accounts/mfaEnrollment:withdraw",_g(e,t))}class wt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>S1._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new wt(e)}async getSession(){return S5._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let r=e,n=await this.getSession(),i=await _P(this.user,r._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,r=await this.user.getIdToken();try{let e=await _P(this.user,we(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}new WeakMap;var wr="@firebase/auth",wn="1.10.4";class wi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ws(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wa(e){no(new rx("auth",(t,{options:r})=>{let n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;_n(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});let l=new Sr(n,i,s,{apiKey:a,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_8(e)});return Sg(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),no(new rx("auth-internal",e=>new wi(Sn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ng(wr,wn,ws(e)),ng(wr,wn,"esm2017")}function wo(e=np()){let t=nl(e,"auth");if(t.isInitialized())return t.getImmediate();let r=Sm(e),n=t0("auth");return n&&Sy(r,`http://${n}`),r}function wl(e,t){return _y(e,"POST","/v2/accounts/mfaSignIn:finalize",_g(e,t))}_h.initialize(fetch,Headers,Response),wa("Node"),b7("operation-not-supported-in-this-environment"),Sr.prototype.setPersistence=async()=>{};class wu{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return _i("unexpected MultiFactorSessionType")}}}class wc{static assertionForEnrollment(e,t){return wd._fromSecret(e,t)}static assertionForSignIn(e,t){return wd._fromEnrollmentId(e,t)}static async generateSecret(e){var t;let r=e;_n(void 0!==(null===(t=r.user)||void 0===t?void 0:t.auth),"internal-error");let n=await S9(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return wh._fromStartTotpMfaEnrollmentResponse(n,r.user.auth)}}wc.FACTOR_ID="totp";class wd extends wu{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new wd(t,void 0,e)}static _fromEnrollmentId(e,t){return new wd(t,e)}async _finalizeEnroll(e,t,r){return _n(void 0!==this.secret,e,"argument-error"),S7(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){_n(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let r={verificationCode:this.otp};return wl(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class wh{constructor(e,t,r,n,i,s,a){this.sessionInfo=s,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=n,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new wh(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let n=!1;return(wf(e)||wf(t))&&(n=!0),n&&(wf(e)&&(e=(null===(r=this.auth.currentUser)||void 0===r?void 0:r.email)||"unknownuser"),wf(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function wf(e){return void 0===e||(null==e?void 0:e.length)===0}{console.log("\n\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log("--- Firebase Initialization Server Log (BEGIN) ---");let e=[{name:"NEXT_PUBLIC_FIREBASE_API_KEY",value:'"AIzaSyC5JpZqwtF2Lwfse5nfHIdFd0pApI0uNJ0",'},{name:"NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN",value:'"validated-e9c59.firebaseapp.com",'},{name:"NEXT_PUBLIC_FIREBASE_PROJECT_ID",value:'"validated-e9c59",'},{name:"NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET",value:'"validated-e9c59.appspot.com",'},{name:"NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID",value:"G-250FJ1LKC4"},{name:"NEXT_PUBLIC_FIREBASE_APP_ID",value:'"1:593839787455:web:040cda7bc391132534650a",'},{name:"NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID",value:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}],t=!0;e.forEach(e=>{let r="!!!!!!!! NOT SET or undefined !!!!!!!! -- THIS IS A MAJOR PROBLEM!";e.value&&""!==e.value.trim()?(r="NEXT_PUBLIC_FIREBASE_API_KEY"===e.name?`Present (Length: ${e.value.length})`:`Present (Value: ${e.value})`,console.log(`[Firebase Setup] ${e.name}: ${r}`)):(("NEXT_PUBLIC_FIREBASE_API_KEY"===e.name||"NEXT_PUBLIC_FIREBASE_PROJECT_ID"===e.name)&&(t=!1),console.error(`[Firebase Setup CRITICAL ERROR] ${e.name}: ${r}`))}),t?(console.log("[Firebase Setup] All critical Firebase environment variables (`API_KEY` and `PROJECT_ID`) seem to be present in `.env.local` and loaded by the server."),console.log('If "auth/invalid-api-key" error persists despite keys being present, carefully verify:'),console.log("1. The API key value in your `.env.local` EXACTLY matches the one in your Firebase console."),console.log("   (Project settings (gear icon) > General tab > Your apps > Web app > Firebase SDK snippet > `apiKey`)"),console.log("2. Firebase Authentication is ENABLED in your Firebase project (Build > Authentication > Get started)."),console.log("3. API Key Restrictions in Google Cloud Console:"),console.log("   - Go to Google Cloud Console > APIs & Services > Credentials."),console.log("   - Select the API key used by Firebase."),console.log('   - "Application restrictions": Try "None" for testing, or ensure `localhost:PORT` (your dev port) is allowed.'),console.log('   - "API restrictions": Ensure "Cloud Identity Platform API" (or "Identity Platform API") AND "Cloud Firestore API" are allowed.'),console.log("4. You have RESTARTED your Next.js development server after ANY .env.local or Firebase/GCP console changes.")):(console.error("\n[Firebase Setup CRITICAL FAILURE] `NEXT_PUBLIC_FIREBASE_API_KEY` or `NEXT_PUBLIC_FIREBASE_PROJECT_ID` (or both) are missing or undefined on the server!"),console.error("PLEASE CHECK THE FOLLOWING:"),console.error("1. Your `.env.local` file is in the project ROOT directory (same level as `package.json`)."),console.error("2. All `NEXT_PUBLIC_FIREBASE_...` variables are correctly named and have values in `.env.local`."),console.error("3. **YOU HAVE RESTARTED your Next.js development server (`npm run dev`) after creating or modifying `.env.local`.**"),console.error("------------------------------------------")),console.log("--- Firebase Initialization Server Log (END) ---"),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\n")}let wp={apiKey:'"AIzaSyC5JpZqwtF2Lwfse5nfHIdFd0pApI0uNJ0",',authDomain:'"validated-e9c59.firebaseapp.com",',projectId:'"validated-e9c59",',storageBucket:'"validated-e9c59.appspot.com",',messagingSenderId:"G-250FJ1LKC4",appId:'"1:593839787455:web:040cda7bc391132534650a",',measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};if(!wp.apiKey||!wp.projectId){let e="PRESENT (Length: 42)",t='PRESENT (Value: "validated-e9c59",)',r=`!!!!!!!!!!!!!!!!!!!! STOP! SERVER RESTART IS MANDATORY IF \`.env.local\` WAS MODIFIED. !!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!! STOP! SERVER RESTART IS MANDATORY IF \`.env.local\` WAS MODIFIED. !!!!!!!!!!!!!!!!!!!!

CRITICAL FIREBASE CONFIGURATION ERROR:
  NEXT_PUBLIC_FIREBASE_API_KEY Status: [${e}]
  NEXT_PUBLIC_FIREBASE_PROJECT_ID Status: [${t}]

One or both of these critical Firebase environment variables were UNDEFINED when the server tried to start. 
This means your \`.env.local\` file is likely:
  1. MISSING from the project root (it must be at the same level as package.json).
  2. INCORRECTLY NAMED (must be exactly \`.env.local\` - with a leading dot, all lowercase).
  3. Contains incorrect VARIABLE NAMES (they MUST start with \`NEXT_PUBLIC_FIREBASE_...\` and be spelled correctly).
  4. Or, your Next.js server was NOT RESTARTED after creating or modifying \`.env.local\` (THIS IS THE MOST LIKELY ISSUE AND IS ABSOLUTELY ESSENTIAL!).

Firebase cannot be initialized. 
ACTION: PLEASE CHECK YOUR \`.env.local\` SETUP METICULOUSLY AND THEN **RESTART THE SERVER (\`npm run dev\`)**.
Refer to the 'Firebase Initialization Server Log' printed earlier in your server console for a full status of all Firebase environment variables.
Verify values copied from Firebase Console: Project Settings > General > Your Apps > Web app > Firebase SDK snippet (Config).
!!!!!!!!!!!!!!!!!!!! MAKE SURE YOU HAVE RESTARTED YOUR SERVER AFTER ANY \`.env.local\` CHANGES! !!!!!!!!!!!!!!!!!!!!`;throw console.error("\n\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.error("!!!!!!!!!!!!!!!!!!!!  CRITICAL FIREBASE CONFIGURATION ERROR   !!!!!!!!!!!!!!!!!!!!"),console.error(r),console.error("This error was thrown from 'src/lib/firebase.ts' because essential Firebase configuration was not found by the server."),console.error("THE MOST COMMON FIX IS TO ENSURE `.env.local` IS CORRECT AND THEN **RESTART YOUR `npm run dev` SERVER**."),console.error("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\n"),Error(r)}async function wm(e,t){let r={ideaText:t.get("ideaText")},n=tj.safeParse(r);if(!n.success)return{message:"Failed to submit idea.",issues:n.error.flatten().fieldErrors.ideaText,success:!1};try{let e={text:n.data.ideaText,submittedAt:bY(),author:"Anonymous User",feedback:[]};return await bH(vx(o,"ideas"),e),(0,tB.revalidatePath)("/"),{message:"Idea submitted successfully!",success:!0}}catch(e){return console.error("Error submitting idea to Firestore:",e),{message:"Database error: Failed to submit idea.",success:!1}}}async function wg(){try{let e=vx(o,"ideas"),t=bm(e,bb("submittedAt","desc"));return(await bW(t)).docs.map(e=>{let t=e.data(),r=(t.feedback||[]).map(e=>({...e,submittedAt:e.submittedAt instanceof iy?e.submittedAt.toDate():new Date(e.submittedAt)}));return{id:e.id,text:t.text,submittedAt:t.submittedAt instanceof iy?t.submittedAt.toDate():new Date(t.submittedAt),author:t.author,feedback:r}})}catch(e){return console.error("Error fetching ideas from Firestore:",e),[]}}async function wy(e,t){let r={feedbackText:t.get("feedbackText"),ideaId:t.get("ideaId")},n=tF.safeParse(r);if(!n.success)return{message:"Failed to submit feedback.",issues:n.error.flatten().fieldErrors.feedbackText,success:!1};let i=new Date,s={id:crypto.randomUUID(),ideaId:n.data.ideaId,text:n.data.feedbackText,submittedAt:i,author:"Anonymous Feedbacker"};try{let e=vI(o,"ideas",s.ideaId),t={...s,submittedAt:iy.fromDate(i)};return await bK(e,{feedback:bX(t)}),(0,tB.revalidatePath)("/"),{success:!0,message:"Feedback submitted successfully!",feedbackItem:s}}catch(t){console.error("Error adding feedback to Firestore:",t);let e="Database error: Failed to submit feedback.";return t instanceof Error&&t.message.includes("No document to update")&&(e="Error: Idea not found. Could not submit feedback."),{success:!1,message:e}}}o=vO(a=nm().length?nm()[0]:nf(wp)),l=wo(a),(0,r(7989).h)([wm,wg,wy]),(0,_.j)(wm,"47692f7aecfe96bfd22fffaee0058261159f9fce",null),(0,_.j)(wg,"a40a0e9a17a5cdb6c8065dd156d779a13262beae",null),(0,_.j)(wy,"94cf6efeb22de6a742509fb9347d9468b1ff89cf",null)},7973:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>d,metadata:()=>h});var i=r(9351),s=r(2504),a=r.n(s),o=r(5049),l=r.n(o);r(5023);var u=r(8617),c=e([u]);u=(c.then?(await c)():c)[0];let h={title:"Validated - Validate Your Business Ideas",description:"Submit your business ideas, get feedback, and find real paying users for beta testing for your new venture."};function d({children:e}){return(0,i.jsx)("html",{lang:"en",children:(0,i.jsxs)("body",{className:`${a().variable} ${l().variable} antialiased`,children:[e,(0,i.jsx)(u.x,{})]})})}n()}catch(e){n(e)}})},3455:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>d});var i=r(9351),s=r(1870),a=r(6915),o=r(6840),l=r(532),u=r(9715),c=e([s,a,o,l,u]);function d(){return(0,i.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,i.jsx)(s.t,{}),(0,i.jsxs)("main",{className:"flex-grow",children:[(0,i.jsxs)("section",{id:"submit-idea",className:"relative py-16 md:py-24 bg-gradient-to-br from-primary/30 via-background to-background flex items-center justify-center min-h-[calc(100vh-4rem)] px-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234DB6AC' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}}),(0,i.jsxs)("div",{className:"container mx-auto flex flex-col lg:flex-row items-center justify-center gap-12 z-10",children:[(0,i.jsxs)("div",{className:"lg:w-1/2 text-center lg:text-left",children:[(0,i.jsxs)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight text-foreground mb-6",children:["Launch Your Next ",(0,i.jsx)("span",{className:"text-primary",children:"Big Idea"})]}),(0,i.jsx)("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-xl mx-auto lg:mx-0",children:"Validated helps you truly validate your business concepts. The ultimate test: will people actually pay for your idea? Connect with real paying users for beta testing and get the feedback that truly matters."}),(0,i.jsxs)("div",{className:"flex gap-4 justify-center lg:justify-start",children:[(0,i.jsx)("a",{href:"#view-feedback",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-primary-foreground bg-primary hover:bg-primary/90 shadow-md transition-transform hover:scale-105",children:"Explore Ideas"}),(0,i.jsx)("a",{href:"#find-testers",className:"inline-flex items-center justify-center px-6 py-3 border border-primary text-base font-medium rounded-md text-primary bg-background hover:bg-primary/10 shadow-md transition-transform hover:scale-105",children:"Find Testers"})]})]}),(0,i.jsx)("div",{className:"lg:w-1/2 flex justify-center",children:(0,i.jsx)(a.z,{})})]})]}),(0,i.jsx)(u.Z,{className:"my-16 md:my-24"}),(0,i.jsx)("section",{id:"view-feedback",className:"py-16 md:py-24 px-4",children:(0,i.jsx)("div",{className:"container mx-auto",children:(0,i.jsx)(o.t,{})})}),(0,i.jsx)(u.Z,{className:"my-16 md:my-24"}),(0,i.jsx)("section",{id:"find-testers",className:"py-16 md:py-24 bg-secondary/30 px-4",children:(0,i.jsx)("div",{className:"container mx-auto",children:(0,i.jsx)(l.b,{})})})]}),(0,i.jsx)("footer",{className:"py-8 bg-primary text-primary-foreground text-center",children:(0,i.jsxs)("div",{className:"container mx-auto px-4",children:[(0,i.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Validated. All rights reserved."]}),(0,i.jsx)("p",{className:"text-sm opacity-80 mt-1",children:"Validate if people will pay. Take flight."})]})})]})}[s,a,o,l,u]=c.then?(await c)():c,n()}catch(e){n(e)}})},1870:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{t:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/app-header.tsx`)).AppHeader;n()}catch(e){n(e)}},1)},6840:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{t:()=>u});var i=r(9351),s=r(5852),a=r(795),o=r(9536),l=e([a]);async function u(){let e=await (0,s.getIdeasAction)();return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"text-center mb-12",children:[(0,i.jsx)(o.Z,{className:"h-16 w-16 text-primary mx-auto mb-4"}),(0,i.jsx)("h2",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl",children:"Community Idea Board"}),(0,i.jsx)("p",{className:"mt-4 text-xl text-muted-foreground max-w-2xl mx-auto",children:"Explore innovative ideas shared by our community. Offer your insights and help shape the future!"})]}),0===e.length?(0,i.jsx)("div",{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-xl text-muted-foreground",children:"No ideas submitted yet. Be the first to share!"})}):(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,i.jsx)(a.r,{idea:e},e.id))})]})}a=(l.then?(await l)():l)[0],n()}catch(e){n(e)}})},795:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{r:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/idea-card.tsx`)).IdeaCard;n()}catch(e){n(e)}},1)},6915:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{z:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/submit-idea-form.tsx`)).SubmitIdeaForm;n()}catch(e){n(e)}},1)},532:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{b:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/tester-resources.tsx`)).TesterResources;n()}catch(e){n(e)}},1)},9715:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{Z:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/ui/separator.tsx`)).Separator;n()}catch(e){n(e)}},1)},8617:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{x:()=>e});var i=r(1851);let e=(await (0,i.createProxy)(String.raw`/home/user/studio/src/components/ui/toaster.tsx`)).Toaster;n()}catch(e){n(e)}},1)},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(771);let i=e=>{let t={type:"image/x-icon",sizes:"16x16"},r=(0,n.fillMetadataSegment)(".",e.params,"favicon.ico");return[{...t,url:r+""}]}},5023:()=>{},5710:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},a={};function o(e,t){var r,n,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(n=a[e]))?n:(r=u(e,0,!0),i&&(a[e]=r),r):(e|=0,(i=-128<=e&&e<128)&&(n=s[e]))?n:(r=u(e,e<0?-1:0,!1),i&&(s[e]=r),r)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=p)return T}else{if(e<=-m)return E;if(e+1>=m)return w}return e<0?l(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var n,i=l(c(r,8)),s=y,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+o),r);if(o<8){var h=l(c(r,o));s=s.mul(h).add(l(u))}else s=(s=s.mul(i)).add(l(u))}return s.unsigned=t,s}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var f=0x100000000,p=0xffffffffffffffff,m=0x8000000000000000,g=o(0x1000000),y=o(0);r.ZERO=y;var v=o(0,!0);r.UZERO=v;var b=o(1);r.ONE=b;var _=o(1,!0);r.UONE=_;var S=o(-1);r.NEG_ONE=S;var w=u(-1,0x7fffffff,!1);r.MAX_VALUE=w;var T=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var E=u(0,-0x80000000,!1);r.MIN_VALUE=E;var C=r.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(E))return"-"+this.neg().toString(e);var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=l(c(e,6),this.unsigned),s=this,a="";;){var o=s.div(i),u=(s.sub(o.mul(i)).toInt()>>>0).toString(e);if((s=o).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},C.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return(1&this.low)==1},C.isEven=function(){return(1&this.low)==0},C.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return 0>this.comp(e)},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return 0>=this.comp(e)},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(b)},C.neg=C.negate,C.add=function(e){n(e)||(e=h(e));var t,r,i=this.high>>>16,s=65535&this.high,a=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,m=0;return t=0+((r=0+(o+f))>>>16),r&=65535,t+=a+d,m+=t>>>16,t&=65535,m+=s+c,p+=m>>>16,m&=65535,p+=i+l,u(t<<16|r,(p&=65535)<<16|m,this.unsigned)},C.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(E))return e.isOdd()?E:y;if(e.eq(E))return this.isOdd()?E:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var r,i,s=this.high>>>16,a=65535&this.high,o=this.low>>>16,c=65535&this.low,d=e.high>>>16,f=65535&e.high,p=e.low>>>16,m=65535&e.low,b=0,_=0;return r=0+((i=0+c*m)>>>16),i&=65535,r+=o*m,_+=r>>>16,r&=65535,r+=c*p,_+=r>>>16,r&=65535,_+=a*m,b+=_>>>16,_&=65535,_+=o*p,b+=_>>>16,_&=65535,_+=c*f,b+=_>>>16,_&=65535,b+=s*m+a*p+o*f+c*d,u(r<<16|i,(b&=65535)<<16|_,this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");if(t){var r,i,s;return this.unsigned||-0x80000000!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return _;s=v}else{if(this.eq(E))return e.eq(b)||e.eq(S)?E:e.eq(E)?b:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:S:(i=this.sub(e.mul(r)),s=r.add(i.div(e)));if(e.eq(E))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(i=this;i.gte(e);){for(var a=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),o=a<=48?1:c(2,a-48),d=l(r),f=d.mul(e);f.isNegative()||f.gt(i);)r-=o,f=(d=l(r,this.unsigned)).mul(e);d.isZero()&&(d=b),s=s.add(d),i=i.sub(f)}return s},C.div=C.divide,C.modulo=function(e){return(n(e)||(e=h(e)),t)?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return n(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return n(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return n(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):32===e?u(this.high,0,this.unsigned):u(this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?fromBigInt(e,t):h(e,t)},C.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r,"default"in e?e.default:e}({});void 0!==(r=(function(){return n}).apply(t,[]))&&(e.exports=r)},4064:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var n=r(4723);let i=(e,t,r)=>{if(e&&"reportValidity"in e){let i=(0,n.U2)(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},s=(e,t)=>{for(let r in t.fields){let n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?i(n.ref,r,e):n&&n.refs&&n.refs.forEach(t=>i(t,r,e))}},a=(e,t)=>{t.shouldUseNativeValidation&&s(e,t);let r={};for(let i in e){let s=(0,n.U2)(t.fields,i),a=Object.assign(e[i]||{},{ref:s&&s.ref});if(o(t.names||Object.keys(e),i)){let e=Object.assign({},(0,n.U2)(r,i));(0,n.t8)(e,"root",a),(0,n.t8)(r,i,e)}else(0,n.t8)(r,i,a)}return r},o=(e,t)=>{let r=l(t);return e.some(e=>l(e).match(`^${r}\\.\\d+`))};function l(e){return e.replace(/\]|\[/g,"")}function u(e,t){for(var r={};e.length;){var i=e[0],s=i.code,a=i.message,o=i.path.join(".");if(!r[o]){if("unionErrors"in i){var l=i.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:s}}if("unionErrors"in i&&i.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var u=r[o].types,c=u&&u[i.code];r[o]=(0,n.KN)(o,t,r,s,c?[].concat(c,i.message):i.message)}e.shift()}return r}function c(e,t,r){return void 0===r&&(r={}),function(n,i,o){try{return Promise.resolve(function(i,a){try{var l=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then(function(e){return o.shouldUseNativeValidation&&s({},o),{errors:{},values:r.raw?Object.assign({},n):e}})}catch(e){return a(e)}return l&&l.then?l.then(void 0,a):l}(0,function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:a(u(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(e){return Promise.reject(e)}}}},4961:(e,t,r)=>{"use strict";r.d(t,{x8:()=>tk,VY:()=>tC,dk:()=>tI,aV:()=>tE,h_:()=>tT,fC:()=>tS,Dx:()=>tx,xz:()=>tw});var n,i=r(7266),s=r(2561),a=r(8051),o=r(3095),l=r(8957),u=r(2067),c=r(825),d=r(5226),h=r(6196),f=r(8819),p="focusScope.autoFocusOnMount",m="focusScope.autoFocusOnUnmount",g={bubbles:!1,cancelable:!0},y="FocusScope",v=i.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=e,[u,c]=i.useState(null),y=(0,h.W)(s),v=(0,h.W)(o),w=i.useRef(null),T=(0,a.e)(t,e=>c(e)),E=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(n){let e=function(e){if(E.paused||!u)return;let t=e.target;u.contains(t)?w.current=t:C(w.current,{select:!0})},t=function(e){if(E.paused||!u)return;let t=e.relatedTarget;null===t||u.contains(t)||C(w.current,{select:!0})},r=function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&C(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(r);return u&&n.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,u,E.paused]),i.useEffect(()=>{if(u){x.add(E);let e=document.activeElement;if(!u.contains(e)){let t=new CustomEvent(p,g);u.addEventListener(p,y),u.dispatchEvent(t),t.defaultPrevented||(b(R(S(u)),{select:!0}),document.activeElement===e&&C(u))}return()=>{u.removeEventListener(p,y),setTimeout(()=>{let t=new CustomEvent(m,g);u.addEventListener(m,v),u.dispatchEvent(t),t.defaultPrevented||C(e??document.body,{select:!0}),u.removeEventListener(m,v),x.remove(E)},0)}}},[u,y,v,E]);let I=i.useCallback(e=>{if(!r&&!n||E.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[n,s]=_(t);n&&s?e.shiftKey||i!==s?e.shiftKey&&i===n&&(e.preventDefault(),r&&C(s,{select:!0})):(e.preventDefault(),r&&C(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,E.paused]);return(0,f.jsx)(d.WV.div,{tabIndex:-1,...l,ref:T,onKeyDown:I})});function b(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(C(n,{select:t}),document.activeElement!==r)return}function _(e){let t=S(e);return[w(t,e),w(t.reverse(),e)]}function S(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function w(e,t){for(let r of e)if(!T(r,{upTo:t}))return r}function T(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function E(e){return e instanceof HTMLInputElement&&"select"in e}function C(e,{select:t=!1}={}){if(e&&e.focus){let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&E(e)&&t&&e.select()}}v.displayName=y;var x=I();function I(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=k(e,t)).unshift(t)},remove(t){e=k(e,t),e[0]?.resume()}}}function k(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}function R(e){return e.filter(e=>"A"!==e.tagName)}var A=r(3078),N=r(9815),O=0;function D(){i.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??P()),document.body.insertAdjacentElement("beforeend",e[1]??P()),O++,()=>{1===O&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),O--}},[])}function P(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var M=function(){return(M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function L(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create;function j(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;var F=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),B="width-before-scroll-bar",U="with-scroll-bars-hidden",V="--removed-body-scroll-bar-size";function z(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}function q(e,t){var r=(0,i.useState)(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(value){var n=r.value;n!==value&&(r.value=value,r.callback(value,n))}}}})[0];return r.callback=t,r.facade}var $="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,W=new WeakMap;function K(e,t){var r=q(t||null,function(t){return e.forEach(function(e){return z(e,t)})});return $(function(){var t=W.get(r);if(t){var n=new Set(t),i=new Set(e),s=r.current;n.forEach(function(e){i.has(e)||z(e,null)}),i.forEach(function(e){n.has(e)||z(e,s)})}W.set(r,e)},[e]),r}function H(e){return e}function G(e,t){void 0===t&&(t=H);var r=[],n=!1;return{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),r={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),r}}}}}var Z=function(e){void 0===e&&(e={});var t=G(null);return t.options=M({async:!0,ssr:!1},e),t}(),Q=function(){},Y=i.forwardRef(function(e,t){var r=i.useRef(null),n=i.useState({onScrollCapture:Q,onWheelCapture:Q,onTouchMoveCapture:Q}),s=n[0],a=n[1],o=e.forwardProps,l=e.children,u=e.className,c=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,b=e.gapMode,_=L(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,w=K([r,t]),T=M(M({},_),s);return i.createElement(i.Fragment,null,d&&i.createElement(S,{sideCar:Z,removeScrollBar:c,shards:h,noIsolation:p,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:b}),o?i.cloneElement(i.Children.only(l),M(M({},T),{ref:w})):i.createElement(v,M({},T,{className:u,ref:w}),l))});Y.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Y.classNames={fullWidth:B,zeroRight:F};var X=function(e){var t=e.sideCar,r=L(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return i.createElement(n,M({},r))};function J(e,t){return e.useMedium(t),X}X.isSideCarExport=!0;var ee=function(){return n||r.nc};function et(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ee();return t&&e.setAttribute("nonce",t),e}function er(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function en(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}var ei=function(){var e=0,t=null;return{add:function(r){0==e&&(t=et())&&(er(t,r),en(t)),e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},es=function(){var e=ei();return function(t,r){i.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ea=function(){var e=es();return function(t){return e(t.styles,t.dynamic),null}},eo={left:0,top:0,right:0,gap:0},el=function(e){return parseInt(e||"",10)||0},eu=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[el(r),el(n),el(i)]},ec=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return eo;var t=eu(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},ed=ea(),eh="data-scroll-locked",ef=function(e,t,r,n){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat(U," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(eh,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(F," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(B," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(F," .").concat(F," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(B," .").concat(B," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(eh,"] {\n    ").concat(V,": ").concat(o,"px;\n  }\n")},ep=function(){var e=parseInt(document.body.getAttribute(eh)||"0",10);return isFinite(e)?e:0},em=function(){i.useEffect(function(){return document.body.setAttribute(eh,(ep()+1).toString()),function(){var e=ep()-1;e<=0?document.body.removeAttribute(eh):document.body.setAttribute(eh,e.toString())}},[])},eg=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=void 0===n?"margin":n;em();var a=i.useMemo(function(){return ec(s)},[s]);return i.createElement(ed,{styles:ef(a,!t,s,r?"":"!important")})},ey=!1;if("undefined"!=typeof window)try{var ev=Object.defineProperty({},"passive",{get:function(){return ey=!0,!0}});window.addEventListener("test",ev,ev),window.removeEventListener("test",ev,ev)}catch(e){ey=!1}var eb=!!ey&&{passive:!1},e_=function(e){return"TEXTAREA"===e.tagName},eS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!e_(e)&&"visible"===r[t])},ew=function(e){return eS(e,"overflowY")},eT=function(e){return eS(e,"overflowX")},eE=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),eI(e,n)){var i=ek(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},eC=function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]},ex=function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]},eI=function(e,t){return"v"===e?ew(t):eT(t)},ek=function(e,t){return"v"===e?eC(t):ex(t)},eR=function(e,t){return"h"===e&&"rtl"===t?-1:1},eA=function(e,t,r,n,i){var s=eR(e,window.getComputedStyle(t).direction),a=s*n,o=r.target,l=t.contains(o),u=!1,c=a>0,d=0,h=0;do{var f=ek(e,o),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&eI(e,o)&&(d+=m,h+=p),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return c&&(i&&1>Math.abs(d)||!i&&a>d)?u=!0:!c&&(i&&1>Math.abs(h)||!i&&-a>h)&&(u=!0),u},eN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eO=function(e){return[e.deltaX,e.deltaY]},eD=function(e){return e&&"current"in e?e.current:e},eP=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eM=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},eL=0,ej=[];function eF(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}let eB=J(Z,function(e){var t=i.useRef([]),r=i.useRef([0,0]),n=i.useRef(),s=i.useState(eL++)[0],a=i.useState(ea)[0],o=i.useRef(e);i.useEffect(function(){o.current=e},[e]),i.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=j([e.lockRef.current],(e.shards||[]).map(eD),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=i.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,s=eN(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-s[0],u="deltaY"in e?e.deltaY:a[1]-s[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var h=eE(d,c);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=eE(d,c)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||u)&&(n.current=i),!i)return!0;var f=n.current||i;return eA(f,t,e,"h"===f?l:u,!0)},[]),u=i.useCallback(function(e){var r=e;if(ej.length&&ej[ej.length-1]===a){var n="deltaY"in r?eO(r):eN(r),i=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&eP(e.delta,n)})[0];if(i&&i.should){r.cancelable&&r.preventDefault();return}if(!i){var s=(o.current.shards||[]).map(eD).filter(Boolean).filter(function(e){return e.contains(r.target)});(s.length>0?l(r,s[0]):!o.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),c=i.useCallback(function(e,r,n,i){var s={name:e,delta:r,target:n,should:i,shadowParent:eF(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=i.useCallback(function(e){r.current=eN(e),n.current=void 0},[]),h=i.useCallback(function(t){c(t.type,eO(t),t.target,l(t,e.lockRef.current))},[]),f=i.useCallback(function(t){c(t.type,eN(t),t.target,l(t,e.lockRef.current))},[]);i.useEffect(function(){return ej.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",u,eb),document.addEventListener("touchmove",u,eb),document.addEventListener("touchstart",d,eb),function(){ej=ej.filter(function(e){return e!==a}),document.removeEventListener("wheel",u,eb),document.removeEventListener("touchmove",u,eb),document.removeEventListener("touchstart",d,eb)}},[]);var p=e.removeScrollBar,m=e.inert;return i.createElement(i.Fragment,null,m?i.createElement(a,{styles:eM(s)}):null,p?i.createElement(eg,{gapMode:e.gapMode}):null)});var eU=i.forwardRef(function(e,t){return i.createElement(Y,M({},e,{ref:t,sideCar:eB}))});eU.classNames=Y.classNames;let eV=eU;var ez=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},eq=new WeakMap,e$=new WeakMap,eW={},eK=0,eH=function(e){return e&&(e.host||eH(e.parentNode))},eG=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=eH(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return!!e})},eZ=function(e,t,r,n){var i=eG(t,Array.isArray(e)?e:[e]);eW[r]||(eW[r]=new WeakMap);var s=eW[r],a=[],o=new Set,l=new Set(i),u=function(e){!e||o.has(e)||(o.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))c(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(eq.get(e)||0)+1,u=(s.get(e)||0)+1;eq.set(e,l),s.set(e,u),a.push(e),1===l&&i&&e$.set(e,!0),1===u&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),o.clear(),eK++,function(){a.forEach(function(e){var t=eq.get(e)-1,i=s.get(e)-1;eq.set(e,t),s.set(e,i),t||(e$.has(e)||e.removeAttribute(n),e$.delete(e)),i||e.removeAttribute(r)}),--eK||(eq=new WeakMap,eq=new WeakMap,e$=new WeakMap,eW={})}},eQ=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||ez(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),eZ(n,i,r,"aria-hidden")):function(){return null}},eY=r(4214),eX="Dialog",[eJ,e0]=(0,o.b)(eX),[e1,e2]=eJ(eX),e3=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,c=i.useRef(null),d=i.useRef(null),[h=!1,p]=(0,u.T)({prop:n,defaultProp:s,onChange:a});return(0,f.jsx)(e1,{scope:t,triggerRef:c,contentRef:d,contentId:(0,l.M)(),titleId:(0,l.M)(),descriptionId:(0,l.M)(),open:h,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(e=>!e),[p]),modal:o,children:r})};e3.displayName=eX;var e4="DialogTrigger",e6=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e2(e4,r),o=(0,a.e)(t,i.triggerRef);return(0,f.jsx)(d.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tp(i.open),...n,ref:o,onClick:(0,s.M)(e.onClick,i.onOpenToggle)})});e6.displayName=e4;var e5="DialogPortal",[e8,e9]=eJ(e5,{forceMount:void 0}),e7=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=e2(e5,t);return(0,f.jsx)(e8,{scope:t,forceMount:r,children:i.Children.map(n,e=>(0,f.jsx)(N.z,{present:r||a.open,children:(0,f.jsx)(A.h,{asChild:!0,container:s,children:e})}))})};e7.displayName=e5;var te="DialogOverlay",tt=i.forwardRef((e,t)=>{let r=e9(te,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=e2(te,e.__scopeDialog);return s.modal?(0,f.jsx)(N.z,{present:n||s.open,children:(0,f.jsx)(tr,{...i,ref:t})}):null});tt.displayName=te;var tr=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e2(te,r);return(0,f.jsx)(eV,{as:eY.g7,allowPinchZoom:!0,shards:[i.contentRef],children:(0,f.jsx)(d.WV.div,{"data-state":tp(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),tn="DialogContent",ti=i.forwardRef((e,t)=>{let r=e9(tn,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=e2(tn,e.__scopeDialog);return(0,f.jsx)(N.z,{present:n||s.open,children:s.modal?(0,f.jsx)(ts,{...i,ref:t}):(0,f.jsx)(ta,{...i,ref:t})})});ti.displayName=tn;var ts=i.forwardRef((e,t)=>{let r=e2(tn,e.__scopeDialog),n=i.useRef(null),o=(0,a.e)(t,r.contentRef,n);return i.useEffect(()=>{let e=n.current;if(e)return eQ(e)},[]),(0,f.jsx)(to,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,s.M)(e.onFocusOutside,e=>e.preventDefault())})}),ta=i.forwardRef((e,t)=>{let r=e2(tn,e.__scopeDialog),n=i.useRef(!1),s=i.useRef(!1);return(0,f.jsx)(to,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let i=t.target;r.triggerRef.current?.contains(i)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),to=i.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,u=e2(tn,r),d=i.useRef(null),h=(0,a.e)(t,d);return D(),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,f.jsx)(c.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":tp(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tv,{titleId:u.titleId}),(0,f.jsx)(t_,{contentRef:d,descriptionId:u.descriptionId})]})]})}),tl="DialogTitle",tu=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e2(tl,r);return(0,f.jsx)(d.WV.h2,{id:i.titleId,...n,ref:t})});tu.displayName=tl;var tc="DialogDescription",td=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e2(tc,r);return(0,f.jsx)(d.WV.p,{id:i.descriptionId,...n,ref:t})});td.displayName=tc;var th="DialogClose",tf=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=e2(th,r);return(0,f.jsx)(d.WV.button,{type:"button",...n,ref:t,onClick:(0,s.M)(e.onClick,()=>i.onOpenChange(!1))})});function tp(e){return e?"open":"closed"}tf.displayName=th;var tm="DialogTitleWarning",[tg,ty]=(0,o.k)(tm,{contentName:tn,titleName:tl,docsSlug:"dialog"}),tv=({titleId:e})=>{let t=ty(tm),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},tb="DialogDescriptionWarning",t_=({contentRef:e,descriptionId:t})=>{let r=ty(tb),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return i.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(n)},[n,e,t]),null},tS=e3,tw=e6,tT=e7,tE=tt,tC=ti,tx=tu,tI=td,tk=tf},7124:(e,t,r)=>{"use strict";r.d(t,{gm:()=>s});var n=r(7266);r(8819);var i=n.createContext(void 0);function s(e){let t=n.useContext(i);return e||t||"ltr"}},8957:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var n,i=r(7266),s=r(5819),a=(n||(n=r.t(i,2)))["useId".toString()]||(()=>void 0),o=0;function l(e){let[t,r]=i.useState(a());return(0,s.b)(()=>{e||r(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},2012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9664);let i=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],s=(0,n.Z)("Lightbulb",i)},2556:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9664);let i=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],s=(0,n.Z)("Send",i)},1855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9664);let i=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],s=(0,n.Z)("Users",i)},4723:(e,t,r)=>{"use strict";r.d(t,{Gc:()=>x,KN:()=>U,Qr:()=>B,RV:()=>I,U2:()=>y,cI:()=>eA,t8:()=>S});var n=r(7266),i=e=>"checkbox"===e.type,s=e=>e instanceof Date,a=e=>null==e;let o=e=>"object"==typeof e;var l=e=>!a(e)&&!Array.isArray(e)&&o(e)&&!s(e),u=e=>l(e)&&e.target?i(e.target)?e.target.checked:e.target.value:e,c=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,d=(e,t)=>e.has(c(t)),h=e=>{let t=e.constructor&&e.constructor.prototype;return l(t)&&t.hasOwnProperty("isPrototypeOf")},f="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;let r=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(f&&(e instanceof Blob||n))&&(r||l(e))))return e;else if(t=r?[]:{},r||h(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=p(e[r]));else t=e;return t}var m=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,y=(e,t,r)=>{if(!t||!l(e))return r;let n=m(t.split(/[,[\].]+?/)).reduce((e,t)=>a(e)?e:e[t],e);return g(n)||n===e?g(e[t])?r:e[t]:n},v=e=>"boolean"==typeof e,b=e=>/^\w*$/.test(e),_=e=>m(e.replace(/["|']|\]/g,"").split(/\.|\[/)),S=(e,t,r)=>{let n=-1,i=b(t)?[t]:_(t),s=i.length,a=s-1;for(;++n<s;){let t=i[n],s=r;if(n!==a){let r=e[t];s=l(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}return e};let w={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},T={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},E={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},C=n.createContext(null),x=()=>n.useContext(C),I=e=>{let{children:t,...r}=e;return n.createElement(C.Provider,{value:r},t)};var k=(e,t,r,n=!0)=>{let i={defaultValues:t._defaultValues};for(let s in e)Object.defineProperty(i,s,{get:()=>{let i=s;return t._proxyFormState[i]!==T.all&&(t._proxyFormState[i]=!n||T.all),r&&(r[i]=!0),e[i]}});return i},R=e=>l(e)&&!Object.keys(e).length,A=(e,t,r,n)=>{r(e);let{name:i,...s}=e;return R(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!n||T.all))},N=e=>Array.isArray(e)?e:[e],O=(e,t,r)=>!e||!t||e===t||N(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e)));function D(e){let t=n.useRef(e);t.current=e,n.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function P(e){let t=x(),{control:r=t.control,disabled:i,name:s,exact:a}=e||{},[o,l]=n.useState(r._formState),u=n.useRef(!0),c=n.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=n.useRef(s);return d.current=s,D({disabled:i,next:e=>u.current&&O(d.current,e.name,a)&&A(e,c.current,r._updateFormState)&&l({...r._formState,...e}),subject:r._subjects.state}),n.useEffect(()=>(u.current=!0,c.current.isValid&&r._updateValid(!0),()=>{u.current=!1}),[r]),n.useMemo(()=>k(o,r,c.current,!1),[o,r])}var M=e=>"string"==typeof e,L=(e,t,r,n,i)=>M(e)?(n&&t.watch.add(e),y(r,e,i)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),y(r,e))):(n&&(t.watchAll=!0),r);function j(e){let t=x(),{control:r=t.control,name:i,defaultValue:s,disabled:a,exact:o}=e||{},l=n.useRef(i);l.current=i,D({disabled:a,subject:r._subjects.values,next:e=>{O(l.current,e.name,o)&&c(p(L(l.current,r._names,e.values||r._formValues,!1,s)))}});let[u,c]=n.useState(r._getWatch(i,s));return n.useEffect(()=>r._removeUnmounted()),u}function F(e){let t=x(),{name:r,disabled:i,control:s=t.control,shouldUnregister:a}=e,o=d(s._names.array,r),l=j({control:s,name:r,defaultValue:y(s._formValues,r,y(s._defaultValues,r,e.defaultValue)),exact:!0}),c=P({control:s,name:r,exact:!0}),h=n.useRef(s.register(r,{...e.rules,value:l,...v(e.disabled)?{disabled:e.disabled}:{}})),f=n.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!y(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!y(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!y(c.validatingFields,r)},error:{enumerable:!0,get:()=>y(c.errors,r)}}),[c,r]),m=n.useMemo(()=>({name:r,value:l,...v(i)||c.disabled?{disabled:c.disabled||i}:{},onChange:e=>h.current.onChange({target:{value:u(e),name:r},type:w.CHANGE}),onBlur:()=>h.current.onBlur({target:{value:y(s._formValues,r),name:r},type:w.BLUR}),ref:e=>{let t=y(s._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}}),[r,s._formValues,i,c.disabled,l,s._fields]);return n.useEffect(()=>{let e=s._options.shouldUnregister||a,t=(e,t)=>{let r=y(s._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){let e=p(y(s._options.defaultValues,r));S(s._defaultValues,r,e),g(y(s._formValues,r))&&S(s._formValues,r,e)}return o||s.register(r),()=>{(o?e&&!s._state.action:e)?s.unregister(r):t(r,!1)}},[r,s,o,a]),n.useEffect(()=>{s._updateDisabledField({disabled:i,fields:s._fields,name:r})},[i,r,s]),n.useMemo(()=>({field:m,formState:c,fieldState:f}),[m,c,f])}let B=e=>e.render(F(e));var U=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},V=e=>({isOnSubmit:!e||e===T.onSubmit,isOnBlur:e===T.onBlur,isOnChange:e===T.onChange,isOnAll:e===T.all,isOnTouch:e===T.onTouched}),z=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let q=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let r=y(e,i);if(r){let{_f:e,...s}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!n||e.ref&&t(e.ref,e.name)&&!n)return!0;if(q(s,t))break}else if(l(s)&&q(s,t))break}}};var $=(e,t,r)=>{let n=N(y(e,r));return S(n,"root",t[r]),S(e,r,n),e},W=e=>"file"===e.type,K=e=>"function"==typeof e,H=e=>{if(!f)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},G=e=>M(e),Z=e=>"radio"===e.type,Q=e=>e instanceof RegExp;let Y={value:!1,isValid:!1},X={value:!0,isValid:!0};var J=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?X:{value:e[0].value,isValid:!0}:X:Y}return Y};let ee={isValid:!1,value:null};var et=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ee):ee;function er(e,t,r="validate"){if(G(e)||Array.isArray(e)&&e.every(G)||v(e)&&!e)return{type:r,message:G(e)?e:"",ref:t}}var en=e=>l(e)&&!Q(e)?e:{value:e,message:""},ei=async(e,t,r,n,s,o)=>{let{ref:u,refs:c,required:d,maxLength:h,minLength:f,min:p,max:m,pattern:b,validate:_,name:S,valueAsNumber:w,mount:T}=e._f,C=y(r,S);if(!T||t.has(S))return{};let x=c?c[0]:u,I=e=>{s&&x.reportValidity&&(x.setCustomValidity(v(e)?"":e||""),x.reportValidity())},k={},A=Z(u),N=i(u),O=A||N,D=(w||W(u))&&g(u.value)&&g(C)||H(u)&&""===u.value||""===C||Array.isArray(C)&&!C.length,P=U.bind(null,S,n,k),L=(e,t,r,n=E.maxLength,i=E.minLength)=>{let s=e?t:r;k[S]={type:e?n:i,message:s,ref:u,...P(e?n:i,s)}};if(o?!Array.isArray(C)||!C.length:d&&(!O&&(D||a(C))||v(C)&&!C||N&&!J(c).isValid||A&&!et(c).isValid)){let{value:e,message:t}=G(d)?{value:!!d,message:d}:en(d);if(e&&(k[S]={type:E.required,message:t,ref:x,...P(E.required,t)},!n))return I(t),k}if(!D&&(!a(p)||!a(m))){let e,t;let r=en(m),i=en(p);if(a(C)||isNaN(C)){let n=u.valueAsDate||new Date(C),s=e=>new Date(new Date().toDateString()+" "+e),a="time"==u.type,o="week"==u.type;M(r.value)&&C&&(e=a?s(C)>s(r.value):o?C>r.value:n>new Date(r.value)),M(i.value)&&C&&(t=a?s(C)<s(i.value):o?C<i.value:n<new Date(i.value))}else{let n=u.valueAsNumber||(C?+C:C);a(r.value)||(e=n>r.value),a(i.value)||(t=n<i.value)}if((e||t)&&(L(!!e,r.message,i.message,E.max,E.min),!n))return I(k[S].message),k}if((h||f)&&!D&&(M(C)||o&&Array.isArray(C))){let e=en(h),t=en(f),r=!a(e.value)&&C.length>+e.value,i=!a(t.value)&&C.length<+t.value;if((r||i)&&(L(r,e.message,t.message),!n))return I(k[S].message),k}if(b&&!D&&M(C)){let{value:e,message:t}=en(b);if(Q(e)&&!C.match(e)&&(k[S]={type:E.pattern,message:t,ref:u,...P(E.pattern,t)},!n))return I(t),k}if(_){if(K(_)){let e=er(await _(C,r),x);if(e&&(k[S]={...e,...P(E.validate,e.message)},!n))return I(e.message),k}else if(l(_)){let e={};for(let t in _){if(!R(e)&&!n)break;let i=er(await _[t](C,r),x,t);i&&(e={...i,...P(t,i.message)},I(i.message),n&&(k[S]=e))}if(!R(e)&&(k[S]={ref:x,...e},!n))return k}}return I(!0),k};function es(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=g(e)?n++:e[t[n++]];return e}function ea(e){for(let t in e)if(e.hasOwnProperty(t)&&!g(e[t]))return!1;return!0}function eo(e,t){let r=Array.isArray(t)?t:b(t)?[t]:_(t),n=1===r.length?e:es(e,r),i=r.length-1,s=r[i];return n&&delete n[s],0!==i&&(l(n)&&R(n)||Array.isArray(n)&&ea(n))&&eo(e,r.slice(0,-1)),e}var el=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},eu=e=>a(e)||!o(e);function ec(e,t){if(eu(e)||eu(t))return e===t;if(s(e)&&s(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let r=e[i];if(!n.includes(i))return!1;if("ref"!==i){let e=t[i];if(s(r)&&s(e)||l(r)&&l(e)||Array.isArray(r)&&Array.isArray(e)?!ec(r,e):r!==e)return!1}}return!0}var ed=e=>"select-multiple"===e.type,eh=e=>Z(e)||i(e),ef=e=>H(e)&&e.isConnected,ep=e=>{for(let t in e)if(K(e[t]))return!0;return!1};function em(e,t={}){let r=Array.isArray(e);if(l(e)||r)for(let r in e)Array.isArray(e[r])||l(e[r])&&!ep(e[r])?(t[r]=Array.isArray(e[r])?[]:{},em(e[r],t[r])):a(e[r])||(t[r]=!0);return t}function eg(e,t,r){let n=Array.isArray(e);if(l(e)||n)for(let n in e)Array.isArray(e[n])||l(e[n])&&!ep(e[n])?g(t)||eu(r[n])?r[n]=Array.isArray(e[n])?em(e[n],[]):{...em(e[n])}:eg(e[n],a(t)?{}:t[n],r[n]):r[n]=!ec(e[n],t[n]);return r}var ey=(e,t)=>eg(e,t,em(t)),ev=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>g(e)?e:t?""===e?NaN:e?+e:e:r&&M(e)?new Date(e):n?n(e):e;function eb(e){let t=e.ref;return W(t)?t.files:Z(t)?et(e.refs).value:ed(t)?[...t.selectedOptions].map(({value:e})=>e):i(t)?J(e.refs).value:ev(g(t.value)?e.ref.value:t.value,e)}var e_=(e,t,r,n)=>{let i={};for(let r of e){let e=y(t,r);e&&S(i,r,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},eS=e=>g(e)?e:Q(e)?e.source:l(e)?Q(e.value)?e.value.source:e.value:e;let ew="AsyncFunction";var eT=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===ew||l(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===ew)),eE=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eC(e,t,r){let n=y(e,r);if(n||b(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let n=i.join("."),s=y(t,n),a=y(e,n);if(s&&!Array.isArray(s)&&r!==n)break;if(a&&a.type)return{name:n,error:a};i.pop()}return{name:r}}var ex=(e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?!n.isOnChange:!i.isOnChange)||e),eI=(e,t)=>!m(y(e,t)).length&&eo(e,t);let ek={mode:T.onSubmit,reValidateMode:T.onChange,shouldFocusError:!0};function eR(e={}){let t,r={...ek,...e},n={submitCount:0,isDirty:!1,isLoading:K(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},o={},c=(l(r.defaultValues)||l(r.values))&&p(r.defaultValues||r.values)||{},h=r.shouldUnregister?{}:p(c),b={action:!1,mount:!1,watch:!1},_={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},E=0,C={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:el(),array:el(),state:el()},I=V(r.mode),k=V(r.reValidateMode),A=r.criteriaMode===T.all,O=e=>t=>{clearTimeout(E),E=setTimeout(e,t)},D=async e=>{if(!r.disabled&&(C.isValid||e)){let e=r.resolver?R((await Q()).errors):await X(o,!0);e!==n.isValid&&x.state.next({isValid:e})}},P=(e,t)=>{!r.disabled&&(C.isValidating||C.validatingFields)&&((e||Array.from(_.mount)).forEach(e=>{e&&(t?S(n.validatingFields,e,t):eo(n.validatingFields,e))}),x.state.next({validatingFields:n.validatingFields,isValidating:!R(n.validatingFields)}))},j=(e,t=[],i,s,a=!0,l=!0)=>{if(s&&i&&!r.disabled){if(b.action=!0,l&&Array.isArray(y(o,e))){let t=i(y(o,e),s.argA,s.argB);a&&S(o,e,t)}if(l&&Array.isArray(y(n.errors,e))){let t=i(y(n.errors,e),s.argA,s.argB);a&&S(n.errors,e,t),eI(n.errors,e)}if(C.touchedFields&&l&&Array.isArray(y(n.touchedFields,e))){let t=i(y(n.touchedFields,e),s.argA,s.argB);a&&S(n.touchedFields,e,t)}C.dirtyFields&&(n.dirtyFields=ey(c,h)),x.state.next({name:e,isDirty:ee(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else S(h,e,t)},F=(e,t)=>{S(n.errors,e,t),x.state.next({errors:n.errors})},B=e=>{n.errors=e,x.state.next({errors:n.errors,isValid:!1})},U=(e,t,r,n)=>{let i=y(o,e);if(i){let s=y(h,e,g(r)?y(c,e):r);g(s)||n&&n.defaultChecked||t?S(h,e,t?s:eb(i._f)):er(e,s),b.mount&&D()}},G=(e,t,i,s,a)=>{let l=!1,u=!1,d={name:e};if(!r.disabled){let r=!!(y(o,e)&&y(o,e)._f&&y(o,e)._f.disabled);if(!i||s){C.isDirty&&(u=n.isDirty,n.isDirty=d.isDirty=ee(),l=u!==d.isDirty);let i=r||ec(y(c,e),t);u=!!(!r&&y(n.dirtyFields,e)),i||r?eo(n.dirtyFields,e):S(n.dirtyFields,e,!0),d.dirtyFields=n.dirtyFields,l=l||C.dirtyFields&&!i!==u}if(i){let t=y(n.touchedFields,e);t||(S(n.touchedFields,e,i),d.touchedFields=n.touchedFields,l=l||C.touchedFields&&t!==i)}l&&a&&x.state.next(d)}return l?d:{}},Z=(e,i,s,a)=>{let o=y(n.errors,e),l=C.isValid&&v(i)&&n.isValid!==i;if(r.delayError&&s?(t=O(()=>F(e,s)))(r.delayError):(clearTimeout(E),t=null,s?S(n.errors,e,s):eo(n.errors,e)),(s?!ec(o,s):o)||!R(a)||l){let t={...a,...l&&v(i)?{isValid:i}:{},errors:n.errors,name:e};n={...n,...t},x.state.next(t)}},Q=async e=>{P(e,!0);let t=await r.resolver(h,r.context,e_(e||_.mount,o,r.criteriaMode,r.shouldUseNativeValidation));return P(e),t},Y=async e=>{let{errors:t}=await Q(e);if(e)for(let r of e){let e=y(t,r);e?S(n.errors,r,e):eo(n.errors,r)}else n.errors=t;return t},X=async(e,t,i={valid:!0})=>{for(let s in e){let a=e[s];if(a){let{_f:e,...o}=a;if(e){let o=_.array.has(e.name),l=a._f&&eT(a._f);l&&C.validatingFields&&P([s],!0);let u=await ei(a,_.disabled,h,A,r.shouldUseNativeValidation&&!t,o);if(l&&C.validatingFields&&P([s]),u[e.name]&&(i.valid=!1,t))break;t||(y(u,e.name)?o?$(n.errors,u,e.name):S(n.errors,e.name,u[e.name]):eo(n.errors,e.name))}R(o)||await X(o,t,i)}}return i.valid},J=()=>{for(let e of _.unMount){let t=y(o,e);t&&(t._f.refs?t._f.refs.every(e=>!ef(e)):!ef(t._f.ref))&&eO(e)}_.unMount=new Set},ee=(e,t)=>!r.disabled&&(e&&t&&S(h,e,t),!ec(em(),c)),et=(e,t,r)=>L(e,_,{...b.mount?h:g(t)?c:M(e)?{[e]:t}:t},r,t),er=(e,t,r={})=>{let n=y(o,e),s=t;if(n){let r=n._f;r&&(r.disabled||S(h,e,ev(t,r)),s=H(r.ref)&&a(t)?"":t,ed(r.ref)?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?i(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find(t=>t===e.value):s===e.value)):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach(e=>e.checked=e.value===s):W(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||x.values.next({name:e,values:{...h}})))}(r.shouldDirty||r.shouldTouch)&&G(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&ep(e)},en=(e,t,r)=>{for(let n in t){let i=t[n],a=`${e}.${n}`,u=y(o,a);(_.array.has(e)||l(i)||u&&!u._f)&&!s(i)?en(a,i,r):er(a,i,r)}},es=(e,t,r={})=>{let i=y(o,e),s=_.array.has(e),l=p(t);S(h,e,l),s?(x.array.next({name:e,values:{...h}}),(C.isDirty||C.dirtyFields)&&r.shouldDirty&&x.state.next({name:e,dirtyFields:ey(c,h),isDirty:ee(e,l)})):!i||i._f||a(l)?er(e,l,r):en(e,l,r),z(e,_)&&x.state.next({...n}),x.values.next({name:b.mount?e:void 0,values:{...h}})},ea=async e=>{b.mount=!0;let i=e.target,a=i.name,l=!0,c=y(o,a),d=()=>i.type?eb(c._f):u(e),f=e=>{l=Number.isNaN(e)||s(e)&&isNaN(e.getTime())||ec(e,y(h,a,e))};if(c){let i,s;let u=d(),p=e.type===w.BLUR||e.type===w.FOCUS_OUT,m=!eE(c._f)&&!r.resolver&&!y(n.errors,a)&&!c._f.deps||ex(p,y(n.touchedFields,a),n.isSubmitted,k,I),g=z(a,_,p);S(h,a,u),p?(c._f.onBlur&&c._f.onBlur(e),t&&t(0)):c._f.onChange&&c._f.onChange(e);let v=G(a,u,p,!1),b=!R(v)||g;if(p||x.values.next({name:a,type:e.type,values:{...h}}),m)return C.isValid&&("onBlur"===r.mode&&p?D():p||D()),b&&x.state.next({name:a,...g?{}:v});if(!p&&g&&x.state.next({...n}),r.resolver){let{errors:e}=await Q([a]);if(f(u),l){let t=eC(n.errors,o,a),r=eC(e,o,t.name||a);i=r.error,a=r.name,s=R(e)}}else P([a],!0),i=(await ei(c,_.disabled,h,A,r.shouldUseNativeValidation))[a],P([a]),f(u),l&&(i?s=!1:C.isValid&&(s=await X(o,!0)));l&&(c._f.deps&&ep(c._f.deps),Z(a,s,i,v))}},eu=(e,t)=>{if(y(n.errors,t)&&e.focus)return e.focus(),1},ep=async(e,t={})=>{let i,s;let a=N(e);if(r.resolver){let t=await Y(g(e)?e:a);i=R(t),s=e?!a.some(e=>y(t,e)):i}else e?((s=(await Promise.all(a.map(async e=>{let t=y(o,e);return await X(t&&t._f?{[e]:t}:t)}))).every(Boolean))||n.isValid)&&D():s=i=await X(o);return x.state.next({...!M(e)||C.isValid&&i!==n.isValid?{}:{name:e},...r.resolver||!e?{isValid:i}:{},errors:n.errors}),t.shouldFocus&&!s&&q(o,eu,e?a:_.mount),s},em=e=>{let t={...b.mount?h:c};return g(e)?t:M(e)?y(t,e):e.map(e=>y(t,e))},eg=(e,t)=>({invalid:!!y((t||n).errors,e),isDirty:!!y((t||n).dirtyFields,e),error:y((t||n).errors,e),isValidating:!!y(n.validatingFields,e),isTouched:!!y((t||n).touchedFields,e)}),ew=e=>{e&&N(e).forEach(e=>eo(n.errors,e)),x.state.next({errors:e?n.errors:{}})},eA=(e,t,r)=>{let i=(y(o,e,{_f:{}})._f||{}).ref,{ref:s,message:a,type:l,...u}=y(n.errors,e)||{};S(n.errors,e,{...u,...t,ref:i}),x.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&i&&i.focus&&i.focus()},eN=(e,t)=>K(e)?x.values.subscribe({next:r=>e(et(void 0,t),r)}):et(e,t,!0),eO=(e,t={})=>{for(let i of e?N(e):_.mount)_.mount.delete(i),_.array.delete(i),t.keepValue||(eo(o,i),eo(h,i)),t.keepError||eo(n.errors,i),t.keepDirty||eo(n.dirtyFields,i),t.keepTouched||eo(n.touchedFields,i),t.keepIsValidating||eo(n.validatingFields,i),r.shouldUnregister||t.keepDefaultValue||eo(c,i);x.values.next({values:{...h}}),x.state.next({...n,...t.keepDirty?{isDirty:ee()}:{}}),t.keepIsValid||D()},eD=({disabled:e,name:t,field:r,fields:n})=>{(v(e)&&b.mount||e||_.disabled.has(t))&&(e?_.disabled.add(t):_.disabled.delete(t),G(t,eb(r?r._f:y(n,t)._f),!1,!1,!0))},eP=(e,t={})=>{let n=y(o,e),i=v(t.disabled)||v(r.disabled);return S(o,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),_.mount.add(e),n?eD({field:n,disabled:v(t.disabled)?t.disabled:r.disabled,name:e}):U(e,!0,t.value),{...i?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:eS(t.min),max:eS(t.max),minLength:eS(t.minLength),maxLength:eS(t.maxLength),pattern:eS(t.pattern)}:{},name:e,onChange:ea,onBlur:ea,ref:i=>{if(i){eP(e,t),n=y(o,e);let r=g(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,s=eh(r),a=n._f.refs||[];(s?a.find(e=>e===r):r===n._f.ref)||(S(o,e,{_f:{...n._f,...s?{refs:[...a.filter(ef),r,...Array.isArray(y(c,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),U(e,!1,void 0,r))}else(n=y(o,e,{}))._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(d(_.array,e)&&b.action)&&_.unMount.add(e)}}},eM=()=>r.shouldFocusError&&q(o,eu,_.mount),eL=(e,t)=>async i=>{let s;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let a=p(h);if(_.disabled.size)for(let e of _.disabled)S(a,e,void 0);if(x.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await Q();n.errors=e,a=t}else await X(o);if(eo(n.errors,"root"),R(n.errors)){x.state.next({errors:{}});try{await e(a,i)}catch(e){s=e}}else t&&await t({...n.errors},i),eM(),setTimeout(eM);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(n.errors)&&!s,submitCount:n.submitCount+1,errors:n.errors}),s)throw s},ej=(e,t={})=>{y(o,e)&&(g(t.defaultValue)?es(e,p(y(c,e))):(es(e,t.defaultValue),S(c,e,p(t.defaultValue))),t.keepTouched||eo(n.touchedFields,e),t.keepDirty||(eo(n.dirtyFields,e),n.isDirty=t.defaultValue?ee(e,p(y(c,e))):ee()),!t.keepError&&(eo(n.errors,e),C.isValid&&D()),x.state.next({...n}))},eF=(e,t={})=>{let i=e?p(e):c,s=p(i),a=R(e),l=a?c:s;if(t.keepDefaultValues||(c=i),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([..._.mount,...Object.keys(ey(c,h))])))y(n.dirtyFields,e)?S(l,e,y(h,e)):es(e,y(l,e));else{if(f&&g(e))for(let e of _.mount){let t=y(o,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(H(e)){let t=e.closest("form");if(t){t.reset();break}}}}o={}}h=r.shouldUnregister?t.keepDefaultValues?p(c):{}:p(l),x.array.next({values:{...l}}),x.values.next({values:{...l}})}_={mount:t.keepDirtyValues?_.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!C.isValid||!!t.keepIsValid||!!t.keepDirtyValues,b.watch=!!r.shouldUnregister,x.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!a&&(t.keepDirty?n.isDirty:!!(t.keepDefaultValues&&!ec(e,c))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:a?{}:t.keepDirtyValues?t.keepDefaultValues&&h?ey(c,h):n.dirtyFields:t.keepDefaultValues&&e?ey(c,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},eB=(e,t)=>eF(K(e)?e(h):e,t),eU=(e,t={})=>{let r=y(o,e),n=r&&r._f;if(n){let e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&K(e.select)&&e.select())}};return{control:{register:eP,unregister:eO,getFieldState:eg,handleSubmit:eL,setError:eA,_executeSchema:Q,_getWatch:et,_getDirty:ee,_updateValid:D,_removeUnmounted:J,_updateFieldArray:j,_updateDisabledField:eD,_getFieldArray:e=>m(y(b.mount?h:c,e,r.shouldUnregister?y(c,e,[]):[])),_reset:eF,_resetDefaultValues:()=>K(r.defaultValues)&&r.defaultValues().then(e=>{eB(e,r.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:e=>{n={...n,...e}},_disableForm:e=>{v(e)&&(x.state.next({disabled:e}),q(o,(t,r)=>{let n=y(o,r);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},_subjects:x,_proxyFormState:C,_setErrors:B,get _fields(){return o},get _formValues(){return h},get _state(){return b},set _state(value){b=value},get _defaultValues(){return c},get _names(){return _},set _names(value){_=value},get _formState(){return n},set _formState(value){n=value},get _options(){return r},set _options(value){r={...r,...value}}},trigger:ep,register:eP,handleSubmit:eL,watch:eN,setValue:es,getValues:em,reset:eB,resetField:ej,clearErrors:ew,unregister:eO,setError:eA,setFocus:eU,getFieldState:eg}}function eA(e={}){let t=n.useRef(void 0),r=n.useRef(void 0),[i,s]=n.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...eR(e),formState:i});let a=t.current.control;return a._options=e,D({subject:a._subjects.state,next:e=>{A(e,a._proxyFormState,a._updateFormState,!0)&&s({...a._formState})}}),n.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),n.useEffect(()=>{if(a._proxyFormState.isDirty){let e=a._getDirty();e!==i.isDirty&&a._subjects.state.next({isDirty:e})}},[a,i.isDirty]),n.useEffect(()=>{e.values&&!ec(e.values,r.current)?(a._reset(e.values,a._options.resetOptions),r.current=e.values,s(e=>({...e}))):a._resetDefaultValues()},[e.values,a]),n.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),n.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),n.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=k(i,a),t.current}},9536:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(2052);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...c},d)=>(0,n.createElement)("svg",{ref:d,...a,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:s("lucide",o),...c},[...u.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=((e,t)=>{let r=(0,n.forwardRef)(({className:r,...a},l)=>(0,n.createElement)(o,{ref:l,iconNode:t,className:s(`lucide-${i(e)}`,r),...a}));return r.displayName=`${e}`,r})("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9293:e=>{"use strict";e.exports={i8:"1.9.15"}},522:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},4552:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},7105:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},8730:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};var __webpack_require__=require("../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=e=>__webpack_require__(__webpack_require__.s=e),__webpack_exports__=__webpack_require__.X(0,[147,954],()=>__webpack_exec__(2237));module.exports=__webpack_exports__})();